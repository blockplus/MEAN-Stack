"use strict";angular.module("fsaApp",["ngCookies","ngResource","ngAnimate","ngSanitize","ngRoute","btford.socket-io","ui.bootstrap","ngTouch","ngDialog","ui.select","timer","angularSmoothscroll","angularSpinner","isteven-multi-select","toastr","ngCkeditor"]).config(["$routeProvider","$locationProvider","$httpProvider",function(a,b,c){a.otherwise({redirectTo:"/"}),b.html5Mode(!0),c.interceptors.push("authInterceptor")}]).factory("authInterceptor",["$rootScope","$q","$cookieStore","$location",function(a,b,c,d){return{request:function(a){return a.headers=a.headers||{},c.get("token")&&(a.headers.Authorization="Bearer "+c.get("token")),a},responseError:function(a){return 401===a.status&&d.path("/login"),b.reject(a)}}}]).run(["$rootScope","$location","$window","Auth",function(a,b,c,d){a.$on("$locationChangeSuccess",function(){c.scrollTo(0,0)}),a.$on("$routeChangeStart",function(c,e){d.isLoggedInAsync(function(c){a.showChatBox=c,e.authenticate&&!c&&b.path("/login")})})}]).config(["toastrConfig",function(a){angular.extend(a,{autoDismiss:!0,positionClass:"toast-bottom-left",timeOut:3e3,extendedTimeOut:1e3})}]).config(["usSpinnerConfigProvider",function(a){var b={lines:13,length:6,width:2,radius:7,corners:1,rotate:0,direction:1,color:"#000",speed:1,trail:73,shadow:!1,hwaccel:!0,className:"spinner",zIndex:2e9,top:"50%",left:"50%"};a.setDefaults(b)}]),angular.module("fsaApp").controller("AboutCtrl",["$scope","$http","Auth",function(a,b,c){}]),angular.module("fsaApp").config(["$routeProvider",function(a){a.when("/about",{templateUrl:"app/about/about.html",controller:"AboutCtrl"})}]),angular.module("fsaApp").config(["$routeProvider",function(a){a.when("/test",{templateUrl:"app/account/signup/signup.html",controller:"SignupCtrl"})}]),angular.module("fsaApp").config(["$routeProvider",function(a){a.when("/login",{templateUrl:"app/account/login/login.html",controller:"LoginCtrl"}).when("/signup/key/:key/:name?/:email?",{templateUrl:"app/account/signup/signup.html",controller:"SignupCtrl"}).when("/signup",{templateUrl:"app/account/signup/signup.html",controller:"SignupCtrl"}).when("/settings",{templateUrl:"app/account/settings/settings.html",controller:"SettingsCtrl",authenticate:!0}).when("/forgot",{templateUrl:"app/account/forgot/forgot.html",controller:"ForgotCtrl"}).when("/reset/token/:token",{templateUrl:"app/account/reset/reset.html",controller:"ResetCtrl"}).when("/account",{templateUrl:"app/account/account/account.html",controller:"AccountCtrl"}).when("/account/:subjectname/:examnumber/:section",{templateUrl:"app/account/exam/exam.html",controller:"ExamCtrl"})}]),angular.module("fsaApp").directive("remove-me",function(){return function(a,b){b.bind("click",function(){console.log("test")})}}).controller("AccountCtrl",["$scope","$location","User","ngDialog",function(a,b,c,d){c.get(function(c){if(a.user=c,c.academicRole)"Teacher"==c.academicRole?b.url("/teacher"):b.url("/student");else{d.open({template:"components/academicRoleModal/academicRoleModal.html",controller:"AcademicRoleModalCtrl",className:"lgModal"})}}),a.user=c.get(),a.removeMe=function(a){a.target.remove()},a.readableSubjects={APCalcAB:"AP Calculus AB",APCalcBC:"AP Calculus BC",APStats:"AP Statistics",APPhysics1:"AP Physics 1",APPhysics2:"AP Physics 2",APEurHistory:"AP European History",APUSHistory:"AP US History",APWorldHistory:"AP World History",APMicroecon:"AP Microeconomics",APMacroecon:"AP Macroeconomics",APPsych:"AP Psychology",APBio:"AP Biology",APChem:"AP Chemistry",APEnvSci:"AP Env. Science",APUSGovt:"AP US Gov. & Pol.",APHumGeo:"AP Human Geography"}}]),angular.module("fsaApp").controller("ExamCtrl",["$scope",function(a){a.message="Hello"}]),angular.module("fsaApp").controller("ForgotCtrl",["$scope","$http","Auth",function(a,b,c){a.forgot=function(b){b.$valid&&(c.forgot(a.user.email).then(function(b){a.alertType="success",a.alertMsg="Email sent successfully"})["catch"](function(b){a.alertType="danger",a.alertMsg=b.message}),a.user.email="")}}]),angular.module("fsaApp").controller("LoginCtrl",["$scope","Auth","$location","$window",function(a,b,c,d){a.user={},a.errors={},b.logout(),a.login=function(d){a.submitted=!0,d.$valid&&b.login({email:a.user.email,password:a.user.password}).then(function(){c.path("/account")})["catch"](function(b){a.errors.other=b.message})},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("fsaApp").controller("ResetCtrl",["$scope","$routeParams","Auth",function(a,b,c){a.resetPassword=function(d){a.submitted=!0,d.$valid&&(c.resetPassword(b.token,a.user.newPassword).then(function(){a.alertType="success",a.alertMsg="Password set successfully"})["catch"](function(b){a.alertType="danger",a.alertMsg=b.message}),a.user.newPassword="",a.form.$setPristine())}}]),angular.module("fsaApp").controller("SettingsCtrl",["$http","$window","$scope","User","Auth",function(a,b,c,d,e){var f="";d.get(function(a){c.user={name:a.name,email:a.email,provider:a.provider},f=a.name,c.canChangeName=!a.nameChanged}),c.errors={},c.secret=!1,c.changeAccountInfo=function(a){c.infoSubmitted=!0,a.$valid&&e.changeInfo(a).then(function(){c.infoMessage="Account information successfully updated.",c.$root.userName=c.user.name,c.user.name!==f&&(c.canChangeName=!1)})["catch"](function(b){304===b.status?c.infoMessage="Nothing updated. Information is the same.":(a.email.$setValidity("mongoose",!1),c.errors.email="E-Mail already in use.",c.infoMessage="")})},c.changePassword=function(a){c.passSubmitted=!0,a.$valid&&e.changePassword(c.user.oldPassword,c.user.newPassword).then(function(){c.passMessage="Password successfully changed."})["catch"](function(){a.password.$setValidity("mongoose",!1),c.errors.oldPassword="Incorrect password",c.passMessage=""})}}]),angular.module("fsaApp").controller("BetaSignupCtrl",["$window","$scope","$location","Auth","$cookieStore","$cookies",function(a,b,c,d,e,f){d.logout(),b.role={},b.chkSubmitted=!1,b.signupError=f.signupError,b.signupError&&e.remove("signupError"),b.checkKey=function(){if(b.chkSubmitted=!0,b.errors={},b.betaKey){var a=b.betaKey;console.log(a),d.validateBetaKey(a,function(d){if(d)b.errors.betaKey=d,console.log(b.errors.betaKey);else{console.log("redirecting");var e="/signup/key/"+a;c.path(e)}})}else b.errors.betaKey="required",console.log("error set")}}]),angular.module("fsaApp").config(["$routeProvider",function(a){a.when("/beta",{templateUrl:"app/account/signup/beta/beta.html",controller:"BetaCtrl"})}]),angular.module("fsaApp").controller("SignupCtrl",["$scope","Auth","$location","$window","$http","$routeParams","$cookieStore","$cookies",function(a,b,c,d,e,f,g,h){b.logout(),a.user={},a.errors={},a.setEmail=!1,a.signupError=h.signupError,a.signupError&&g.remove("signupError");var i=f.key;f.name&&(a.user.name=f.name),f.email&&(a.user.email=f.email),i&&(b.validateBetaKey(i,function(a){a&&(h.signupError="Invalid Key",c.path("/signup"))}),b.getBetaKey(i,function(b){if("Error"===b)h.signupError="Key error",c.path("/");else{var d=b[0];d.massKey||(a.user.email=d.email,a.setEmail=!0,a.user.role=d.role),"Any"!==d.academicRole&&(a.setAcademicRole=!0,a.user.academicRole=d.academicRole)}})),a.register=function(d){if(a.submitted=!0,d.$valid){var e=a.user;i?(e.key=i,b.createUserFromKey(e).then(function(){c.path("/account")})["catch"](function(b){b=b.data,a.errors={},angular.forEach(b.errors,function(b,c){d[c].$setValidity("mongoose",!1),a.errors[c]=b.message})})):b.createUser(e).then(function(){c.path("/")})["catch"](function(b){b=b.data,a.errors={},angular.forEach(b.errors,function(b,c){d[c].$setValidity("mongoose",!1),a.errors[c]=b.message})})}},a.loginOauth=function(a){i?d.location.href="/auth/"+a+"/key/"+i:d.location.href="/auth/"+a}}]),angular.module("fsaApp").filter("startAt",function(){return function(a,b){return b=+b,a?a.slice(b):[]}}),angular.module("fsaApp").controller("AdminCtrl",["$scope","$location","$timeout","$window","$http","ngDialog","Auth","User","socket",function(a,b,c,d,e,f,g,h,i){a.trackerSet=!1,a.user=h.get(),g.is("admin",function(a){a||b.path("/")}),e.get("api/users/roles").success(function(b){a.roles=b}),a.adminComponentNames=["user","questions","survey","betaKey","couponManagement","chatroom","chatarchive","blockuser","exams","accountTracker","notificationToggle"],a.adminComponents={user:"app/admin/components/user/userManagement.html",questions:"app/admin/components/questions/questionManagement.html",survey:"app/admin/components/survey/surveyManagement.html",betaKey:"app/admin/components/betaKey/betaKeyManagement.html",couponManagement:"app/admin/components/couponManagement/couponManagement.html",chatroom:"app/admin/components/chatroom/chatroom.html",chatarchive:"app/admin/components/chatarchive/chatarchive.html",blockuser:"app/admin/components/blockuser/blockuser.html",exams:"app/admin/components/exams/examManagement.html",accountTracker:"app/admin/components/accountTracker/accountTracker.html",notificationToggle:"app/admin/components/notificationToggle/notificationToggle.html"},a.show={},a.showComponent=function(a){},a.resetDate=function(){e.post("auth/resetStatDate",{date:a.dt}).success(function(a){console.log(a);var b=angular.element(".animate-me");b.css("opacity",1),c(function(){b.css("opacity",0)},1e3)})},a.addUserModal=function(){f.open({template:"components/addUser/addUser.html",controller:"AddUserCtrl",scope:a})},a.modifyRole=function(a){h.changeRole({id:a._id},{id:a._id,newRole:a.newRole}),a.role=a.newRole,a.roleChanging=!1},a["delete"]=function(b){h.remove({id:b._id}),angular.forEach(a.users,function(c,d){c===b&&a.users.splice(d,1)})},a.parseDate=function(a){if(null===a)return"Never";var b=new Date(Date.parse(a));return b.toDateString()},a.dt=new Date,e.get("auth/resetStatDate").success(function(b){a.dt=b}),a.format="dd-MMMM-yyyy",a.dateOptions={formatYear:"yy",startingDay:1},a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.$on("$destroy",function(){i.unsyncUpdates("users")})}]),angular.module("fsaApp").config(["$routeProvider",function(a){a.when("/admin",{templateUrl:"app/admin/admin.html",controller:"AdminCtrl"})}]),angular.module("fsaApp").controller("AccountTrackerCtrl",["$scope","$http",function(a,b){b.get("/api/settings/byName/accountTrackerDate").error(function(b){console.error(b),a.accountTrackerDate=new Date(Date.now())}).success(function(b){a.accountTrackerDate=b.info.date}),a.dateOptions={formatYear:"yy",startingDay:1},a.opened=!1,a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.submitDate=function(c){c.preventDefault(),c.stopPropagation(),b.put("/api/settings/byName/accountTrackerDate",{info:{date:a.accountTrackerDate}}).error(function(a){console.error(a)}).success(function(a){console.log(a)})}}]),angular.module("fsaApp").controller("AddBetaKeyCtrl",["$scope","$window","$http","Auth","ngDialog",function(a,b,c,d,e){a.currentUser=d.getCurrentUser(),a.submitted=!1,a.errors={};var f=function(){return new Date(Date.now()+2592e6)};a.format="dd-MMMM-yyyy",a.dateOptions={formatYear:"yy",startingDay:1},a.academicRoles=[{name:"Any",value:"Any"},{name:"Teacher",value:"Teacher"},{name:"Student",value:"Student"},{name:"Parent",value:"Parent"}],a.key={expires:f(),academicRole:a.academicRoles[0].value},a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.addNewBetaKey=function(b){var c=a.key;c.approved=!0,b.$valid&&(d.addNewBetaKey(c),e.close())}}]),angular.module("fsaApp").controller("BetaKeyCtrl",["$scope","socket","Auth","$http","ngDialog","filterFilter",function(a,b,c,d,e,f){a.today=new Date(Date.now()),a.search="",a.currentPage=1,a.maxPage=1,a.lim=2,d.get("/api/betaKeys").success(function(c){a.betaKeys=c,a.filtered=c,b.syncUpdates("betaKey",a.betaKeys),a.maxPage=Math.ceil(c.length/a.lim)}),a.searchTypes=[{name:"Any",value:"$"},{name:"E-mail",value:"email"},{name:"Name",value:"name"},{name:"Approved",value:"approved"},{name:"Claimed",value:"numClaimed"}],a.searchType=a.searchTypes[0].value,a.$watch("filtered",function(b){if(b){var c=b.length;c>0?a.maxPage=Math.ceil(c/a.lim):a.maxPage=1}}),a.page=function(b){var c=a.currentPage+b;1>c||c>a.maxPage||(a.currentPage=c)},a.updateFiltered=function(){var b={};b[a.searchType]=a.search,a.currentPage=1,a.filtered=f(a.betaKeys,b)},a.addBetaKeyModal=function(){e.open({template:"app/admin/components/betaKey/addBetaKey.html",controller:"AddBetaKeyCtrl",className:"ngDialog-theme-top",scope:a})},a.parseClaimed=function(a){return a.massKey?a.numClaimed:1===a.numClaimed},a.parseDate=function(b){var c=new Date(Date.parse(b));return c<a.today},a.removeKey=function(a){d["delete"]("/api/betaKeys/"+a)},a.removeClaimed=function(){d["delete"]("/api/betaKeys/claimed")},a.removeExpired=function(){d["delete"]("/api/betaKeys/expired")},a.$on("$destroy",function(){b.unsyncUpdates("betaKey")})}]),angular.module("fsaApp").controller("BlockuserCtrl",["$scope","$http","socket",function(a,b,c){a.blockedUsers=[],a.radioModel="",b.get("/api/blockusers").success(function(b){a.blockedUsers=b}),c.syncUpdates("blockuser",a.blockedUsers,function(b,c){if("deleted"==b)for(var d=0;d<a.blockedUsers.length;++d)a.blockedUsers[d]._id==c._id&&a.blockedUsers.splice(d,1);else if("created"==b){for(var e=0;e<a.blockedUsers.length;++e)a.blockedUsers[e]._id==c._id&&a.blockedUsers.splice(e,1);a.blockedUsers.push(c)}}),a.activate=function(a){b["delete"]("/api/blockusers/"+a._id)},a.temporary=function(a){var c=a;c.type=1,b.put("/api/blockusers/"+c._id,c)},a.permanent=function(a){var c=a;c.type=2,b.put("/api/blockusers/"+c._id,c)}}]),angular.module("fsaApp").controller("ChatarchiveCtrl",["$scope","$http","socket","Auth","$window",function(a,b,c,d,e){a.glued=!0,a.tabs=[],a.page={},a.limit=30,a.archiveChats=[],a.currentUser=d.getCurrentUser(),a.roomsInitialLoaded=[],a.blockedUsers=[],a.blockedMessages=[],b.get("/api/chatrooms").success(function(d){if(d.length){a.tabs=d,a.roomID=a.tabs[0]._id,a.roomName=a.tabs[0].name,a.roomType=a.tabs[0].roomType;for(var e=0;e<d.length;++e)a.page[d[e]._id]={},a.page[d[e]._id].pagecount=1,a.page[d[e]._id].msgcount=0,a.page[d[e]._id].totalMsgcount=0;c.syncUpdates("chatarchive",a.archiveChats,function(b,c){++a.page[c.roomID].msgcount}),b.get("/api/blockusers").success(function(b){a.blockedUsers=b})}}),c.syncUpdates("chatrooms",a.tabs,function(b,c){if("created"===b){for(var d=0,e=0;e<a.tabs.length;++e)a.tabs[e]._id===c._id&&++d;d||(a.tabs.push(c),a.page[c._id]={},a.page[c._id].pagecount=1,a.page[c._id].msgcount=0,a.page[c._id].totalMsgcount=0)}else if("deleted"===b){for(var f=0;f<a.tabs.length;++f)a.tabs[f]._id===c._id&&a.tabs.splice(f,1);delete a.page[c._id]}}),a.selectRoom=function(b){a.roomID=b._id,a.roomName=b.name,a.roomType=b.roomType,a.roomsInitialLoaded.indexOf(a.roomID)<0&&a.loadChats()},a.loadChats=function(){b.get("/api/chatarchives/"+a.roomID+"/"+a.page[a.roomID].pagecount+"/"+a.limit).success(function(b){var c=b.messages;if(a.page[a.roomID].msgcount=b.messages.length,a.page[a.roomID].totalMsgcount=b.count,c.length>0)for(var d=c.length-1;d>=0;--d)a.archiveChats.unshift(c[d]),a.roomsInitialLoaded.indexOf(c[d].roomID)<0&&a.roomsInitialLoaded.push(c[d].roomID);var e=setInterval(function(){var a=angular.element("[scrollable=true]");a.each(function(a,b){b.scrollHeight>0&&(b.scrollTop=b.scrollHeight,clearInterval(e))})},200)})},a.loadEarlierMessages=function(){++a.page[a.roomID].pagecount,a.loadChats()},a.exportToJson=function(){b.get("/api/chatarchives/export/chats").success(function(a){e.open("/api/chatarchives/download/chats/file/"+a.fileName)})},a.blockUser=function(a,c,d,e){var f={email:a,type:c,message:d,name:e,timestamp:Date.now()};b.post("/api/blockusers/",f)},c.syncUpdates("blockuser",a.blockedUsers,function(b,c){if("deleted"==b)for(var d=0;d<a.blockedUsers.length;++d)a.blockedUsers[d]._id==c._id&&a.blockedUsers.splice(d,1);else if("created"==b){for(var e=0;e<a.blockedUsers.length;++e)a.blockedUsers[e]._id==c._id&&a.blockedUsers.splice(e,1);a.blockedUsers.push(c)}}),a.isBlocked=function(b){for(var c=0;c<a.blockedUsers.length;++c)if(a.blockedUsers[c].email==b)return!0;return!1}}]),angular.module("fsaApp").controller("ChatroomCtrl",["$scope","socket","Auth","$http","ngDialog",function(a,b,c,d,e){a.roomTypes=[{name:"Free",value:"free"},{name:"Premium",value:"premium"}],d.get("/api/chatrooms").success(function(c){a.rooms=c,b.syncUpdates("chatrooms",a.rooms)}),a.addChatRoomModal=function(){e.open({template:"components/addChatRoom/addChatRoom.html",controller:"AddChatRoomCtrl",scope:a})},a.deleteRoom=function(a){d["delete"]("/api/chatrooms/"+a._id)},a.$on("$destroy",function(){b.unsyncUpdates("chatrooms")})}]),angular.module("fsaApp").controller("AddCouponCtrl",["$scope","$window","$http","Auth","ngDialog",function(a,b,c,d,e){a.currentUser=d.getCurrentUser();var f=new Date;a.minDate=f.setDate((new Date).getDate()+1),a.openCouponDatePicker=function(b){b.preventDefault(),b.stopPropagation(),a.couponDatePickerOpened=!0},a.addNewCoupon=function(b){b.$valid&&(c.post("/api/coupons",a.coupon),e.close())}}]),angular.module("fsaApp").controller("CouponCtrl",["$scope","socket","Auth","$http","ngDialog",function(a,b,c,d,e){a.today=new Date(Date.now()),d.get("/api/coupons").success(function(c){a.coupons=c,b.syncUpdates("coupon",a.coupons)}),a.addCouponModal=function(){e.open({template:"app/admin/components/couponManagement/addCoupon.html",controller:"AddCouponCtrl",className:"ngDialog-theme-top",scope:a})},a.removeCoupon=function(a){d["delete"]("/api/coupons/"+a)},a.removeExpired=function(){d["delete"]("/api/coupons/expired")},a.removeReachedLimit=function(){d["delete"]("/api/coupons/limitReached")},a.$on("$destroy",function(){b.unsyncUpdates("coupon")})}]),angular.module("fsaApp").controller("AdminExamCtrl",["$scope","$http","socket","ngDialog","$window","$route","$location",function(a,b,c,d,e,f,g){a.exams=[],a.examObj={},a.readableSubjects={APCalcAB:"AP Calculus AB",APCalcBC:"AP Calculus BC",APStats:"AP Statistics",APPhysics1:"AP Physics 1",APPhysics2:"AP Physics 2",APEurHistory:"AP European History",APUSHistory:"AP US History",APWorldHistory:"AP World History",APMicroecon:"AP Microeconomics",APMacroecon:"AP Macroeconomics",APPsych:"AP Psychology",APBio:"AP Biology",APChem:"AP Chemistry",APEnvSci:"AP Env. Science",APUSGovt:"AP US Gov. & Pol.",APHumGeo:"AP Human Geography"},a.correctOpts=[{val:!0,name:"Correct"},{val:!1,name:"Incorrect"}],a.$watch("exams",function(){for(var b=a.exams,c=0;c<b.length;c++)a.examObj[b[c].subject]?a.examObj[b[c].subject].push(b[c]):a.examObj[b[c].subject]=[b[c]]}),b.get("/api/exams").success(function(b){a.exams=b})}]),angular.module("fsaApp").controller("NotificationToggleCtrl",["$scope","$http","socket","toastr",function(a,b,c,d){a.show=!1,a.isDisabled=!1,b.get("/api/settings/byName/adminChatNotification").success(function(b){a.settings=[b],a.show=!0,c.syncUpdates("settings",a.settings,function(b,c){"adminChatNotification"===c.name&&(a.settings=[c],d.warning("Chat Notifications Settings Updated!","Attention"))})}).error(function(b){a.show=!0}),a.toggleStatus=function(c){a.isDisabled=!0,b.put("/api/settings/byName/adminChatNotification",{info:{active:c}}).success(function(b){a.isDisabled=!1})},a.$on("$destroy",function(){c.unsyncUpdates("settings")})}]).config(["toastrConfig",function(a){angular.extend(a,{autoDismiss:!1,timeOut:0})}]),angular.module("fsaApp").controller("QuestionManageCtrl",["$scope","socket","$http","ngDialog","toastr","filterFilter",function(a,b,c,d,e,f){a.questionSearch="",a.questionCurrentPage=1,c.get("api/questions/").success(function(b){a.questions=b,a.filteredQuestions=b}),a.maxPage=1,a.subjectOptions=[null],a.questionSubject=a.subjectOptions[0],c.get("/api/settings/byName/subjects/").success(function(b){console.log(b);for(var c=0;c<b.info.subjects.length;c++)a.subjectOptions.push(b.info.subjects[c])}).error(function(a){e.error(a)}),a.questionLim=2,b.syncUpdates("questions",a.questions),a.questionSearchTypes=[{name:"Any",value:"$"},{name:"Body",value:"body"},{name:"Explanation",value:"explanation.body"}],a.questionSearchType=a.questionSearchTypes[0].value,a.orderTypes=[{name:"None",value:""},{name:"Name (A-Z)",value:"name"},{name:"Name (Z-A)",value:"-name"},{name:"Last login Date (Recent First)",value:"-lastLogin"},{name:"Last login Date (Recent Last)",value:"lastLogin"}],a.$watch("filteredQuestions",function(b){if(b){var c=b.length;c>0?a.questionMaxPage=Math.ceil(c/a.questionLim):a.questionMaxPage=1}}),a.questionTagRestrictions=[{name:"None",val:function(a){return 0===a.tags.length}},{name:"Some",val:function(a){return a.tags.length>0}},{name:"Any",val:null}],a.questionTagRestriction=a.questionTagRestrictions[2].val,a.addTag=function(a){a.newTag?(a.tags.push(a.newTag),a.newTag=null):console.log("Error, no new tag: "+a.newTag)},a.delTag=function(a,b){a.tags.splice(b,1)},a.delQuestion=function(a){var b=d.open({template:"components/confirmModal/confirmModal.html",data:{message:"Deleting questions can lead to weird exam issues!"}});b.closePromise.then(function(b){b.value&&c["delete"]("api/questions/"+a._id).success(function(){e.success("Question deleted!")}).error(function(a){e.error(a)})})},a.allTags=[],c.get("api/questions/tags").success(function(b){a.allTags=b}).error(function(a){e.error(a)}),a.saveQuestion=function(b,d){if(b.choices)for(var e=0;e<b.choices.length;e++)b.choices[e].correct=b.choices[e].tempCorrect;c.put("api/questions/"+b._id,b).success(function(b){var c=(a.questionCurrentPage-1)*a.questionLim+d;console.log(b),a.filteredQuestions[c]=b,a.filteredQuestions[c].editing=!1})},a.questionPage=function(b){var c=a.questionCurrentPage+b;1>c||c>a.questionMaxPage||(a.questionCurrentPage=c)},a.setFilteredQuestions=function(){if(a.filteredQuestions=a.questions,a.filteredQuestions){var b=a.filteredQuestions.length;b>0?a.questionMaxPage=Math.ceil(b/a.questionLim):a.questionMaxPage=1}},a.updateFilteredQuestions=function(){var b={};if(b[a.questionSearchType]=a.questionSearch,a.questionSubject?(console.log("Updating subject to: "+a.questionSubject),b.subject=a.questionSubject):delete b.subject,a.questionTagRestriction){var c=f(a.questions,a.questionTagRestriction);a.filteredQuestions=f(c,b)}else a.filteredQuestions=f(a.questions,b);a.questionCurrentPage=1},a.subjectString=function(a){var b="";if(0===a.length)b="None.";else if(1===a.length)b=a[0].subjectName+".";else{for(var c=0;c<a.length;c++)b=b+a[c].subjectName+", ";b=b.substring(0,b.length-2)+"."}return b},a.addSubjectsTaughtModal=function(b){d.open({template:"app/admin/components/subjectsTaught/subjectsTaught.html",controller:"SubjectsTaughtCtrl",scope:a,data:b})}}]),angular.module("fsaApp").controller("SubjectsTaughtCtrl",["$scope","ngDialog","$http",function(a,b,c){var d=a.ngDialogData;a.subjectsTaught=[],a.subjects=[{ticked:!1,subjectName:"APCalcAB",name:"AP Calculus AB"},{ticked:!1,subjectName:"APCalcBC",name:"AP Calculus BC"},{ticked:!1,subjectName:"APStats",name:"AP Statistics"},{ticked:!1,subjectName:"APPhysics1",name:"AP Physics 1"},{ticked:!1,subjectName:"APPhysics2",name:"AP Physics 2"},{ticked:!1,subjectName:"APEurHistory",name:"AP European History"},{ticked:!1,subjectName:"APUSHistory",name:"AP US History"},{ticked:!1,subjectName:"APWorldHistory",name:"AP World History"},{ticked:!1,subjectName:"APMicroecon",name:"AP Microeconomics"},{ticked:!1,subjectName:"APMacroecon",name:"AP Macroeconomics"},{ticked:!1,subjectName:"APPsych",name:"AP Psychology"},{ticked:!1,subjectName:"APBio",name:"AP Biology"},{ticked:!1,subjectName:"APChem",name:"AP Chemistry"},{ticked:!1,subjectName:"APEnvSci",name:"AP Env. Science"},{ticked:!1,subjectName:"APUSGovt",name:"AP US Gov. & Pol."},{ticked:!1,subjectName:"APHumGeo",name:"AP Human Geography"}];for(var e=0;e<d.subjectsTaught.length;++e)for(var f=0;f<a.subjects.length;++f)d.subjectsTaught[e].subjectName===a.subjects[f].subjectName&&(a.subjects[f].ticked=!0);a.saveSubjectsTaught=function(){for(var e=[],f=0;f<a.subjectsTaught.length;++f)e.push({subjectName:a.subjectsTaught[f].subjectName});c.put("/api/users/"+d._id+"/savesubjectstaught",{subjectsTaught:JSON.stringify(e)}).then(function(b){200===b.status&&(a.ngDialogData.subjectsTaught=e)}),b.closeAll(!0)}}]),angular.module("fsaApp").controller("AddSurveyCtrl",["$scope","$window","$http","Auth","ngDialog",function(a,b,c,d,e){a.currentUser=d.getCurrentUser(),a.survey={name:"",info:"",questions:[{body:"",choices:[{choiceContent:"",choiceTimesPicked:0}]}]},a.addQuestion=function(){a.survey.questions.push({questionContent:"",choices:[{choiceContent:""}]})},a.addChoice=function(a){a.choices.push({choiceContent:""})},a.removeQuestion=function(b){a.survey.questions.splice(b,1)},a.removeChoice=function(a,b){a.choices.splice(b,1)},a.addNewSurvey=function(c){var f=a.survey;f.active=!0,console.log("Submitting form"),c.$valid?(d.addNewSurvey(f),e.close()):b.alert(c.$errors)}}]),angular.module("fsaApp").controller("SurveyCtrl",["$scope","socket","Auth","$http","ngDialog","filterFilter",function(a,b,c,d,e,f){a.today=new Date(Date.now()),a.search="",a.currentPage=1,a.maxPage=1,a.lim=2,d.get("/api/surveys").success(function(c){a.surveys=c,a.filtered=c,b.syncUpdates("survey",a.surveys),a.maxPage=Math.ceil(c.length/a.lim)}),a.searchTypes=[{name:"Any",value:"$"},{name:"E-mail",value:"email"},{name:"Name",value:"name"},{name:"Approved",value:"approved"},{name:"Claimed",value:"numClaimed"}],a.searchType=a.searchTypes[0].value,a.$watch("filtered",function(b){if(b){var c=b.length;c>0?a.maxPage=Math.ceil(c/a.lim):a.maxPage=1}}),a.page=function(b){var c=a.currentPage+b;1>c||c>a.maxPage||(a.currentPage=c)},a.updateFiltered=function(){var b={};b[a.searchType]=a.search,a.currentPage=1,a.filtered=f(a.surveys,b)},a.addSurveyModal=function(){e.open({template:"app/admin/components/survey/addSurvey.html",controller:"AddSurveyCtrl",scope:a})},a.removeSurvey=function(a){d["delete"]("/api/surveys/"+a)},a.enableSurvey=function(b){d.put("/api/surveys/enable/"+b);for(var c=0;c<a.surveys.length;c++)a.surveys[c]._id===b&&(a.surveys[c].active=!0)},a.disableSurvey=function(b){d.put("/api/surveys/disable/"+b);for(var c=0;c<a.surveys.length;c++)a.surveys[c]._id===b&&(a.surveys[c].active=!1)},a.$on("$destroy",function(){b.unsyncUpdates("survey")})}]),angular.module("fsaApp").controller("UserManageCtrl",["$scope","User","socket","ngDialog","filterFilter",function(a,b,c,d,e){a.userSearch="",a.userCurrentPage=1,a.users=b.query(function(b){a.filteredUsers=b}),a.maxPage=1,a.userLim=2,c.syncUpdates("users",a.users),a.userSearchTypes=[{name:"Any",value:"$"},{name:"Name",value:"name"},{name:"Email",value:"email"},{name:"Role",value:"role"},{name:"Academic Role",value:"academicRole"}],a.userSearchType=a.userSearchTypes[0].value,a.orderTypes=[{name:"None",value:""},{name:"Name (A-Z)",value:"name"},{name:"Name (Z-A)",value:"-name"},{name:"Last login Date (Recent First)",value:"-lastLogin"},{name:"Last login Date (Recent Last)",value:"lastLogin"}],a.orderField=a.orderTypes[0].value,a.$watch("filteredUsers",function(b){if(b){var c=b.length;c>0?a.userMaxPage=Math.ceil(c/a.userLim):a.userMaxPage=1}}),a.userPage=function(b){var c=a.userCurrentPage+b;1>c||c>a.userMaxPage||(a.userCurrentPage=c)},a.setFilteredUsers=function(){if(a.filteredUsers=a.users,a.filteredUsers){var b=a.filteredUsers.length;b>0?a.userMaxPage=Math.ceil(b/a.userLim):a.userMaxPage=1}},a.updateFilteredUsers=function(){var b={};b[a.userSearchType]=a.userSearch,a.filteredUsers=e(a.users,b)},a.subjectString=function(a){var b="";if(0===a.length)b="None.";else if(1===a.length)b=a[0].subjectName+".";else{for(var c=0;c<a.length;c++)b=b+a[c].subjectName+", ";b=b.substring(0,b.length-2)+"."}return b},a.addSubjectsTaughtModal=function(b){d.open({template:"app/admin/components/subjectsTaught/subjectsTaught.html",controller:"SubjectsTaughtCtrl",scope:a,data:b})}}]),angular.module("fsaApp").controller("ExamEditCtrl",["$scope","$http","$routeParams","toastr","$window",function(a,b,c,d,e){function f(b){var c;a.changed&&(c=e.confirm("You have unsaved changes. Continue?"),b&&!c&&b.preventDefault())}a.examId=c.id,a.exam=void 0,a.changed=!1,b.get("/api/exams/"+a.examId).success(function(b){a.exam=b}),a.delQuestion=function(b,c){b.editing&&(b.editing=!1);var d="part"+c.toString();console.log(b._id),console.log(a.exam.section1[d].fullQuestions);var e=a.exam.section1[d].questionIds.indexOf(b._id);console.log("index is:"+e.toString()),a.exam.section1[d].questionIds.splice(e,1),a.exam.section1[d].fullQuestions.splice(e,1),a.changed=!0},a.$on("$locationChangeStart",f),a.saveExam=function(){b.put("/api/exams/"+a.exam._id,a.exam).success(function(){d.success("Exam successfully updated!",{timeOut:1e3})}).error(function(a){d.error("Error: "+a,{timeOut:500})}),a.changed=!1},a.saveQuestion=function(a){for(var c=0;c<a.choices.length;c++)"true"===a.choices[c].tempCorrect?a.choices[c].correct=!0:"false"===a.choices[c].tempCorrect&&(a.choices[c].correct=!1);console.log("Updating this question:"),console.log(JSON.stringify(a)),b.put("/api/questions/"+a._id,a).success(function(b){console.log("Successfully updated question "+b._id),a.editing=!1}).error(function(b){console.log("Error updating question: "+b),a.editing=!1})}}]),angular.module("fsaApp").config(["$routeProvider",function(a){a.when("/admin/examEdit/:id",{templateUrl:"app/admin/examEdit/examEdit.html",controller:"ExamEditCtrl"})}]),angular.module("fsaApp").config(["$routeProvider",function(a){a.when("/blog",{redirectTo:function(){window.location="/blog"}})}]),angular.module("fsaApp").controller("ContactCtrl",["$scope",function(a){a.message="Hello"}]),angular.module("fsaApp").config(["$routeProvider",function(a){a.when("/contact",{templateUrl:"app/contact/contact.html",controller:"ContactCtrl"})}]),angular.module("fsaApp").controller("ExamCtrl",["$scope",function(a){a.message="Hello"}]),angular.module("fsaApp").controller("MainCtrl",["$scope","toastr","persist","$location","$http","Auth",function(a,b,c,d,e,f){f.isLoggedInAsync(function(a){a&&(f.isTeacher()?d.path("/teacher"):f.isStudent()&&d.path("/student"))}),a.role={},a.subjects=[{dbName:"APCalcAB",fullName:"AP Calculus AB"},{dbName:"APCalcBC",fullName:"AP Calculus BC"},{dbName:"APStats",fullName:"AP Statistics"},{dbName:"APPhysics1",fullName:"AP Physics 1"},{dbName:"APPhysics2",fullName:"AP Physics 2"},{dbName:"APEurHistory",fullName:"AP European History"},{dbName:"APWorldHistory",fullName:"AP World History"},{dbName:"APPsych",fullName:"AP Psychology"},{dbName:"APBio",fullName:"AP Biology"},{dbName:"APChem",fullName:"AP Chemistry"},{dbName:"APEnvSci",fullName:"AP Environmental Science"},{dbName:"APUSGovt",fullName:"AP US Government"},{dbName:"APHumGeo",fullName:"AP Human Geography"}];for(var g={},h=0;h<a.subjects.length;h++)g[a.subjects[h].fullName]=a.subjects[h].dbName;a.newAssignment={studentSubject:"",teacherSubject:"",topic:""},a.addAssignment=function(a){d.path("/login")},a.updateTags=function(c){g[c]&&e.get("api/questions/tags/"+g[c]).success(function(b){a.topics=b}).error(function(a){b.error(a,{timeOut:1e3})})}}]),angular.module("fsaApp").config(["$routeProvider",function(a){a.when("/",{templateUrl:"app/main/main.html",controller:"MainCtrl"})}]),angular.module("fsaApp").controller("PricingCtrl",["$scope","$http","$routeParams","ngDialog","Auth","$location","$window","usSpinnerService",function(a,b,c,d,e,f,g,h){function i(){a.numPicked>m?a.numFreePicked=m:a.numFreePicked=a.numPicked,a.totalWithoutDiscount=(12*a.numPicked).toFixed(2),a.total=((a.totalWithoutDiscount-12*a.numFreePicked)*(1-o.discountPercent)).toFixed(2),a.discountPercent=Math.round(100-a.total/a.totalWithoutDiscount*100)}function j(){b.post("/api/coupons/use/"+a.couponCode)}function k(){for(var b=[],c=0;c<a.subjects.length;c++){var d=a.subjects[c];"selected"===d.currentClass&&b.push(d.databaseName)}return b}function l(){var a=[{subjectName:"AP Calculus AB",idName:"calcab",currentClass:"unselected",databaseName:"APCalcAB"},{subjectName:"AP Calculus BC",idName:"calcbc",currentClass:"unselected",databaseName:"APCalcBC"},{subjectName:"AP Physics 1",idName:"physone",currentClass:"unselected",databaseName:"APPhysics1"},{subjectName:"AP Physics 2",
idName:"phystwo",currentClass:"unselected",databaseName:"APPhysics2"},{subjectName:"AP Statistics",idName:"stats",currentClass:"unselected",databaseName:"APStats"},{subjectName:"AP European History",idName:"eurhis",currentClass:"unselected",databaseName:"APEurHistory"},{subjectName:"AP US History",idName:"ushis",currentClass:"unselected",databaseName:"APUSHistory"},{subjectName:"AP World History",idName:"worldhis",currentClass:"unselected",databaseName:"APWorldHistory"},{subjectName:"AP Psychology",idName:"psych",currentClass:"unselected",databaseName:"APPsych"},{subjectName:"AP Biology",idName:"bio",currentClass:"unselected",databaseName:"APBio"},{subjectName:"AP Chemistry",idName:"chem",currentClass:"unselected",databaseName:"APChem"},{subjectName:"AP Envir. Science",idName:"envsci",currentClass:"unselected",databaseName:"APEnvSci"},{subjectName:"AP US Government",idName:"usgov",currentClass:"unselected",databaseName:"APUSGovt"},{subjectName:"AP Human Geography",idName:"humgeo",currentClass:"unselected",databaseName:"APHumGeo"}];return a}var m,n,o;a.paypalProcessing=!1,a.freeBtnDisabled=!1,e.isLoggedInAsync(function(b){if(b){o=e.getCurrentUser(),m=0,a.subjects=l(),a.couponCode=c.couponCode,a.numFreePicked=0,a.numPicked=0,n=o.subjects,m=o.numFreeSubjects;for(var d=0;d<n.length;d++)for(var f=n[d].subjectName,g=0;g<a.subjects.length;g++)if(a.subjects[g].databaseName===f){a.subjects[g].currentClass="blocked";break}}else console.log("user is not logged in")}),a.showCCForm=function(){d.open({template:"components/ccform/ccform.html",controller:"CcformCtrl",scope:a})},a.submitCouponCode=function(){a.couponCode&&b.get("/api/coupons/getByCode/"+a.couponCode).success(function(b){a.couponMessage=b.subjectName+" is free!",angular.forEach(a.subjects,function(a){delete a.isFree,a.databaseName===b.subjectName&&(a.isFree=!0)});var c=k(),d=c.indexOf(b.subjectName);d>-1&&(m=o.numFreeSubjects+1,i())}).error(function(b){angular.forEach(a.subjects,function(a){delete a.isFree}),a.couponMessage=b.message,m=o.numFreeSubjects,i()})},a.submitCouponCode(),a.redeemFree=function(){a.startSpin("spinner-free"),a.freeBtnDisabled=!0;var b=k();e.addSubjects(b,function(b){j(),a.stopSpin("spinner-free"),g.location.href="/account"},function(b){console.log(b),a.stopSpin("spinner-free"),a.freeBtnDisabled=!1})};var p=function(c,d,f){for(var h=[],i=0;i<a.subjects.length;i++){var k=a.subjects[i];"selected"===k.currentClass&&h.push(k.databaseName)}var l={amount:c,nonce:d,subjects:h,email:f};a.startSpin("spinner-paypal"),a.paypalProcessing=!0,b.post("/api/tokens",l).success(function(a){e.addSubjects(h,function(a){j(),g.location.href="/account"})})};b.get("/api/tokens").success(function(b){braintree.setup(b,"paypal",{container:angular.element("#paypal-btn"),onSuccess:function(b,c){p(a.total,b,c)},singleUse:!0})}),a.total=0,a.select=function(b){"unselected"===b.currentClass?(b.isFree&&m++,m>a.numFreePicked?(a.numFreePicked+=1,a.numPicked+=1,b.currentClass="selected"):(b.currentClass="selected",a.numPicked+=1)):"selected"===b.currentClass&&(b.isFree&&m--,a.numPicked-=1,a.numPicked<=a.numFreePicked&&(a.numFreePicked=a.numPicked),b.currentClass="unselected"),i()},a.startSpin=function(a){h.spin(a)},a.stopSpin=function(a){h.stop(a)}}]),angular.module("fsaApp").config(["$routeProvider",function(a){a.when("/pricing/couponCode/:couponCode",{templateUrl:"app/pricing/pricing.html",controller:"PricingCtrl",authenticate:!0}).when("/pricing",{templateUrl:"app/pricing/pricing.html",controller:"PricingCtrl",authenticate:!0})}]),angular.module("fsaApp").controller("PrivacyCtrl",["$scope",function(a){a.message="Hello"}]),angular.module("fsaApp").config(["$routeProvider",function(a){a.when("/privacy",{templateUrl:"app/privacy/privacy.html",controller:"PrivacyCtrl"})}]),angular.module("fsaApp").controller("ResourcesCtrl",["$scope","ngDialog",function(a,b){}]),angular.module("fsaApp").config(["$routeProvider",function(a){a.when("/resources/:subject?/:resource?",{templateUrl:function(a){var b="app/resources/resources.html";return a.subject&&(b=a.resource?"app/resources/subjects/"+a.subject+"/"+a.resource+".html":"app/resources/subjects/"+a.subject+"/"+a.subject+".html"),b},controller:"ResourcesCtrl"})}]),angular.module("fsaApp").controller("ResourcesAPPhysCtrl",["$scope","ngDialog","$routeParams",function(a,b,c){a.subject=c.subject,a.resources=[{name:"Equation Sheet",url:"/resources/APPhys/equations",description:"A few equations that you might be able to use on the exam, organized by topic."}]}]),angular.module("fsaApp").controller("ResourcesAPPhysEquationsCtrl",["$scope","ngDialog","$http","toastr",function(a,b,c,d){a.equationList=[],c.get("assets/jsons/APPhysEquations.json").success(function(b){a.equationList=b}).error(function(a){})}]),angular.module("fsaApp").controller("StudentClassroomAssignmentCtrl",["$scope","$http","$window","$routeParams","ngDialog","Auth","$location","$rootScope","$timeout","toastr","classroomHelper",function(a,b,c,d,e,f,g,h,i,j,k){function l(b){var d;a.preExam||a.examSubmit||(d=c.confirm("Throw away your progress?"),b&&!d&&b.preventDefault())}a.classURL="student/classroom/"+d.classCode,a.getDate=function(a){var b=new Date(a);return b.toLocaleDateString()},a.getTime=function(a){var b=new Date(a);return b.toLocaleTimeString()},a.$on("$locationChangeStart",l),a.currentUser=f.getCurrentUser(),a.preExam=!0,a.examSubmit=!1,a.percentages=0,a.numCorrect=0,a.numGraded=0,a.newUser={name:"",period:""},a.numUngraded=0;var m,n=function(b,c){if(b){a.preExam=!1,a.examSubmit=!0;for(var d=c.submission.submission,e=0;e<d.length;e++)for(var f=d[e].response,g=d[e].questionId,h=0;h<a.questions.length;h++)if(g===a.questions[h]._id){f&&(a.questions[h].correct=f.correct,a.questions[h].studentResponse=f);break}}},o=[];b.get("/api/assignments/byClassAndCode/"+d.classCode+"/"+d.assignmentCode).success(function(c){c||g.path("/student"),a.totalQuestions=c.questions.length,a.instructions=c.instructions,a.questions=c.questions,console.log(a.questions),a.assignment=c,m=c._id;var e=k.findMatchingAssignment(d.classCode,c._id);e.submission?n(!0,e):e?n(!1,!1):b.get("/api/classrooms/byStudent/byCode/"+d.classCode).success(function(a){k.addNewClass(a),e=k.findMatchingAssignment(d.classCode,c._id),e.submission?n(!0,e):e&&!e.submission?n(!1,!1):console.log("matching assignment not found")}).error(function(a){j.error(a)})}).error(function(a){j.error(a),g.path("/student/classroom/"+d.classCode)}),a.startExam=function(){a.currentUser._id||a.newUser.name?a.preExam=!1:j.error("Please enter your name.",{timeOut:1e3})},a.triggerSignup=function(){var c=e.open({template:"components/signupModal/signupModal.html",controller:"SignupModalCtrl",className:"lgModal",data:{name:a.newUser.name,period:a.newUser.period,message:"Please sign up to see explanations!"}});c.closePromise.then(function(c){a.currentUser=f.getCurrentUser(),b.post("/api/classrooms/student/"+d.classCode+"/"+d.assignmentCode,o).success(function(){a.percentages=100*a.numCorrect/a.numGraded}).error(function(a){j.error(a,{timeOut:1e3})})})},a.submitExam=function(){var c=a.choices;a.examSubmit=!0,a.userChoices=c;for(var e=0;e<a.questions.length;e++)if("mult"===a.questions[e].type)if(a.hasOneCorrect(a.questions[e].choices)){var f=!1;a.questions[e].response&&(f=a.questions[e].response.correct),o.push({response:a.questions[e].response,questionId:a.questions[e]._id,correct:f}),a.numGraded++,f?(a.numCorrect++,a.questions[e].correct=!0):f===!1&&(a.questions[e].correct=!1)}else{var f=p(a.questions[e]);o.push({response:a.questions[e].response,questionId:a.questions[e]._id,correct:f}),f&&(a.numCorrect++,a.questions[e].correct=!0),f===!1&&(a.questions[e].correct=!1),a.numGraded++}else o.push({response:a.questions[e].response,questionId:a.questions[e]._id,correct:void 0}),a.questions[e].response&&(a.questions[e].attempted=!0),a.numUngraded++;a.currentUser._id?(console.log(o),b.post("/api/classrooms/student/"+d.classCode+"/"+d.assignmentCode,o).success(function(){b.get("/api/classrooms/byStudent/byCode/"+d.classCode).success(function(a){k.updateClassroom(a)}).error(function(a){j.error(a)}),j.success("Assignment submitted!",{timeOut:1e3}),a.percentages=100*a.numCorrect/a.numGraded}).error(function(a){j.error(a,{timeOut:1e3})})):a.triggerSignup()};var p=function(a){var b=0;for(var c in a.response)if(a.response[c].correct===!0)b++;else if(a.response[c].correct===!1)return!1;if(0!==b){for(var d=0,e=0;e<a.choices.length;e++)a.choices[e].correct&&d++;return d===b}};a.hasOneCorrect=function(a){for(var b=0,c=0;c<a.length;++c)a[c].correct&&++b;return 1===b}}]),angular.module("fsaApp").controller("StudentClassroomCtrl",["$scope","$http","toastr","$location","User","ngDialog","$routeParams","classroomHelper",function(a,b,c,d,e,f,g,h){var i,j=function(b){a.classroom=b,a["new"]=[],a.old=[],a.myPeerGrades;for(var c=0;c<b.assignments.length;c++)b.assignments[c].canView=!1,b.assignments[c].submission?(b.assignments[c].submission.allMult?b.assignments[c].canView=!0:b.peerGrades&&b.peerGrades[String(i._id)]&&b.assignments[c].code in a.classroom.peerGrades[String(i._id)]&&a.classroom.peerGrades[String(i._id)][b.assignments[c].code].length>=Math.min(5,a.classroom.students.length-1)&&(b.assignments[c].canView=!0),a.old.push(b.assignments[c])):a.hasPassed(b.assignments[c])?a.old.push(b.assignments[c]):b.assignments[c].submission?a.old.push(b.assignments[c]):a["new"].push(b.assignments[c]);a.myPeerGrades=b.peerGrades[String(i._id)]};e.get(function(a){i=a;var d;d=h.findMatchingClassroom(g.classCode),d===!1?b.get("/api/classrooms/byStudent/byCode/"+g.classCode).success(function(a){h.addNewClass(a),j(a)}).error(function(a){c.error(a)}):j(d)}),a.peerGrade=function(a){var b=f.open({template:"app/student/classroom/peerGradeModal.html",controller:"StudentClassroomPeerGradeModalCtrl",className:"lgModal",data:{assignmentCode:a,classCode:g.classCode}});b.closePromise.then(function(a){return"$document"!==a.value&&a.value?a.value&&a.value.assignments?(j(a.value),!0):void 0:!1})},a.hasPassed=function(a){var b=new Date(Date.now()),c=new Date(a.dueDate);return b>c},a.goToAssignment=function(a){console.log(a),d.path("student/classroom/"+g.classCode+"/assignment/"+a.code)},a.checkIfToday=function(a){var b=new Date(Date.now()),c=new Date(a);return c.toDateString()===b.toDateString()},a.addMessage=function(){var d={message:a.newMessage,type:"message",date:new Date(Date.now())};a.newMessage&&b.post("/api/classrooms/message/"+a.classroom._id,d).success(function(b){b.isToday=a.checkIfToday(b.date),a.classroom.messages.push(b),a.newMessage=void 0,a.$broadcast("messages_updated")}).error(function(a){c.error(a)})}}]),angular.module("fsaApp").controller("StudentClassroomPeerGradeModalCtrl",["$scope","$http","ngDialog","toastr","$routeParams",function(a,b,c,d,e){var f,g="api/classrooms/peer/"+a.ngDialogData.classCode+"/"+a.ngDialogData.assignmentCode;b.get(g).success(function(b){console.log(b),f=b,a.responses=b.responses,a.questions=b.questions}).error(function(b){d.error(b),a.closeThisDialog()}),a.grades={},a.submitPeerGrade=function(){for(var c=[],e=0;e<a.questions.length;e++)c.push({questionId:a.questions[e]._id,grade:a.grades[a.questions[e]._id]});var h={studentId:f.studentId,graded:c};b.post(g,h).success(function(b){console.log(b),a.closeThisDialog(b)}).error(function(a){d.error(a)})}}]),angular.module("fsaApp").controller("StudentPracticeCtrl",["$scope","$http","$window","$routeParams","ngDialog","Auth","$location","$rootScope","$timeout","toastr",function(a,b,c,d,e,f,g,h,i,j){a.classURL="student/classroom/"+d.classCode,a.currentUser=f.getCurrentUser(),a.examSubmit=!1,a.percentages=0,a.numCorrect=0,a.numGraded=0,a.numUngraded=0,a.choices={};var k="/api/questions/practice/"+d.subject;d.topic&&(k+="/"+d.topic),b.get(k).success(function(b){a.totalQuestions=b.length,a.questions=b,a.activeQuestion=0}).error(function(a){j.error(a),g.path("/")}),a.next=function(){a.activeQuestion<a.questions.length-1&&a.activeQuestion++},a.prev=function(){a.activeQuestion>0&&a.activeQuestion--},a.triggerSignup=function(){var b=e.open({template:"components/signupModal/signupModal.html",controller:"SignupModalCtrl",className:"lgModal"});b.closePromise.then(function(b){a.currentUser=f.getCurrentUser()})},a.submitExam=function(){a.examSubmit=!0;for(var b=0;b<a.questions.length;b++)if(a.hasOneCorrect(a.questions[b].choices)){var c=!1;a.questions[b].response&&(c=a.questions[b].response.correct,console.log(c)),a.numGraded++,c?(a.numCorrect++,a.questions[b].correct=!0):c===!1&&(a.questions[b].correct=!1)}else{var c=l(a.questions[b]);c&&(a.numCorrect++,a.questions[b].correct=!0),c===!1&&(a.questions[b].correct=!1),a.numGraded++}};var l=function(a){var b=0;for(var c in a.response)if(a.response[c].correct===!0)b++;else if(a.response[c].correct===!1)return!1;if(0!==b){for(var d=0,e=0;e<a.choices.length;e++)a.choices[e].correct&&d++;return d===b}};a.hasOneCorrect=function(a){for(var b=0,c=0;c<a.length;++c)a[c].correct&&++b;return 1===b}}]),angular.module("fsaApp").controller("StudentCtrl",["$scope","$http","toastr","$location","classroomHelper",function(a,b,c,d,e){a.goToClass=function(a){d.path("/student/classroom/"+a.code)},a.checkIfToday=function(a){var b=new Date(Date.now()),c=new Date(a);return c.toDateString()===b.toDateString()},a.signUp=function(d){b.post("/api/classrooms/signUpByCode/"+d.code,{}).success(function(b){a.classrooms.push(b),a.messages=a.messages.concat(b.messages),e.addNewClass(b)}).error(function(a){c.error(a)})};var f=function(b){a.classrooms=b;for(var c=0;c<b.length;c++){a.messages=a.messages.concat(b[c].messages);for(var d=0;d<b[c].assignments.length;d++){var e=b[c].assignments[d];e.submission||(e.subject=b[c].subject,a.assignments.push(e))}}};a.messages=[],a.assignments=[];var g=e.getClasses();0==g.length?b.get("/api/classrooms/byStudent").success(function(a){e.setClasses(a),f(e.getClasses())}).error(function(a){c.error(a)}):f(e.getClasses())}]),angular.module("fsaApp").config(["$routeProvider",function(a){a.when("/student/classroom/:classCode/assignment/:assignmentCode",{templateUrl:"app/student/classroom/assignment/assignment.html",controller:"StudentClassroomAssignmentCtrl"}).when("/student/practice/:subject/:topic?",{templateUrl:"app/student/practice/practice.html",controller:"StudentPracticeCtrl"}).when("/student/classroom/:classCode",{templateUrl:"app/student/classroom/classroom.html",controller:"StudentClassroomCtrl"}).when("/student",{templateUrl:"app/student/student.html",controller:"StudentCtrl"})}]),angular.module("fsaApp").controller("TeacherAddAssignmentCtrl",["$scope","$location","toastr","$http","classroomHelper",function(a,b,c,d,e){a.allTags=[],a.subjects=[],a.newAssignment={name:"",subject:{},topic:"",questionNumber:10},d.get("api/settings/byName/subjects").success(function(b){a.subjects=b.info.subjects,a.newAssignment.subject=a.subjects[0]}).error(function(a){c.error(a,{timeOut:1e3})}),d.get("api/questions/tags").success(function(b){a.topics=b}).error(function(a){c.error(a,{timeOut:1e3})}),a.updateTags=function(b){d.get("api/questions/tags/"+b.dbName).success(function(b){a.topics=b}).error(function(a){c.error(a,{timeOut:1e3})})},a.addAssignment=function(f){console.log("here is the assignment that is being created"),console.log(f),a.closeThisDialog(!1),d.post("/api/assignments/fromTeacher",f).success(function(a){console.log(a),e.setNewAssignment(f),b.path("/teacher/assignment/"+a.code)}).error(function(a){c.error(a,{timeOut:1e3})})}}]),angular.module("fsaApp").controller("TeacherAddClassCtrl",["$scope","$http","toastr",function(a,b,c){b.get("/api/settings/byName/subjects").success(function(b){console.log(b.info),a.subjects=b.info.subjects,a.newClassroom.subject=a.subjects[0].dbName}),a.addClass=function(d){if(d.studentString){d.unclaimedStudents=d.studentString.split(",");for(var e=0;e<d.unclaimedStudents.length;e++)d.unclaimedStudents[e]=d.unclaimedStudents[e].trim()}else d.unclaimedStudents=[];d.classAvg="N/A",delete d.studentString,b.post("api/classrooms/",d).success(function(b){a.closeThisDialog(b)}).error(function(a){c.error(a)})}}]),angular.module("fsaApp").controller("TeacherAdministerAssigmentCtrl",["$scope","toastr","$http",function(a,b,c){a.administerAssignment=function(d){c.post("/api/classrooms/assign",d).success(function(){a.closeThisDialog(),b.success("Successfully assigned "+d.assignment.name+" to "+d.classroom.name,{timeOut:3e3})}).error(function(a){b.error(a,{timeOut:1e3})})},a.administer={assignment:a.ngDialogData.assignment,dueDate:new Date(Date.now()+6048e5)},a.classrooms=a.ngDialogData.classrooms,a.dateOptions={formatYear:"yy",startingDay:1},a.opened=!1,a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0}}]),angular.module("fsaApp").controller("TeacherAssignmentCtrl",["$scope","ngDialog","$http","$location","$routeParams","toastr","classroomHelper","assignmentFilingCabinet","filterFilter","Auth",function(a,b,c,d,e,f,g,h,i,j){a.showAssignmentQuestions=!0,a.lim=5,a.currrentPage=1,a.maxPage=1,a.me="";var k=void 0;j.getCurrentUserAsync(function(b){b&&(a.me=b._id)}),a.page=function(b){var c=a.currentPage+b;1>c||c>a.maxPage||(a.currentPage=c)},a.setFiltered=function(){if(a.filteredAlternativeQuestions=a.alternativeQuestions,a.filteredAlternativeQuestions){var b=a.filteredAlternativeQuestions.length;b>0?a.maxPage=Math.ceil(b/a.lim):a.maxPage=1}},a.updateFiltered=function(){var b={};b.$=a.searchText,a.filteredAlternativeQuestions=i(a.alternativeQuestions,b)};var l=g.getNewAssignment();l?(a.newAssignment={name:l.name,subject:l.subject,topic:l.topic,questions:[]},l.questions&&(a.newAssignment=l.questions),k=angular.copy(l)):d.path("/teacher");var m="";void 0!=a.newAssignment.subject.dbName?m=a.newAssignment.subject.dbName:""!=a.subject&&(m=a.newAssignment.subject),c.get("/api/questions/bySubject/"+m).success(function(b){a.alternativeQuestions=b,a.setFiltered(),l.topic&&(a.searchText=l.topic,a.updateFiltered(),a.newAssignment.questions=a.filteredAlternativeQuestions.splice(0,l.questionNumber),n())}).error(function(a){f.error(a)}),a.$watch("filteredAlternativeQuestions",function(b){if(b){var c=b.length;c>0?a.maxPage=Math.ceil(c/a.lim):a.maxPage=1,a.currentPage=1}}),a.sides=["Left","Right"],a.questionTypes=[{name:"Multiple Choice",value:"mult"},{name:"Short Answer",value:"short"},{name:"Long Answer",value:"long"}],a.vote=function(b,d,e){a.me&&c.put("api/questions/vote/"+b._id,{type:d}).success(function(b){a.filteredAlternativeQuestions[e]=b}).error(function(a){f.error(a)})},a.delQuestion=function(b){if(!a.newAssignment.questions[b].isLocal){var c=void 0;c=a.filteredAlternativeQuestions.filter(function(c){return c._id==a.newAssignment.questions[b]._id})[0],void 0==c&&a.filteredAlternativeQuestions.push(a.newAssignment.questions[b])}a.newAssignment.questions.splice(b,1)},a.addQuestion=function(b){var c=b+(a.currentPage-1)*a.lim,d=void 0;d=a.newAssignment.questions.filter(function(b){return b._id==a.filteredAlternativeQuestions[c]._id})[0],void 0!==d?f.error("Question already added!",{timeOut:1e3}):(a.newAssignment.questions.push(a.filteredAlternativeQuestions[c]),a.filteredAlternativeQuestions.splice(c,1),n(),f.success("Question added!",{timeOut:1e3}))};var n=function(){for(var b=[],c=0;c<a.newAssignment.questions.length;c++)b.push(a.newAssignment.questions[c]._id);for(var d=a.alternativeQuestions.length-1;d>=0;d--)b.indexOf(a.alternativeQuestions[d]._id)>-1&&a.alternativeQuestions.splice(d,1)};a.confirmAssignment=function(b){var i=void 0;i=angular.copy(b),h.updateAssignment(i.code,i);for(var j={name:b.name,questions:[],subject:b.subject,topic:b.topic,tags:[]},k=0;k<b.questions.length;k++)j.questions.push(b.questions[k]._id),j.tags=j.tags.concat(b.questions[k].tags);a.me?c.put("/api/assignments/"+e.assignmentCode,j).success(function(a){console.log(a),g.setNewAssignment(void 0),d.path("/teacher")}).error(function(a){f.error(a,{timeOut:1e3})}):c.post("/api/assignments/nonUser",j).success(function(a){g.setNewAssignment(a),d.path("/teacher/sampleAssignment")}).error(function(a){f.error(a,{timeOut:1e3})})},a.cancelAssignment=function(){a.newAssignment=k,h.updateAssignment(k.code,k);h.getAssignment(k.code,k._id);d.path("/teacher")},a.addNew=function(){a.addingQuestion=!0},a.scrapNew=function(){a.newLocalQuestion={type:a.questionTypes[0].value,tagString:"",isLocal:!0,pointValue:1,body:"",subject:a.newAssignment.subject.dbName,explanation:{body:""},choices:[{body:"",correct:!1},{body:"",correct:!1},{body:"",correct:!1},{body:"",correct:!1}]},a.addingQuestion=!1},a.scrapNew(),a.getTags=function(a){if(!a.tagString)return[];for(var b=a.tagString.split(","),c=[],d=0;d<b.length;d++)b[d]=b[d].trim(),""!==b[d]&&c.push(b[d]);return c},a.saveNewQuestion=function(b){return b.tagString?(b.tags=a.getTags(b),b.topics=l.topic,console.log(b),void c.post("/api/questions/mine",b).success(function(b){a.newAssignment.questions.push(b),a.scrapNew()}).error(function(a){f.error(a)})):f.error("Please enter at least one tag.",{timeOut:1e3})},a.saveQuestion=function(b,d){if("mult"===b.type)for(var e=0;e<b.choices.length;e++)b.choices[e].correct=b.choices[e].tempCorrect;return b.tagString?(b.tags=a.getTags(b),b.topics=l.topic,void c.put("api/questions/mine/"+b._id,b).success(function(b){a.newAssignment.questions[d]=b,a.newAssignment.questions[d].editing=!1}).error(function(a){f.error(a)})):f.error("Please enter at least one tag.",{timeOut:1e3})}}]),angular.module("fsaApp").controller("TeacherClassroomAssignCtrl",["$scope","$http","toastr",function(a,b,c){a.types=["Exam","Homework","Quiz","Other"],a.opened=!1,a.classroom=a.ngDialogData.classroom,a.newAssignment={type:a.types[0]},a.addType=function(b){a.types.push(b),a.newAssignment.type=a.types[a.types.length-1],delete a.newAssignment.newType},a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.submitDate=function(c){c.preventDefault(),c.stopPropagation(),b.put("/api/settings/byName/accountTrackerDate",{info:{date:a.accountTrackerDate}}).error(function(a){console.error(a)}).success(function(a){console.log(a)})},a.dateOptions={formatYear:"yy",startingDay:1},b.get("api/assignments/byAuthor/").success(function(b){b.length>0&&(a.assignments=b)}).error(function(a){c.error(a)})}]),angular.module("fsaApp").controller("TeacherClassroomCtrl",["$scope","ngDialog","$http","toastr","$location","$routeParams","classroomHelper",function(a,b,c,d,e,f,g){a.gradebookView="students";var h=function(b){for(var c=0,d=0,e=0;e<a.classroom.assignments.length;e++)for(var f=0;f<a.classroom.assignments[e].submissions.length;f++)String(a.classroom.assignments[e].submissions[f].studentId)===String(b._id)&&(c+=a.classroom.assignments[e].submissions[f].score*a.classroom.assignments[e].pointsPossible,d+=a.classroom.assignments[e].pointsPossible);return d>0?c/d:"N/A"},i=function(b){a.classroom=b,a.messages=b.messages;for(var c=0;c<a.classroom.students.length;c++)a.classroom.students[c].average=h(a.classroom.students[c])},j=g.findTeacherClassroom(f.classCode);j?i(j):c.get("/api/classrooms/byTeacher/byCode/"+f.classCode).success(function(a){console.log(a),console.log(g.getTeacherClassrooms()),g.updateTeacherClassrooms(a),i(a)}).error(function(){e.path("teacher")});var k=!1;if(k&&c.get("/api/classrooms/byTeacher/tagAveragesForClass/"+f.classCode).success(function(b){a.tagInfo=b}).error(function(a){d.error(a,{timeOut:1e3})}),a.newMessage=void 0,a.goToTeacher=function(){e.path("teacher")},a.goToClass=function(){e.path("teacher/classroom/"+f.className)},a.checkIfToday=function(a){var b=new Date(Date.now()),c=new Date(a);return c.toDateString()===b.toDateString()},a.addMessage=function(){var b={message:a.newMessage,type:"message",date:new Date(Date.now())};a.newMessage&&c.post("/api/classrooms/message/"+a.classroom._id,b).success(function(b){b.isToday=a.checkIfToday(b.date),a.messages.push(b),a.newMessage=void 0,a.$broadcast("messages_updated")}).error(function(a){d.error(a)})},a.goToAssignment=function(b){e.path("teacher/classroom/"+encodeURI(a.classroom.name)+"/"+encodeURI(b))},f.assignmentName){a.currentAssignment={name:decodeURI(f.assignmentName)};for(var l=0;l<a.classroom.assignments.length;l++)a.classroom.assignments[l].name===a.currentAssignment.name&&(a.currentAssignment.dueDate=a.classroom.assignments[l].dueDate,a.currentAssignment.classAvg=a.classroom.assignments[l].classAvg);a.currentAssignment.classAvg||(a.currentAssignment.classAvg="75.4%")}if(f.assignmentName){a.currentAssignment={name:decodeURI(f.assignmentName)};for(var m=0;m<a.classroom.assignments.length;m++)a.classroom.assignments[m].name===a.currentAssignment.name&&(a.currentAssignment.dueDate=a.classroom.assignments[m].dueDate,a.currentAssignment.classAvg=a.classroom.assignments[m].classAvg)}a.assignToClass=function(){var c=b.open({template:"app/teacher/classroom/assignModal.html",controller:"TeacherClassroomAssignCtrl",data:{classroom:a.classroom}});c.closePromise.then(function(b){b.value&&a.classroom.assignments.push(b.value)})},a.openGradebook=function(b){e.path("teacher/gradebook/"+encodeURI(a.classroom.code)+"/"+encodeURI(b.assignmentId))}}]),angular.module("fsaApp").controller("GradebookCtrl",["$scope","classroomHelper","$http","$routeParams",function(a,b,c,d){a.students={},a.selectedStudent=null;var e={},f=function(){for(var b=a.classroom.students.length-1;b>=0;b--)e.student=a.classroom.students[b],a.students[e.student._id]={name:e.student.name},delete e.student;for(e.assignmentIndex=a.classroom.assignments.length-1;e.assignmentIndex>=0;e.assignmentIndex--)if(a.classroom.assignments[e.assignmentIndex].assignmentId===d.assignmentId){e.assignment=a.classroom.assignments[e.assignmentIndex],a.currentAssignment=e.assignment;for(var c=e.assignment.submissions.length-1;c>=0;c--)e.submission=e.assignment.submissions[c],e.student=a.students[e.submission.studentId],e.assignment.submissions[c].score&&(e.student.score=e.submission.score),e.student.submissionCode=e.submission.code,e.student.submissionFullyGraded=e.submission.fullyGraded,e.student.submissionId=e.submission._id,e.student.submssion=e.submission.submission,delete e.submission,delete e.student;delete e.assignment}},g=b.findTeacherClassroom(d.classCode);g?(a.classroom=g,f()):c.get("/api/classrooms/byTeacher/byCode/"+d.classCode).then(function(c){b.updateTeacherClassrooms(c.data),a.classroom=c.data,f()},function(b){a.serverError=b.data}),a.setSelectedStudent=function(b){a.selectedStudent=b}}]),angular.module("fsaApp").controller("TeacherSampleAssignmentCtrl",["$scope","ngDialog","toastr","$http","persist","$location",function(a,b,c,d,e,f){e.nonUserAssignment?(a.assignment=e.nonUserAssignment,delete e.nonUserAssignment):f.path("/"),a.saveUserEmail=function(b){d.put("/api/classrooms/addEmailByCode/"+a.assignment.classroom.code,{email:b.email}).success(function(b){d.put("/api/classrooms/setUpdate/"+b.code+"/"+a.assignment.classAssignment.code+"/1").success(function(){c.success("Successfully subscribed to updates for this assignment.",{timeOut:1e3})}).error(function(a){c.error(a,{timeOut:1e3})})}).error(function(a){c.error(a,{timeOut:1e3})})}}]),angular.module("fsaApp").controller("TeacherCtrl",["$scope","Auth","$http","ngDialog","toastr","$location","classroomHelper","assignmentFilingCabinet",function(a,b,c,d,e,f,g,h){a.newMessage=void 0,a.messages=[],a.classrooms=[],a.assignments=[];var i=function(b){a.classrooms=b;for(var c=[],d=0;d<b.length;d++)for(var e=0;e<b[d].messages.length;e++)"announcement"===b[d].messages[e].type&&-1===c.indexOf(b[d].messages[e].message)&&(a.messages.push(b[d].messages[e]),c.push(b[d].messages[e].message))},j=g.getTeacherClassrooms();j.length<=1?c.get("/api/classrooms/byTeacher").success(function(a){g.storeTeacherClassrooms(a),i(a)}).error(function(a){e.error(a)}):i(j);var k=g.getTeacherAssignments();0===k.length?c.get("/api/assignments/byAuthor").success(function(b){g.storeTeacherAssignments(b),a.assignments=b}).error(function(a){e.error(a)}):a.assignments=k,a.addMessage=function(){if(a.newMessage&&""!==a.newMessage){var b={message:a.newMessage,type:"announcement",date:new Date(Date.now())};c.post("/api/classrooms/announcement",b).success(function(b){b.isToday=a.checkIfToday(b.date),a.messages.push(b),a.newMessage=void 0,a.$broadcast("messages_updated")}).error(function(a){e.error(a)})}},a.checkIfToday=function(a){var b=new Date(Date.now()),c=new Date(a);return c.toDateString()===b.toDateString()},a.goToClass=function(a){f.path(encodeURI("teacher/classroom/"+a.code))},a.addClassModal=function(){var b=d.open({template:"app/teacher/addClassModal.html",scope:a,className:"mdModal",controller:"TeacherAddClassCtrl"});b.closePromise.then(function(a){})},a.addAssignmentModal=function(a){var b=d.open({template:"app/teacher/addAssignmentModal.html",controller:"TeacherAddAssignmentCtrl",className:"lgModal",data:{assignment:a}});b.closePromise.then(function(a){console.log("data passed when new assignment modal is closed"),console.log(a)})},a.assignAssignment=function(b){var c=d.open({template:"app/teacher/administerAssignmentModal.html",controller:"TeacherAdministerAssigmentCtrl",data:{classrooms:a.classrooms,assignment:b},className:"mdModal"});c.closePromise.then(function(a){console.log("data passed after assign modal is closed"),console.log(a),a.value&&"$document"!==a.value&&"$escape"!==a.value&&e.success("Assigment administered!",{timeOut:1e3})})},a.deleteClassroom=function(b,f){var g=d.open({template:"components/confirmModal/confirmModal.html",controller:"ConfirmModalCtrl",data:{title:"Confirm Deletion",body:"Are you sure you want to delete this classroom?"}});g.closePromise.then(function(b){b.value===!0&&c["delete"]("api/classrooms/"+classId).success(function(){a.classrooms.splice(f,1)}).error(function(a){e.error(a)})})},a.editAssignment=function(a){console.log(a);var b=void 0;b=h.getAssignment(a.code,a._id),b===!1?c.get("/api/assignments/"+a._id+"/withQuestions").then(function(a){b=a.data;var c=void 0;c=angular.copy(b),h.addAssignment(c.code,c),g.setNewAssignment(b),f.path("/teacher/assignment/"+b.code)}):(g.setNewAssignment(b),f.path("/teacher/assignment/"+b.code))},a.deleteAssignment=function(a){console.log(a)}}]),angular.module("fsaApp").config(["$routeProvider",function(a){a.when("/teacher/assignment/:assignmentCode",{templateUrl:"app/teacher/assignment/assignment.html",controller:"TeacherAssignmentCtrl"}).when("/teacher/classroom/:classCode",{templateUrl:"app/teacher/classroom/classroom.html",controller:"TeacherClassroomCtrl"}).when("/teacher/sampleAssignment",{templateUrl:"app/teacher/sample/sampleAssignment.html",controller:"TeacherSampleAssignmentCtrl"}).when("/teacher",{templateUrl:"app/teacher/teacher.html",controller:"TeacherCtrl"}).when("/teacher/gradebook/:classCode/:assignmentId",{templateUrl:"app/teacher/gradebook/gradebook.html",controller:"GradebookCtrl"})}]),angular.module("fsaApp").controller("TermsCtrl",["$scope",function(a){a.message="Hello"}]),angular.module("fsaApp").config(["$routeProvider",function(a){a.when("/terms",{templateUrl:"app/terms/terms.html",controller:"TermsCtrl"})}]),angular.module("fsaApp").controller("AcademicRoleModalCtrl",["$scope","$http","toastr","ngDialog",function(a,b,c,d){a.submitChoice=function(d){b.post("/api/users/setAcademicRole",{academicRole:d}).success(function(){a.closeThisDialog()}).error(function(a){c.error(a,{timeOut:1e3})})}}]),angular.module("fsaApp").controller("AccountUserCtrl",["$scope",function(a){}]),angular.module("fsaApp").controller("AccountCustomerCtrl",["$window","$scope","Auth","$http","usSpinnerService",function(a,b,c,d,e){b.allSubjects={},b.discountPerUser=0,b.premiumSubjects=[],b.freeSubjects=[],b.getMessageToUsers=function(){},b.edmodoShare=function(){var c="https://www.edmodo.com/bookmarklet?url=",d="https://omninox.org/signup/key/"+b.currentUser.email,e="Omninox - Automatically graded AP Practice Questions",f=c+encodeURIComponent(d)+"&title="+encodeURIComponent(e);a.location.href=f},b.googleShare=function(){var c="https://plus.google.com/share?url=",d="https://omninox.org/signup/key/"+b.currentUser.email;a.location.href=c+encodeURIComponent(d);
},b.emailShare=function(){var c="https://omninox.org/signup/key/"+b.currentUser.email,d="AP Practice Questions",e="Hey, I found this website with automatically graded, timed AP practice questions. You can also ask for help in the global chat room. Use my invitation key to join: "+c;a.location.href="mailto:?subject="+encodeURIComponent(d)+"&body="+encodeURIComponent(e)},b.twitterShare=function(){var c="https://omninox.org",e=c+"/signup/key/"+b.currentUser.email;d.post("/api/shares/twitter",{url:e}).success(function(b){if(!b)return void alert("Unable to generate a short link. Please try again later");var c="My invitation key for accessing online practice #APexams by @omninoxco "+b.data.url;console.log(c);var d="http://twitter.com/?status="+encodeURIComponent(c);a.location.href=d})},b.fbShare=function(){var c="http://www.facebook.com/share.php?u=",d="https://omninox.org/signup/key/"+b.currentUser.email;console.log(encodeURIComponent(d)),a.location.href=c+encodeURIComponent(d)},b.setDiscountPerUser=function(){1===b.currentUser.referral.connectionLevel?b.discountPerUser=25:b.discountPerUser=5},b.hasFree=function(a){if(!a.freeExams)return!1;var b=Object.keys(a.freeExams);return b.length>0?!0:void 0},c.isLoggedInAsync(function(a){a&&(b.currentUser=c.getCurrentUser(),b.fetchAllExams(),b.setDiscountPerUser())}),b.fetchAllExams=function(){return},b.score=function(a){return(a?a.toFixed(1):0)+"%"},b.attempts=function(a){return a?a:0},b.startSpin=function(a){e.spin(a)},b.stopSpin=function(a){e.stop(a)}}]),angular.module("fsaApp").controller("AddChatRoomCtrl",["$scope","$http","Auth","ngDialog",function(a,b,c,d){a.currentUser=c.getCurrentUser();var e=a.currentUser.email;a.addNewRoom=function(c,d){return a.hasNameError=!1,a.hasRoomTypeError=!1,"undefined"==typeof c?(a.hasNameError=!0,!1):"undefined"==typeof d?(a.hasRoomTypeError=!0,!1):void b.post("api/chatrooms",{name:c,createdBy:e,roomType:d,timestamp:Date.now()}).error(function(a){alert(JSON.stringify(a))})}}]),angular.module("fsaApp").controller("AddUserCtrl",["$scope","$http","User","ngDialog",function(a,b,c,d){a.addNewUser=function(a){b.post("api/users/customer",{email:a}).error(function(a){alert(JSON.stringify(a))})}}]),angular.module("fsaApp").controller("YouAreNotLoggedInCtrl",["$scope","ngDialog","$http","Auth","$location",function(a,b,c,d,e){a.exists=!1,c.post("/api/users/exists",{email:a.ngDialogData.email}).success(function(b){b===!0?a.exists=!0:b===!1?a.exists=!0:alert("An error has occurred")}),a.createCustomerAccount=function(){},a.login=function(){}}]),angular.module("fsaApp").factory("assignmentFilingCabinet",["$http",function(a){var b={},c={};return b.containsAssignment=function(a,b){return c[a]&&c[a][b]},b.addAssignment=function(a,b){c[a]||(c[a]={}),c[a][b._id]=b},b.updateAssignment=b.addAssignment,b.asyncAddAssignment=function(d,e,f){c[d]&&c[d][e]?f(null,c[d][e]):a.get("/api/assignments/"+e+"/withQuestions").then(function(a){b.addAssignment(d,a.data),f(null,a.data)},function(a){f(a.data,null)})},b.asyncUpdateAssignment=function(c,d,e){a.get("/api/assignments/"+d+"/withQuestions").then(function(a){b.addAssignment(c,a.data),e(null,a.data)},function(a){e(a.data,null)})},b.getAssignment=function(a,b){return c[a]&&c[a][b]?c[a][b]:!1},b.asyncGetAssignment=b.asyncAddAssignment,b.getAllAssignmentsForClass=function(a){for(var b=[],d=Object.keys(c[a]),e=b.length-1;e>=0;e--)b.push(c[a][d[e]]);return b},b}]),angular.module("fsaApp").factory("Auth",["$location","$rootScope","$http","User","toastr","$cookieStore","$q",function(a,b,c,d,e,f,g){var h={};return f.get("token")&&(h=d.get(function(a){a.name!==b.userName&&(b.userName=a.name)})),{login:function(a,e){var i=e||angular.noop,j=g.defer();return c.post("/auth/local",{email:a.email,password:a.password}).success(function(a){return f.put("token",a.token),h=d.get(function(a){b.userName=a.name,console.log("set username to "+h.name)}),j.resolve(a),i()}).error(function(a){return this.logout(),j.reject(a),i(a)}.bind(this)),j.promise},logout:function(){f.remove("token"),b.userName=void 0,h={},e.clear(),delete b.initialized},createUser:function(a,b){var c=b||angular.noop;return d.save(a,function(b){return f.put("token",b.token),h=d.get(),c(a)},function(a){return this.logout(),c(a)}.bind(this)).$promise},createUserFromKey:function(a,b){var c=b||angular.noop,e=a;return a.referral={referrer:a.key},d.save(e,function(b){return f.put("token",b.token),h=d.get(),c(a)},function(a){return this.logout(),c(a)}.bind(this)).$promise},changePassword:function(a,b,c){var e=c||angular.noop;return d.changePassword({id:h._id},{oldPassword:a,newPassword:b},function(a){return e(a)},function(a){return e(a)}).$promise},addSubjects:function(a,b){var c=b||angular.noop;return d.addSubjects({id:h._id},{subjects:a},function(a){return c(a)},function(a){return c(a)}).$promise},getCurrentUser:function(){return h},isLoggedIn:function(){return h.hasOwnProperty("role")},isLoggedInAsync:function(a){h.hasOwnProperty("$promise")?h.$promise.then(function(){a(!0)})["catch"](function(){a(!1)}):a(h.hasOwnProperty("role")?!0:!1)},getCurrentUserAsync:function(a){h.hasOwnProperty("$promise")?h.$promise.then(function(){a(h)})["catch"](function(){a(!1)}):a(h.hasOwnProperty("role")?h:!1)},is:function(a,b){if(b=b||angular.noop,h.hasOwnProperty("$promise"))h.$promise.then(function(){return b(h.role===a||h.academicRole===a?!0:!1)})["catch"](function(){return b(!1)});else if(h.hasOwnProperty("role"))return b(h.role===a||h.academicRole===a?!0:!1)},isAdmin:function(){return"admin"===h.role},isTeacher:function(){return"Teacher"===h.academicRole},isStudent:function(){return"Student"===h.academicRole},getToken:function(){return f.get("token")},forgot:function(a){var b=g.defer();return c.post("/api/forgot-password/generateToken",{email:a}).success(function(a){b.resolve(a)}).error(function(a){b.reject(a)}.bind(this)),b.promise},requestBeta:function(a,b){var d=b||angular.noop,e=g.defer();return c.post("/api/emails/request",{email:a.email,role:a.role}).success(function(a){return d()}).error(function(a){return d(a)}.bind(this)),e.promise},resetPassword:function(a,b){var d=g.defer();return c.post("/api/forgot-password/resetPassword",{token:a,newPassword:b}).success(function(a){d.resolve(a)}).error(function(a){d.reject(a)}.bind(this)),d.promise},changeInfo:function(a,b){var c=b||angular.noop;return d.updateInfo({id:h._id},a,function(a){return c(!1,a)},function(a){return c(a)}).$promise},getBetaKey:function(a,b){var d=b||angular.noop,e=g.defer(),f="/api/betaKeys/"+a;return c.get(f).success(function(a){return d(a)}).error(function(){return d("Error")}.bind(this)),e.promise},addNewSurvey:function(a,b){var d=b||angular.noop,e=g.defer();return c.post("/api/surveys",a).success(function(){return d()}).error(function(a){return d(a)}.bind(this)),e.promise},addNewBetaKey:function(a,b){var d=b||angular.noop,e=g.defer();return c.post("/api/betaKeys",a).success(function(){return d()}).error(function(a){return d(a)}.bind(this)),e.promise},validateBetaKey:function(a,b){var d=b||angular.noop,e=g.defer(),h="/api/betaKeys/validate/"+a;return c.get(h).success(function(a){return f.put("betaKey",a),d()}).error(function(a){return d(a)}.bind(this)),e.promise}}}]),angular.module("fsaApp").factory("User",["$resource",function(a){return a("/api/users/:id/:controller",{id:"@_id"},{changeRole:{method:"PUT",params:{controller:"role"}},changePassword:{method:"PUT",params:{controller:"password"}},updateInfo:{method:"PUT",params:{controller:"update"}},addSubjects:{method:"PUT",params:{controller:"subject"}},get:{method:"GET",params:{id:"me"}}})}]),angular.module("fsaApp").directive("autoFillFix",function(){return{restrict:"A",priority:-10,link:function(a,b){b.on("submit",function(){b.find("input, textarea, select").trigger("input").trigger("change").trigger("keydown")})}}}),angular.module("fsaApp").controller("CcformCtrl",["$scope","$http","Auth","ngDialog","$window","usSpinnerService",function(a,b,c,d,e,f){a.cardProcessing=!1;var g;b.get("/api/tokens").success(function(a){g=new braintree.api.Client({clientToken:a})}),a.ccform={expirationDate:{monthsInYear:["01","02","03","04","05","06","07","08","09","10","11","12"],yearsOnCards:[]},cardType:{visa:{deselected:!1},mastercard:{deselected:!1},discover:{deselected:!1},jcb:{deselected:!1},amex:{deselected:!1}},validationMessages:{}},a.ccform.cardNumber="";var h=function(d){g.tokenizeCard({number:d.cardNumber,expirationMonth:d.expirationDate.expirationMonth,expirationYear:d.expirationDate.expirationYear,cvv:d.cvv,billingAddress:{postalCode:d.zipCode}},function(d,f){if(d)return void alert("There was an error processing your card. Braintree says: "+d);for(var g=[],h=0;h<a.subjects.length;h++){var i=a.subjects[h];"selected"===i.currentClass&&g.push(i.databaseName)}var j={nonceForServer:f,saleAmount:a.total,email:a.ccform.emailAddress,name:a.ccform.fullName,subjects:g};b.post("/api/tokens/card",j).success(function(b){200!=b?(a.stopSpin("spinner-1"),a.ccform.validationMessages.cardWarning=b,a.cardProcessing=!1):c.addSubjects(g,function(b){a.stopSpin("spinner-1"),e.location.href="/account",a.closeThisDialog()})})})},i=function(){for(var b=(new Date).getFullYear(),c=b+15,d=b;c>=d;d++)a.ccform.expirationDate.yearsOnCards.push(d)};i();var j=function(b){var c=a.ccform.cardType;for(var d in c)c.hasOwnProperty(d)&&(c[d].deselected=!0);for(var e=0;e<b.length;e++){var f=b[e];c.hasOwnProperty(f)&&(c[f].deselected=!1)}};a.validateCard=function(){var b=["visa","mastercard","jcb","amex","discover"];a.ccform.validationMessages.cardRegex="";var c=a.ccform.cardNumber[0],d=a.ccform.cardNumber[1];switch(c){case"4":b=["visa"];break;case"5":b=["mastercard"];break;case"6":b=["discover"];break;case"3":b=d?4==d||7==d?["amex"]:["jcb"]:["jcb","amex"];break;case"":case null:case void 0:break;default:a.ccform.validationMessages.cardRegex="Please enter a valid Credit Card Number"}j(b);var e=a.ccform.cardNumber,f=(a.ccform.cardNumber.length,e.replace(/ /g,""));if(a.ccform.cardType.amex.deselected===!1)switch(f.length/5){case 1:a.ccform.cardNumber=f.substring(0,4)+" "+f[4];break;case 2:a.ccform.cardNumber=f.substring(0,4)+" "+f.substring(4)+" ";break;case 3:a.ccform.cardNumber=f.substring(0,4)+" "+f.substring(4,10)+" "+f.substring(10);break;case 3.2:var g=a.ccform.cardNumber.substring(0,17);a.ccform.cardNumber=g}else switch(f.length/4){case 1:a.ccform.cardNumber=f.substring(0,4)+" ";break;case 2:a.ccform.cardNumber=f.substring(0,4)+" "+f.substring(4,8)+" ";break;case 3:a.ccform.cardNumber=f.substring(0,4)+" "+f.substring(4,8)+" "+f.substring(8,12)+" ";break;case 4:a.ccform.cardNumber=f.substring(0,4)+" "+f.substring(4,8)+" "+f.substring(8,12)+" "+f.substring(12);break;case 4.25:var g=a.ccform.cardNumber.substring(0,19);a.ccform.cardNumber=g}},a.formatCVV=function(){a.ccform.validationMessages.invalidCVV="",a.ccform.cvv&&isNaN(Number(a.ccform.cvv))&&(a.ccform.validationMessages.invalidCVV="Please enter a valid CVV"),a.ccform.cardType.amex.deselected===!0&&4===a.ccform.cvv.length&&(a.ccform.validationMessages.invalidCVV="Warning: Check to make sure you have entered your CVV correctly")},a.isValid=function(){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,c=/^(3088|3096|3112|3158|3337|352|353|354|355|356|357|358)\d{0,1}\s\d{4}\s\d{4}\s\d{4}/,d=/^(4)\d{3}\s\d{4}\s\d{4}\s\d{4}/,e=/^(5)\d{3}\s\d{4}\s\d{4}\s\d{4}/,f=/^(6)\d{3}\s\d{4}\s\d{4}\s\d{4}/,g=/^(34|37)\d{2}\s\d{6}\s\d{5}/,i=a.ccform,j=i.validationMessages,k=i.cardNumber;8!==Object.keys(i).length?j.formValidation="- Please fill out all of the fields":j.formValidation="",i.fullName.length<5?j.nameValidation="- Please enter your name as it appears on your card":j.nameValidation="",b.test(i.emailAddress)?j.emailValidation="":j.emailValidation="- Please enter a valid email address to send your receipt to",c.test(k)||d.test(k)||f.test(k)||e.test(k)||g.test(k)?j.cardRegex="":j.cardRegex="- Please enter a valid credit card number",i.zipCode?j.invalidZip="":j.invalidZip="- Please enter a valid zip code for card verification",i.cvv?j.invalidCVV="":j.invalidCVV="- Please enter a valid CVV for card verification";var l=0,m=i.validationMessages;for(var n in m)if(m.hasOwnProperty(n)){if(""===m[n]||null===m[n]||void 0===m[n]||"cardWarning"===n)continue;l++}0===l&&(a.cardProcessing=!0,a.startSpin("spinner-1"),h(a.ccform))},a.startSpin=function(a){f.spin(a)},a.stopSpin=function(a){f.stop(a)}}]),angular.module("fsaApp").controller("ChatCtrl",["$rootScope","$scope","$http","socket","Auth","$location","$timeout","$cookieStore","SubjectNames",function(a,b,c,d,e,f,g,h,i){b.glued=!0,b.blocked=!0,b.blockedPerm=!1,b.tabs=[],b.moreTabs=[],b.awesomeChats=[],b.currentUser=e.getCurrentUser(),b.freeUserMsg="You must have purchased a practice exam set to access this room",b.blockedUserMsgTemp="You have been temporarily blocked and your messages will not appear to other users until you log out and log back in again because of the following message:",b.blockedUserMsgPerm="You have been Permanently blocked and your messages will not appear to other users because of the following message:",b.blockedUsers=[],b.blockedMessages=[],b.sessionBlockedUsers=[],b.usersData=[],a.scrolledInitialized=[],a.scrolledRooms=[],a.earlierRoom=null,b.subjectNames=i;var j,k=b.currentUser.email,l=b.currentUser.name,m=e.isAdmin(),n="Omninox Global Chat";b.title=n,b.$watch("Auth",function(){k=b.currentUser.email,l=b.currentUser.name,m=e.isAdmin()}),b.chatNotAllowed=function(){return"/settings"!=f.path()&&"/account"!=f.path()&&"/admin"!=f.path()&&"/teacher"!=f.path()&&!/^\/account\/(?:([^\/]+))\/(?:([^\/]+))\/(?:([^\/]+))$/.test(f.path())},b.fetchAllRooms=function(){b.tabs.length=0,b.moreTabs.length=0,c.get("/api/chatrooms").success(function(a){if(a.length){for(var c=0;c<(a.length<=2?a.length:2);++c)b.tabs.push(a[c]);if(a.length>2&&a.length<=3)b.moreTabs.push(a[2]),b.roomNameMore=a[2].name;else{b.roomNameMore="More";for(var c=2;c<a.length;++c)b.moreTabs.push(a[c])}b.roomID=b.tabs[0]._id,b.roomName=b.tabs[0].name,b.roomType=b.tabs[0].roomType}})},b.chatNotAllowed()&&(a.showChatBox=!1),b.checkBlockedUsers=function(){"undefined"!=typeof k&&c.get("/api/blockusers/get/"+k).success(function(a){if(a.length>0){b.blockedUsers=a;for(var d=0;d<a.length;++d){var e=a[d];e.email==k&&1==e.type?(b.blocked=!0,c.get("/api/chatarchives/"+e.message).success(function(a){b.blockedMessages.push({name:a.name,message:a.message})})):e.email==k&&2==e.type?(b.blocked=!0,b.blockedPerm=!0,b.awesomeChats.length=0,b.blockedUsers.length=0,b.blockedMessages.length=0,c.get("/api/chatarchives/"+e.message).success(function(a){b.blockedMessages.push({name:a.name,message:a.message})})):b.blocked=!1}}else b.blocked=!1})},m?b.blocked=!1:b.checkBlockedUsers();var o=function(){b.awesomeChats.length>29&&b.awesomeChats.shift()},p=function(a){for(var c=0;c<b.awesomeChats.length;++c)if("undefined"!=typeof b.awesomeChats[c].notification&&a.user._id==b.awesomeChats[c].user._id){var d=b.awesomeChats.filter(function(b){return"undefined"!=typeof b.notification?b.user._id==a.user._id:void 0});d.length>1&&b.awesomeChats.splice(c,1),"undefined"!=typeof b.awesomeChats[c].notification.examOver&&b.awesomeChats[c].notification.examOver&&(delete a.user._id,delete b.awesomeChats[c].user._id)}},q=function(a){for(var c=0;c<b.awesomeChats.length;++c)"undefined"!=typeof b.awesomeChats[c].notification&&a.user._id==b.awesomeChats[c].user._id&&b.awesomeChats.splice(c,1)};b.syncNotificationUpdates=function(){d.syncUpdates("exam",b.awesomeChats,function(a,c){"notificationCreated"===a&&(b.awesomeChats.push(c),p(c)),"notificationDeleted"===a&&q(c),o()})},b.$on("$routeChangeSuccess",function(){b.syncNotificationUpdates()}),e.isLoggedInAsync(function(f){f&&(h.get("token")?(b.chatNotAllowed()?a.showChatBox=!1:(b.blocked=!1,b.currentUser=e.getCurrentUser(),k=b.currentUser.email,l=b.currentUser.name,m=e.isAdmin(),"undefined"!=typeof k&&(b.fetchAllRooms(),a.showChatBox=!0,"undefined"!=typeof a.initialized&&0!=a.initialized||(c.get("/api/chatmessages/").success(function(c){if("premium"==b.roomType&&"user"==b.currentUser.role);else{var e=[];b.awesomeChats=c;for(var f=b.awesomeChats.length-1;f>=0;--f)b.awesomeChats[f].isOldMsg=!0,e.indexOf(b.awesomeChats[f].roomID)<0&&(b.awesomeChats[f].older=!0,e.push(b.awesomeChats[f].roomID))}d.syncUpdates("chatmessage",b.awesomeChats,function(c,d){for(var e,f=0;f<b.tabs.length;++f)b.tabs[f]._id===d.roomID&&(e=b.tabs[f].roomType);if("created"===c){var h=angular.element("[scrollable=true]");h.each(function(c,e){angular.element(e).bind("scroll",function(){b.userScrolled(b.roomID)}),angular.element(e).attr("room")===b.roomID&&a.scrolledRooms.indexOf(b.roomID)<0?e.scrollTop=e.scrollHeight:angular.element(e).attr("room")===b.roomID&&a.scrolledRooms.indexOf(b.roomID)>-1&&k==d.email&&(e.scrollTop=e.scrollHeight,a.scrolledRooms.splice(a.scrolledRooms.indexOf(b.roomID),1))}),"premium"==e&&"user"==b.currentUser.role||(b.title=b.popChatUser(d)+" : "+d.message,"undefined"!=typeof b.idleTimeout&&g.cancel(b.idleTimeout),b.idleTimeout=g(function(){b.title=n,g.cancel(b.idleTimeout)},3e3))}o()})}),b.syncNotificationUpdates(),a.initialized=!0))),h.get("sessionBlockedUsers")&&(b.sessionBlockedUsers=h.get("sessionBlockedUsers"))):(b.chatNotAllowed(),h.remove("sessionBlockedUsers"),h.remove("chatVisible"),b.sessionBlockedUsers.length=0))}),a.$on("$routeChangeStart",function(){e.isLoggedInAsync(function(f){f?b.chatNotAllowed()?a.showChatBox=!1:(b.blocked=!1,b.currentUser=e.getCurrentUser(),k=b.currentUser.email,l=b.currentUser.name,m=e.isAdmin(),"undefined"!=typeof k&&b.fetchAllRooms(),h.remove("sessionBlockedUsers"),b.sessionBlockedUsers.length=0,b.checkBlockedUsers(),a.showChatBox=!0,"undefined"!=typeof a.initialized&&0!=a.initialized||(c.get("/api/chatmessages/").success(function(c){if("premium"==b.roomType&&"user"==b.currentUser.role);else{var e=[];b.awesomeChats=c;for(var f=b.awesomeChats.length-1;f>=0;--f)b.awesomeChats[f].isOldMsg=!0,e.indexOf(b.awesomeChats[f].roomID)<0&&(b.awesomeChats[f].older=!0,e.push(b.awesomeChats[f].roomID))}d.syncUpdates("chatmessage",b.awesomeChats,function(c,d){for(var e,f=0;f<b.tabs.length;++f)b.tabs[f]._id===d.roomID&&(e=b.tabs[f].roomType);if("created"===c){var h=angular.element("[scrollable=true]");h.each(function(c,e){angular.element(e).bind("scroll",function(){b.userScrolled(b.roomID)}),angular.element(e).attr("room")===b.roomID&&a.scrolledRooms.indexOf(b.roomID)<0?e.scrollTop=e.scrollHeight:angular.element(e).attr("room")===b.roomID&&a.scrolledRooms.indexOf(b.roomID)>-1&&k==d.email&&(e.scrollTop=e.scrollHeight,a.scrolledRooms.splice(a.scrolledRooms.indexOf(b.roomID),1))}),"premium"==e&&"user"==b.currentUser.role||(b.title=b.popChatUser(d)+" : "+d.message,"undefined"!=typeof b.idleTimeout&&g.cancel(b.idleTimeout),b.idleTimeout=g(function(){b.title=n,g.cancel(b.idleTimeout)},3e3))}o()})}),b.syncNotificationUpdates(),a.initialized=!0)):(b.blockedPerm?(b.awesomeChats.length=0,b.blockedUsers.length=0,b.blockedMessages.length=0):(b.newChat="",b.awesomeChats.length=0,b.blockedUsers.length=0,b.blockedMessages.length=0,h.remove("sessionBlockedUsers"),h.remove("chatVisible"),b.sessionBlockedUsers.length=0,m||"undefined"==typeof k||c.get("/api/blockusers/get/"+k).success(function(a){if(a.length>0)for(var b=0;b<a.length;++b){var d=a[b];d.email==k&&1==d.type&&(c["delete"]("/api/blockusers/"+d._id),c["delete"]("/api/chatmessages/email/"+d.email))}})),a.showChatBox=!1,b.chatNotAllowed())})}),d.syncUpdates("user",b.usersData,function(a,c){for(var d=0;d<b.awesomeChats.length;++d)b.awesomeChats[d].email==c.email&&(b.awesomeChats[d].omnipoints=u(c.omnipoints,1))}),d.syncUpdates("blockuser",b.blockedUsers,function(a){if("created"==a&&!m)for(var d=0;d<b.blockedUsers.length;++d)b.blockedUsers[d].email==k&&(b.awesomeChats.length=0,b.blocked=!0,2==b.blockedUsers[d].type&&(b.blockedPerm=!0),c.get("/api/chatarchives/"+b.blockedUsers[d].message).success(function(a){for(var c=0;c<b.blockedUsers.length;++c)b.blockedMessages.id==a._id&&b.blockedMessages.splice(c,1),b.blockedMessages.push({id:a._id,name:a.name,message:a.message})}))}),d.syncUpdates("chatrooms",b.tabs,function(a,c){if("created"===a)3==b.tabs.length&&0==b.moreTabs.length?(b.moreTabs.push(c),b.tabs.splice(-1,1),b.roomNameMore=c.name):b.moreTabs.length>0&&(b.tabs.roomNameMore="More",b.moreTabs.push(c),b.tabs.splice(-1,1));else if("deleted"===a){for(var d=0;d<b.tabs.length;++d)b.tabs[d]._id===c._id&&b.tabs.splice(d,1);for(var d=0;d<b.moreTabs.length;++d)b.moreTabs[d]._id===c._id&&b.moreTabs.splice(d,1)}});var r=0,s=!1,t=function(){return s?6>r?(r++,!0):!1:(g(function(){r=0,s=!1},3e3),r++,s=!0,!0)};b.addChat=function(){if(!b.blocked){if(""===b.newChat||"undefined"==typeof b.newChat)return;if(!t())return;j=!e.isAdmin();var a={email:k,name:l,message:b.newChat,sentByUser:j,roomID:b.roomID,awardedFrom:"message",points:1,userID:b.currentUser._id};c.post("/api/chatarchives",a)}b.newChat=""},b.$on("$destroy",function(){/^\/account\/(?:([^\/]+))\/(?:([^\/]+))\/(?:([^\/]+))$/.test(f.path())||"/settings"==f.path()||"/admin"==f.path()||"/teacher"==f.path()||(d.unsyncUpdates("chatmessage"),d.unsyncUpdates("blockuser"),d.unsyncUpdates("exam"))}),b.selectRoom=function(a){b.roomID=a._id,b.roomName=a.name,b.roomType=a.roomType},b.selectMoreRoom=function(c){b.roomID=c._id,b.roomName=c.name,b.roomNameMore=c.name,b.roomType=c.roomType,a.earlierRoom=c},b.selectEarlierRoom=function(c){null!=a.earlierRoom?(c=a.earlierRoom,b.roomID=c._id,b.roomName=c.name,b.roomNameMore=c.name,b.roomType=c.roomType):b.selectMoreRoom(b.moreTabs[0])},b.blockUser=function(a){b.sessionBlockedUsers.push(a),h.put("sessionBlockedUsers",b.sessionBlockedUsers)},b.upVote=function(a){var d=10,e=!0;(a.upvoted||a.downvoted)&&(e=!1);for(var f=0;f<b.awesomeChats.length;++f)b.awesomeChats[f].email==a.email&&a._id==b.awesomeChats[f]._id&&(b.awesomeChats[f].downvoted=!1,b.awesomeChats[f].upvoted=e);c.post("/api/omnipoints/",{chatId:a._id,email:a.email,points:d,awardedFrom:"upvote",downvoted:a.downvoted})},b.downVote=function(a){var d=-10,e=!0;(a.downvoted||a.upvoted)&&(e=!1);for(var f=0;f<b.awesomeChats.length;++f)b.awesomeChats[f].email==a.email&&a._id==b.awesomeChats[f]._id&&(b.awesomeChats[f].upvoted=!1,b.awesomeChats[f].downvoted=e);c.post("/api/omnipoints/",{chatId:a._id,email:a.email,points:d,awardedFrom:"downvote",type:1,message:a.archive_id,name:a.name})},b.showVotingMenu=function(a){return a.isHover=!a.isHover},b.isBlocked=function(a){for(var c=0;c<b.blockedUsers.length;++c)if(b.blockedUsers[c].email==a)return!0;return b.sessionBlockedUsers.indexOf(a)>-1},b.showUpVote=function(a){return a.hasOwnProperty("votes")?!(!a.isHover||b.currentUser.email==a.email||!a.sentByUser||"undefined"==typeof a.votes[b.currentUser._id]):!(!a.isHover||b.currentUser.email==a.email||!a.sentByUser)},b.upVotePicked=function(a){return a.hasOwnProperty("votes")?!(!a.isHover||b.currentUser.email==a.email||!a.sentByUser||"undefined"==typeof a.votes[b.currentUser._id]||"upvote"===a.votes[b.currentUser._id]):!(!a.isHover||b.currentUser.email==a.email||!a.sentByUser)},b.showDownVote=function(a){return a.hasOwnProperty("votes")?!(!a.isHover||b.currentUser.email==a.email||!a.sentByUser||"undefined"==typeof a.votes[b.currentUser._id]):!(!a.isHover||b.currentUser.email==a.email||!a.sentByUser)},b.downVotePicked=function(a){return a.hasOwnProperty("votes")?!(!a.isHover||b.currentUser.email==a.email||!a.sentByUser||"undefined"==typeof a.votes[b.currentUser._id]||"downvote"===a.votes[b.currentUser._id]):!(!a.isHover||b.currentUser.email==a.email||!a.sentByUser)},b.showBan=function(a){return a.isHover&&b.currentUser.email!=a.email&&a.sentByUser},b.showChats=function(a){return b.roomID===a.roomID&&!b.isBlocked(a.email)&&("premium"!==b.roomType&&"user"!=b.currentUser.role||"premium"==b.roomType&&"user"!=b.currentUser.role||"free"==b.roomType)||a.notification},b.chatUser=function(a){var c=function(){return"undefined"==typeof a.omnipoints||0===a.omnipoints}();return b.currentUser.email===a.email?a.sentByUser?c?"Me":"Me ("+a.omnipoints+")":"Me":a.sentByUser?a.name.split(" ").length>1?c?a.name.split(" ")[0]+" "+a.name.split(" ")[1].substr(0,1)+".":a.name.split(" ")[0]+" "+a.name.split(" ")[1].substr(0,1)+". ("+a.omnipoints+")":c?a.name:a.name+" ("+a.omnipoints+")":a.name.split(" ").length>1?a.name.split(" ")[0]+" "+a.name.split(" ")[1].substr(0,1)+".":a.name},b.popChatUser=function(a){return b.currentUser.email!==a.email?a.sentByUser?a.name.split(" ").length>1?a.name.split(" ")[0]+" "+a.name.split(" ")[1].substr(0,1)+". ":a.name+" ":a.name.split(" ").length>1?a.name.split(" ")[0]+" "+a.name.split(" ")[1].substr(0,1)+".":a.name:a.sentByUser?"Me":void 0},b.chatMessage=function(a){return"user"===b.currentUser.role?b.freeUserMsg:a.message},b.upVotes=function(a){return b.roomID===a.roomID&&!b.isBlocked(a.email)&&b.currentUser.email!=a.email},b.showAdminChat=function(){return"premium"===b.roomType&&"user"===b.currentUser.role},b.hideChatBox=function(){return b.tabs.length<=0||0==b.showChatBox},b.hideNewChats=function(){return b.tabs.length<=0||"premium"==b.roomType&&"user"===b.currentUser.role||b.blocked},b.chatboxIsVisible=function(){return"undefined"!=typeof h.get("chatVisible")?!!h.get("chatVisible"):!1},b.setChatBoxInvisible=function(){h.put("chatVisible",!1)},b.setChatBoxVisible=function(){h.put("chatVisible",!0)},b.userScrolled=function(b){a.scrolledRooms.indexOf(b)<0&&a.scrolledRooms.push(b)},b.wishGoodLuck=function(a){c.post("/api/exams/wish-goodluck",{data:{to:a.user._id,exam:a.exam}}).success(function(c){for(var d=0;d<b.awesomeChats.length;++d)a._id===b.awesomeChats[d]._id&&(b.awesomeChats[d].wished=!0,function(a){g(function(){for(var c=0;c<b.awesomeChats.length;++c)a._id===b.awesomeChats[c]._id&&b.awesomeChats.splice(c,1)},3e3)}(a))})};var u=function(a){var b=a;if(a>=1e3){for(var c=["","K","M","B","T"],d=Math.floor((""+a).length/3),e="",f=2;f>=1;f--){e=parseFloat((0!=d?a/Math.pow(1e3,d):a).toPrecision(f));var g=(e+"").replace(/[^a-zA-Z 0-9]+/g,"");if(g.length<=2)break}if(e%1!=0){e.toFixed(1)}b=e+c[d]}return b}}]),angular.module("fsaApp").filter("chat",["roomName",function(a){return function(a){for(var b=0;b<a.length;b++)console.log(a[i])}}]),angular.module("fsaApp").factory("classroomHelper",function(){var a,b={},c=[],d=[],e=[],f=function(a){for(var b=0;b<c.length;b++)if(c[b].code===a)return!0;return!1};return b.setClasses=function(a){var b;c=[];for(var d=0;d<a.length;d++)b={},b.subject=a[d].subject,b.code=a[d].code,b.name=a[d].name,b.assignments=a[d].assignments,b.messages=a[d].messages,b.students=a[d].students,a[d].peerGrades&&(b.peerGrades=a[d].peerGrades),c.push(b)},b.findMatchingClassroom=function(a){for(var b=0;b<c.length;b++)if(c[b].code===a)return c[b];return!1},b.addNewClass=function(a){if(f(a.code))return!1;var b={};return b.subject=a.subject,b.code=a.code,b.name=a.name,b.assignments=a.assignments,b.messages=a.messages,b.students=a.students,a.peerGrades&&(b.peerGrades=a.peerGrades),c.push(b),!0},b.findMatchingAssignment=function(a,b){var c=this.findMatchingClassroom(a);if(c===!1)return!1;for(var d=0;d<c.assignments.length;d++)if(c.assignments[d].assignmentId===b)return console.log("matching assignment found!"),c.assignments[d];return!1},b.updateClassroom=function(a){for(var b=0;b<c.length;b++)if(c[b].code===a.code)return c.splice(b,1),void this.addNewClass(a)},b.getClasses=function(){return c},b.getTeacherAssignments=function(){return d},b.getTeacherClassrooms=function(){return e},b.storeTeacherAssignments=function(a){d=a,console.log(a)},b.storeTeacherClassrooms=function(a){e=a},b.findTeacherClassroom=function(a){for(var b,c=0;c<e.length;c++)if(b=e[c],b.code===a)return 0!==b.students.length&&"object"==typeof b.students[0]?(console.log("found matched classroom"),console.log(b),b):!1;return!1},b.updateTeacherClassrooms=function(a){for(var b,c=0;c<e.length;c++)if(b=e[c],b.code===a.code)return b.students=a.students,e[c]=b,!0;return e.push(a),!0},b.setNewAssignment=function(b){console.log(b),a=b},b.getNewAssignment=function(){return a},b}),angular.module("fsaApp").controller("ConfirmModalComponentCtrl",["$scope",function(a){a.modalData=a.ngDialogData,a.ngDialogData&&(a.message=a.ngDialogData.message),a.confirm=function(){a.closeThisDialog(!0)},a.refute=function(){a.closeThisDialog(!1)}}]),angular.module("fsaApp").controller("ExamPageCtrl",["$scope","$http","$window","$routeParams","ngDialog","Auth","$location","$rootScope","$timeout","toastr","socket",function(a,b,c,d,e,f,g,h,i,j,k){function l(b){var d;a.preExam||a.examSubmit?m():(d=c.confirm("Throw away your progress?"),b&&!d?b.preventDefault():(a.showNotifications=!0,m()))}a.showNotifications=!0;var m=function(){b.get("api/exams/notifications/remove")},n=function(){a.showNotifications=!1};a.notifications=[],k.syncUpdates("exam",a.notifications,function(b,c){if("exam"===c.notification["for"]&&a.showNotifications&&c.to===a.currentUser._id){s++;var d='<div class="toastmsg  avenir-light">'+c.user.name+" wishes you good luck on your exam!</div>",e=j.info('<div class="toastmsg top-margin-msg avenir-light"><small class="text-smaller pull-right">Tap to mute notifications</small></div>',d,{allowHtml:!0,autoDismiss:!0,onShown:function(){i(function(){j.clear(e)},5e3)},closeButton:!0,iconClass:"custom-smiley",onHidden:function(a){a&&n()}})}}),a.getDate=function(a){var b=new Date(a);return b.toLocaleDateString()},a.getTime=function(a){var b=new Date(a);return b.toLocaleTimeString()},a.$on("$locationChangeStart",l),a.quizSet=[],a.currentUser=f.getCurrentUser(),a.subject=d.subjectname,a.examPart=[],a.exam=[],a.examNumber=parseInt(d.examnumber),a.sectionNumber=parseInt(d.section),a.partNumber=1,a.preExam=!0,a.choices={},a.examSubmit=!1,a.timer="00:00",a.timeInMinutes=0,a.userChoices={},a.totalQuestions=0,a.attemptedQuestions=0,a.percentages=0,a.fourChoices=!1,a.examAuthorized=!1,a.availableParts=0,h.showChatBox=!1,a.examSet={},a.instructions=!1,a.preQuestions=0,a.answeredQuestions=[],a.timeSpent=0,a.numberOfWrongAnswers=0,a.isCollapsed={};var o=a.currentUser.email,p=a.currentUser.name,q=a.currentUser.subjects,r=f.isAdmin(),s=0;f.isLoggedInAsync(function(c){c?(o=a.currentUser.email,p=a.currentUser.name,q=a.currentUser.subjects,r=f.isAdmin(),b.get("/api/exams/"+a.subject+"/"+a.examNumber+"/"+a.sectionNumber).success(function(b){if(a.examSet=b,"undefined"==typeof b["section"+a.sectionNumber]["part"+a.partNumber])return g.path("/account"),!1;for(var c in b["section"+a.sectionNumber])b["section"+a.sectionNumber]["part"+(a.availableParts+1)].fullQuestions.length>0&&(++a.availableParts,a.totalQuestions+=b["section"+a.sectionNumber]["part"+a.availableParts].fullQuestions.length);a.instructions=a.examSet["section"+a.sectionNumber]["part"+a.partNumber].instructions}).error(function(a,b,c,d){g.path("/account")})):g.path("/login")}),a.startExam=function(){a.preExam=!1,a.prepareExam()},a.prepareExam=function(){if(a.fourChoices=a.examSet["section"+a.sectionNumber]["part"+a.partNumber].fourChoices,a.fourChoices)for(var b=0;b<a.examSet["section"+a.sectionNumber]["part"+a.partNumber].fullQuestions.length;++b)for(var c=a.examSet["section"+a.sectionNumber]["part"+a.partNumber].fullQuestions[b].choices,d=1;c.length>4&&d<=c.length;)c[c.length-d].correct||(a.examSet["section"+a.sectionNumber]["part"+a.partNumber].fullQuestions[b].choices.splice(0-d,1),c=a.examSet["section"+a.sectionNumber]["part"+a.partNumber].fullQuestions[b].choices),++d;a.shuffle(a.examSet["section"+a.sectionNumber]["part"+a.partNumber].fullQuestions);for(var e=[],f=0,g=a.examSet["section"+a.sectionNumber]["part"+a.partNumber].fullQuestions;f<g.length;++f){for(var h=0,i=0,j=g[f].choices;i<j.length;++i)g[f].choices[i].correct&&++h;h>1&&e.push(a.examSet["section"+a.sectionNumber]["part"+a.partNumber].fullQuestions.splice(f,1)[0])}e.length>0&&(a.examSet["section"+a.sectionNumber]["part"+a.partNumber].fullQuestions=a.examSet["section"+a.sectionNumber]["part"+a.partNumber].fullQuestions.concat(e)),
a.examPart=a.examSet["section"+a.sectionNumber]["part"+a.partNumber],a.exam=a.examSet,a.examAuthorized=!0,a.timeInMinutes=60*parseInt(a.examSet["section"+a.sectionNumber]["part"+a.partNumber].timeInMinutes),a.$on("timer-stopped",function(b,c){a.timeSpent=1e3*a.timeInMinutes-c.millis})},a.submitExam=function(){if(b.get("/api/surveys/forUser/"+a.currentUser._id).success(function(b){a.survey=b,e.open({template:"components/surveyModal/surveyModal.html",controller:"SurveyModalCtrl",className:"surveyModal",scope:a})}).error(function(a){console.log(a)}),a.availableParts===a.partNumber){if(a.availableParts>1){var c=[];a.examPart={},a.examPart.fullQuestions=[];var d=0;for(var f in a.examSet["section"+a.sectionNumber])++d,c.push(a.examSet["section"+a.sectionNumber]["part"+d].fullQuestions);for(var g=0;g<c.length;++g)for(var j=0;j<c[g].length;++j)a.examPart.fullQuestions.push(c[g][j]);a.preQuestions=0}var k=a.choices;a.examSubmit=!0,document.getElementById("countdownTimer").stop(),a.userChoices=a.clone(k);var l=[];for(var m in a.userChoices)if("undefined"==typeof a.userChoices[m]._id){var n=0,p=0;for(var q in a.userChoices[m])"undefined"!=typeof a.userChoices[m][q].correct&&(++n,a.userChoices[m][q].correct&&++p);n==p?(a.userChoices[m].correct=!0,l.push(a.userChoices[m]._id),++a.attemptedQuestions):(a.userChoices[m].correct=!1,++a.numberOfWrongAnswers)}else l.push(a.userChoices[m]._id),a.userChoices[m].correct?++a.attemptedQuestions:++a.numberOfWrongAnswers;i(function(){angular.element('input[type="radio"],input[type="checkbox"]').prop("disabled",!0);for(var b=a.examPart.fullQuestions,c=0;c<b.length;++c)for(var d=0;d<b[c].choices.length;++d)b[c].choices[d].correct&&$("label[for="+b[c]._id+d+"]").closest("li").addClass("green")});var r=100*a.attemptedQuestions/a.totalQuestions;a.percentages=r.toFixed(1);for(var t=Object.keys(a.choices),u=[],v={},f=0;f<t.length;++f){if("undefined"==typeof a.choices[t[f]]._id){var w=[];for(var g in a.choices[t[f]])"undefined"!=typeof a.choices[t[f]][g]._id&&null!==a.choices[t[f]][g]._id&&w.push(a.choices[t[f]][g]._id);v[t[f]]=[w]}else w=a.choices[t[f]]._id,v[t[f]]=[a.choices[t[f]]._id];u.push({questionId:t[f],choiceId:w})}a.examResponse={examResponses:{examId:a.exam._id,score:r,timeSpent:a.timeSpent,responses:u},questionResponses:v},b.post("/api/users/exams/stats/",{email:o,examId:a.exam._id,score:r,userAnalytics:a.examResponse,wellWishers:s,exam:{subject:a.subject}}),h.showChatBox=!0}else a.nextExam()},a.timeOver=function(){a.submitExam()},a.nextExam=function(){a.preQuestions+=a.examSet["section"+a.sectionNumber]["part"+a.partNumber].fullQuestions.length,++a.partNumber,a.instructions=a.examSet["section"+a.sectionNumber]["part"+a.partNumber].instructions,a.preExam=!0},a.shuffle=function(a){for(var b,c,d=a.length;d;b=Math.floor(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a},a.showSubmit=function(){return a.availableParts==a.partNumber&&!a.preExam&&!a.examSubmit},a.showContinue=function(){return a.availableParts>a.partNumber&&!a.preExam&&!a.examSubmit},a.clone=function(b){var c;if(null==b||"object"!=typeof b)return b;if(b instanceof Date)return c=new Date,c.setTime(b.getTime()),c;if(b instanceof Array){c=[];for(var d=0,e=b.length;e>d;d++)c[d]=a.clone(b[d]);return c}if(b instanceof Object){c={};for(var f in b)b.hasOwnProperty(f)&&(c[f]=a.clone(b[f]));return c}throw new Error("Unable to copy obj! Its type isn't supported.")},a.hasOneCorrect=function(a){for(var b=0,c=0;c<a.length;++c)a[c].correct&&++b;return 1==b},a.storeQuestionContext=function(b,c){var d=event.target.name;if("undefined"==typeof a.choices[b._id]._id){for(var e in a.choices[b._id])a.choices[b._id][e].hasOwnProperty("_id")||delete a.choices[b._id][e];0===Object.size(a.choices[b._id])&&delete a.choices[b._id]}$('[name="'+d+'"]:checked').length>0?a.answeredQuestions.indexOf(b._id)<0&&a.answeredQuestions.push(b._id):a.answeredQuestions.indexOf(b._id)>-1&&a.answeredQuestions.splice(a.answeredQuestions.indexOf(b._id),1)},Object.size=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},a.addingComment={},a.commentForm={},a.commentLim=3,a.commentCurrentPage={},a.prevPage=function(b){var c=a.commentCurrentPage[b];c>1&&(a.commentCurrentPage[b]=c-1)},a.nextPage=function(b,c){var d=a.commentCurrentPage[c];d<a.getMaxPages(b)&&(a.commentCurrentPage[c]=d+1)},a.getMaxPages=function(b){var c=1;return b&&(c=b.length),0===c&&(c=1),Math.ceil(c/a.commentLim)},a.submitComment=function(c,d){c.userId=a.currentUser._id,c.user=a.currentUser.name,c.date=Date.now(),b.post("/api/questions/comment/"+d._id,{comment:c}).success(function(b){d.comments.push(b),a.addingComment[d._id]=!1,a.commentForm[d._id]={}}).error(function(a){j.error(a)})},a.$on("$destroy",function(){k.unsyncUpdates("exam")})}]).filter("trustedHtml",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),angular.module("fsaApp").directive("footer",function(){return{templateUrl:"components/footer/footer.html",restrict:"EA",link:function(a,b,c){}}}),angular.module("fsaApp").controller("CommunityLeadersCtrl",["$scope","Auth","$http","usSpinnerService",function(a,b,c,d){a.getCurrentUser=b.getCurrentUser,c.get("/api/communityLeaders").success(function(b){a.communityLeaders=b,angular.forEach(b,function(a,c){0===c?a.index=1:b[c-1].referral.usersReferredCount===a.referral.usersReferredCount?a.index=b[c-1].index:a.index=b[c-1].index+1}),a.stopSpin("spinner-1")}),c.get("/api/communityLeaders/myrank").success(function(b){a.myrank=b.myrank}),a.startSpin=function(a){d.spin(a)},a.stopSpin=function(a){d.stop(a)}}]),angular.module("fsaApp").controller("LivechatCtrl",["$scope","$interval","$location","$rootScope",function(a,b,c,d){var e,f=/account|setting|admin|teacher/,g=function(){b.cancel(e);var a=angular.element("#livechat-full"),d=angular.element("#livechat-compact-container");Object.keys(a).length<=2||Object.keys(d)<=2?e=b(g,100):(e=b(g,100),f.test(c.url())?(a.css("visibility","hidden"),d.css("visibility","hidden")):(a.css("visibility","visible"),d.css("visibility","visible")))};d.$on("$locationChangeSuccess",function(a){g()})}]),MathJax.HTML.Cookie.Set("menu",{}),MathJax.Hub.Config({skipStartupTypeset:!0,messageStyle:"none",extensions:["tex2jax.js","mml2jax.js","MathML/content-mathml.js","MathML/mml3.js"],jax:["input/MathML","input/TeX","output/SVG","output/HTML-CSS","output/NativeMML","output/CommonHTML"],"HTML-CSS":{availableFonts:[],styles:{".MathJax_Preview":{visibility:"hidden"}},showMathMenu:!1},SVG:{availableFonts:[],styles:{".MathJax_Preview":{visibility:"hidden"}},showMathMenu:!1},NativeMML:{availableFonts:[],styles:{".MathJax_Preview":{visibility:"hidden"}},showMathMenu:!1},CommonHTML:{availableFonts:[],styles:{".MathJax_Preview":{visibility:"hidden"}},showMathMenu:!1}}),MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function(){var a=MathJax.OutputJax["HTML-CSS"].Font;a.loadError=function(a){MathJax.Message.Set("Can't load web font TeX/"+a.directory,null,2e3),document.getElementById("noWebFont").style.display=""},a.firefoxFontError=function(a){MathJax.Message.Set("Firefox can't load web fonts from a remote host",null,3e3),document.getElementById("ffWebFont").style.display=""}}),function(a){var b={Firefox:3,Opera:9.52,MSIE:6,Chrome:.3,Safari:2,Konqueror:4,Unknown:1e4};a.Browser.versionAtLeast(b[a.Browser]||0)||(a.Config({jax:[],extensions:[],"v1.0-compatible":!1}),setTimeout('document.getElementById("badBrowser").style.display = ""',0))}(MathJax.Hub),MathJax.Hub.Register.StartupHook("End",function(){var a=MathJax.OutputJax["HTML-CSS"];a&&a.imgFonts&&(document.getElementById("imageFonts").style.display="")}),angular.module("fsaApp").directive("mathjaxBind",function(){return{restrict:"A",controller:["$scope","$element","$attrs",function(a,b,c){a.$watch(c.mathjaxBind,function(a){b.html(a),MathJax.Hub.Queue(["Typeset",MathJax.Hub])})}]}}),angular.module("fsaApp").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("fsaApp").directive("mongooseError",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){b.on("keydown",function(){return d.$setValidity("mongoose",!0)})}}}),angular.module("fsaApp").controller("NavbarCtrl",["$scope","$window","$location","Auth","User",function(a,b,c,d,e){a.menu=[{title:"Contact",link:"contact"}],b.onresize=function(){a.isCollapsed=!0},a.isLoggedIn=d.isLoggedIn,a.isCollapsed=!0,a.isAdmin=d.isAdmin,a.isTeacher=d.isTeacher,a.isStudent=d.isStudent,null!==a.$root&&(a.$root.userName||d.isLoggedIn()&&e.get(function(b){a.$root.userName=b.name,a.userName=b.name}),a.userName=a.$root.userName,a.$root.$watch("userName",function(){null!==a.$root&&(a.userName=a.$root.userName)})),a.logout=function(){d.logout(),c.path("/login")},a.isActive=function(a){return c.path().split("/")[1]===a}}]),angular.module("fsaApp").directive("omniEditor",function(){return{templateUrl:"components/omniEditor/omniEditor.html",restrict:"E",scope:{name:"@",ngHeight:"@",ngModel:"="},controller:["$scope",function(a){a.editorOptions={toolbar:[{name:"basicstyles",items:["Bold","Italic","Underline"]},{name:"links",items:["Link","Unlink"]},{name:"insert",items:["Mathjax","Image"]}],height:a.ngHeight},a.test=function(){console.log(a.name),console.log(a.ngHeight),console.log(a.ngModel)}}]}}),angular.module("fsaApp").directive("omniLink",["$location",function(a){return function(b,c,d){var e;return e=!1,c.bind("click",function(){return e?void 0:a.path(d.omniLink)}),c.bind("touchstart",function(a){return e=!0}),c.bind("touchmove",function(a){return e=!1,a.stopImmediatePropagation()}),c.bind("touchend",function(){return e?a.path(d.omniLink):void 0})}}]),angular.module("fsaApp").directive("omniTap",function(){return function(a,b,c){var d;return d=!1,b.bind("click",function(){return d?void 0:a.$apply(c.omniTap)}),b.bind("touchstart",function(a){return d=!0}),b.bind("touchmove",function(a){return d=!1,a.stopImmediatePropagation()}),b.bind("touchend",function(){return d?a.$apply(c.omniTap):void 0})}}),angular.module("fsaApp").directive("omnicordion",function(){return{template:'<div data-ng-transclude=""></div>',restrict:"EA",replace:!0,transclude:!0,controller:function(){var a=[];this.gotOpened=function(b){angular.forEach(a,function(a){b!=a&&(a.showMe=!1)})},this.addExpander=function(b){a.push(b)}}}}).directive("expander",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^omnicordion",scope:{title:"@expanderTitle"},templateUrl:"components/omnicordion/omnicordion.html",link:function(a,b,c,d){a.showMe=!1,d.addExpander(a),a.toggle=function(){a.showMe=!a.showMe,d.gotOpened(a)}}}}),angular.module("fsaApp").factory("persist",function(){return{}}),angular.module("fsaApp").directive("scrollTopOn",["$timeout",function(a){function b(b,c,d){b.$on(d.scrollTopOn,function(){a(function(){angular.element(c)[0].scrollTop=0})})}return b}]),angular.module("fsaApp").directive("scrollable",["$timeout",function(a){return{scope:{scrollable:"=",scrollableTab:"=",userScrollTreshhold:"="},restrict:"EA",link:function(b,c){b.$watchCollection("scrollable",function(c,d){c!=d&&a(function(){var a;"undefined"!=typeof c[c.length-1].roomID?(a=$("#"+c[c.length-1].roomID),a[0]&&a.scrollTop()+ +b.userScrollTreshhold>=a[0].scrollHeight-+b.userScrollTreshhold&&a.scrollTop(a[0].scrollHeight)):"undefined"!=typeof c[c.length-1].notification&&(a=$("#"+b.scrollableTab),a[0]&&a.scrollTop()+ +b.userScrollTreshhold>=a[0].scrollHeight-+b.userScrollTreshhold&&a.scrollTop(a[0].scrollHeight))})}),b.$watch(function(){return c[0].scrollHeight},function(b,d){0==d&&a(function(){c.scrollTop(c[0].scrollHeight)})})}}}]),angular.module("fsaApp").controller("SignupModalCtrl",["$scope","Auth","$location","$window","$http","$routeParams","$cookieStore","$cookies",function(a,b,c,d,e,f,g,h){b.logout(),a.user={},a.errors={},a.setEmail=!1,a.signupError=h.signupError,a.ngDialogData&&(a.ngDialogData.message&&(a.message=a.ngDialogData.message),a.ngDialogData.name&&(a.user.name=a.ngDialogData.name),a.ngDialogData.period&&(a.user.period=a.ngDialogData.period)),a.signupError&&g.remove("signupError"),a.register=function(c){if(a.submitted=!0,c.$valid){var d=a.user;b.createUser(d).then(function(b){a.closeThisDialog(b)})["catch"](function(b){b=b.data,a.errors={},angular.forEach(b.errors,function(b,d){c[d].$setValidity("mongoose",!1),a.errors[d]=b.message})})}}}]),angular.module("fsaApp").factory("socket",["socketFactory",function(a){var b=io("",{path:"/socket.io-client"}),c=a({ioSocket:b});return{socket:c,syncUpdates:function(a,b,d){d=d||angular.noop,c.on(a+":save",function(a){var c=_.find(b,{_id:a._id}),e=b.indexOf(c),f="created";c?(b.splice(e,1,a),f="updated"):b.push(a),d(f,a,b)}),c.on(a+":remove",function(a){var c="deleted";_.remove(b,{_id:a._id}),d(c,a,b)}),c.on(a+":addNotification",function(a){var c=_.find(b,{_id:a._id}),e=b.indexOf(c),f="notificationCreated";c?(b.splice(e,1,a),f="notificationUpdated"):b.push(a),d(f,a,b)}),c.on(a+":removeNotification",function(a){var c="notificationDeleted";_.remove(b,{_id:a._id}),d(c,a,b)})},unsyncUpdates:function(a){c.removeAllListeners(a+":save"),c.removeAllListeners(a+":remove"),c.removeAllListeners(a+":addNotification"),c.removeAllListeners(a+":removeNotification")}}}]),angular.module("fsaApp").directive("studentsProgress",["Auth","$location","$http","User","filterFilter","usSpinnerService",function(a,b,c,d,e,f){return{templateUrl:"components/studentsProgress/studentsProgress.html",restrict:"EA",link:function(d){d.currentPage=1,d.maxPage=1,d.lim=10,d.students=[],d.selectedSubject={},d.filter={},d.examDetails=[],a.isAdmin()||a.isTeacher()||b.path("/"),d.currentUser=a.getCurrentUser(),a.isTeacher()&&(d.subjectsTaught=d.currentUser.subjectsTaught,d.students=d.currentUser.referral.usersReferred),d.getStudents=function(){d.startSpin("spinner-search");var a="/api/users/students/list/"+d.selectedSubject.subject+"/"+d.currentPage+"/"+d.lim;""!==d.filter.search&&"undefined"!=typeof d.filter.search&&(a="/api/users/students/list/"+d.selectedSubject.subject+"/"+d.currentPage+"/"+d.lim+"/"+d.filter.search),c.get(a).success(function(a){d.students=a.users,d.filtered=a.users,d.totalStudents=a.count,d.examDetails=a.examDetails,d.maxPage=Math.ceil(d.totalStudents/d.lim),d.stopSpin("spinner-search")})},a.isAdmin()&&(d.subjectsTaught=[{subjectName:"APCalcAB"},{subjectName:"APCalcBC"},{subjectName:"APStats"},{subjectName:"APPhysics1"},{subjectName:"APPhysics2"},{subjectName:"APEurHistory"},{subjectName:"APUSHistory"},{subjectName:"APWorldHistory"},{subjectName:"APMicroecon"},{subjectName:"APMacroecon"},{subjectName:"APPsych"},{subjectName:"APBio"},{subjectName:"APChem"},{subjectName:"APEnvSci"},{subjectName:"APUSGovt"},{subjectName:"APHumGeo"}]),d.subjectsTaught.length>0&&(d.selectedSubject.subject=d.subjectsTaught[0].subjectName),d.hasSubjectTaught=function(){return d.subjectsTaught.length>0},d.$watch("filtered",function(a){if(a){var b=a.length;b>0?d.maxPage=Math.ceil(d.totalStudents/d.lim):d.maxPage=1}}),d.page=function(a){var b=d.currentPage+a;1>b||b>d.maxPage||(d.currentPage=b,d.getStudents())},d.updateFiltered=function(){d.currentPage=1,d.getStudents()},d.getExamAttempts=function(a){for(var b=0;b<a.exams.length;++b)for(var c=0;c<d.examDetails.length;++c)if(a.exams[b].examId===d.examDetails[c]._id&&d.examDetails[c].subject===d.selectedSubject.subject)return a.exams[b].attempts;return 0},d.getHighScore=function(a){for(var b=0;b<a.exams.length;++b)for(var c=0;c<d.examDetails.length;++c)if(a.exams[b].examId===d.examDetails[c]._id&&d.examDetails[c].subject===d.selectedSubject.subject)return a.exams[b].score;return 0},d.updateStudentsList=function(){d.currentPage=1,d.getStudents()},d.startSpin=function(a){f.spin(a)},d.stopSpin=function(a){f.stop(a)},d.getStudents()}}}]),angular.module("fsaApp").factory("SubjectNames",function(){var a={APCalcAB:"AP Calculus AB",APCalcBC:"AP Calculus BC",APStats:"AP Statistics",APPhysics1:"AP Physics 1",APPhysics2:"AP Physics 2",APEurHistory:"AP European History",APUSHistory:"AP US History",APWorldHistory:"AP World History",APMicroecon:"AP Microeconomics",APMacroecon:"AP Macroeconomics",APPsych:"AP Psychology",APBio:"AP Biology",APChem:"AP Chemistry",APEnvSci:"AP Env. Science",APUSGovt:"AP US Gov. & Pol.",APHumGeo:"AP Human Geography"};return{getSubjectName:function(b){return a[b]}}}),angular.module("fsaApp").controller("SurveyModalCtrl",["$scope","ngDialog","$http",function(a,b,c){a.submitSurvey=function(d){d.$valid&&(c.post("/api/surveyResponses",a.survey),b.close())}}]),angular.module("fsaApp").config(["$routeProvider",function(a){a.when("/surveyModal",{templateUrl:"components/surveyModal/surveyModal.html",controller:"SurveyModalCtrl"})}]),angular.module("fsaApp").run(["$templateCache",function(a){a.put("app/about/about.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class="container-fluid text-center paper-background header"><div class=row><div class=col-sm-2></div><div class=col-sm-8><div class=row><div class="col-sm-12 avenir-light"><h1>Making learning engaging for AP students</h1></div></div><div class=row><div class="col-sm-12 avenir-light"><h2 class=small-caps>A Brief Background on Omninox</h2></div></div><div class=row><div class="col-sm-12 avenir-light"><p class=long-copy>Three former AP students founded Omninox in 2012 with a vision to help students gain a more engaging learning experience. As former AP students who took over 10 AP exams each, the three founders wanted to share the inspiration and awe they gained about these subjects from their teachers at a top ranked high school by communicating it through user-friendly technology. AP classes seemed like a natural place to start because there aren\'t very many resources for them, and through the founders\' personal experience, AP classes helped them save <strong>tens of thousands of dollars</strong> in college tuition.</p></div></div><div class=row><div class="col-sm-12 avenir-light"><h2 class=small-caps>The Vision</h2></div></div><div class=row><div class="col-sm-12 avenir-light"><p class=long-copy>Omninox was founded on the principle that learning should be fun and engaging. Studying shouldn\'t be a chore; instead, information should be presented in a way that feels natural, either through conversation or through providing teachers with user-friendly, interactive tools to help engage students. Our vision is to create simple and engaging software services for students, teachers and the classroom. Since this mission of revolutionizing the learning experience requires user input, the Omninox team is constantly looking for feedback on how to make our existing tools more engaging. If you have any ideas or suggestions, feel free to <a href=/contact>reach out</a>!</p></div></div><div class=row><div class="col-sm-12 avenir-light"><h3 class=small-caps>Products and Services</h3></div></div><div class=row><div class="col-sm-12 avenir-light"><p class=long-copy>In addition to creating web-based communal learning experiences, the Omninox team has also created interactive AP test prep books available on the iBookstore. We also offer our expertise in content creation to help schools and businesses take their professional development to the next level. <a href=/contact>Contact us</a> to learn more about how our team can help you economically engage your staff.</p></div></div></div><div class=col-sm-2></div></div><div class="row contrast break-point"><div class=col-sm-12><div class=row><div class=col-sm-12><h3 class=avenir-light><i>Interested in our interactive books?</i></h3><p class="small avenir-light">Click the links below to visit us in the iBookstore</p></div></div><div class=row><div class="col-sm-6 col-sm-offset-3"><a href="https://itunes.apple.com/us/book/ap-calculus-ab/id821916469?ls=1&amp;mt=13"><img src=/assets/images/calcab.jpg class="book-cover"></a><a href="https://itunes.apple.com/us/book/ap-calculus-bc/id821936418?ls=1&amp;mt=13"><img src=/assets/images/calcbc.jpg class="book-cover"></a><a href="https://itunes.apple.com/us/book/ap-statistics/id821967076?ls=1&amp;mt=13"><img src=/assets/images/stats.jpg class="book-cover"></a></div></div></div></div></div><footer style="margin-top: 0px" ng-include=&quot;components/footer/footer.html&quot; class=footer></footer><div ng-include=&quot;components/livechat/livechat.html&quot;></div>'),a.put("app/account/account/account.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><alert id=alert-container ng-if="user.numFreeSubjects &gt; 0" type=success omni-tap=removeMe($event) class=avenir-light><a href=/pricing><p ng-show="user.numFreeSubjects === 1">You have <strong>1 free subject</strong> to redeem! Pick your subject now!</p><p ng-show="user.numFreeSubjects &gt; 1">You have <strong>{{user.numFreeSubjects}} free subjects</strong> to redeem! Pick them now!</p></a></alert></div><div ng-if=user.role><div ng-if="user.role == &quot;admin&quot;"><div ng-include=&quot;components/accountPage/admin/account.html&quot;></div></div><div ng-if="user.role !== &quot;admin&quot;"><div ng-include=&quot;components/accountPage/endUser/account.html&quot;></div></div></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),a.put("app/account/exam/exam.html","<div ng-include=&quot;components/examPage/examPage.html&quot;></div>"),a.put("app/account/forgot/forgot.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><div class="row avenir-db"><div class=col-sm-2></div><div class=col-sm-8><h1>Forgot Password</h1></div><div class=col-sm-2></div></div><div class="row avenir-light"><div class=col-sm-2></div><div class=col-sm-8><form name=form ng-submit=forgot(form) novalidate class=form><div class=form-group><label>Email</label><input name=email ng-model=user.email placeholder=me@example.com class="omni-input form-control"></div><div class="form-group has-error"><p ng-show="form.email.$error.required &amp;&amp; submitted" class=help-block>Please enter your email.</p><p class=help-block>{{ errors.other }}</p></div><div><button type=submit class="btn btn-danger btn-lg">Reset</button></div></form><br><alert type={{alertType}} ng-show="alertMsg.length &gt; 0">{{alertMsg}}</alert></div><div class=col-sm-2></div></div></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),a.put("app/account/login/login.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><div class=row><div class="col-md-1 col-lg-2"></div><div class="col-sm-12 col-md-10 col-lg-8"><h1 class=avenir-db>Login</h1><br><!--p--><!--  | Accounts are reset on server restart from--><!--  code server/config/seed.js--><!--  | .--><!--p--><!--  | Default account is--><!--  code test@test.com--><!--  | /--><!--  code test--><!--p--><!--  | Admin account is--><!--  code admin@admin.com--><!--  | /--><!--  code admin--><!--p--><!--  | Customer (paid user) account is--><!--  code customer@customer.com--><!--  | /--><!--  code customer--><div class=row><div class=col-sm-4><a href="" omni-tap=loginOauth(&quot;facebook&quot;) class="btn btn-facebook"><i style=font-size:30px class="fa fa-facebook pull-left"></i> Login with Facebook</a></div><br class="visible-xs"><div class=col-sm-4><a href="" omni-tap=loginOauth(&quot;google&quot;) class="btn btn-google-plus"><i style=font-size:30px class="fa fa-google-plus pull-left"></i> Login with Google+</a></div><br class="visible-xs"><div class=col-sm-4><button omni-tap=loginOauth(&quot;edmodo&quot;) class="btn btn-edmodo login-edmodo-button"><img id=edmodo-logo src=https://s3-us-west-2.amazonaws.com/s.cdpn.io/41205/edmodo-icon_1.png class="pull-left"><p class=avenir-light>Login with<span id=edmodo>&nbsp;Edmodo</span></p></button></div><br class="visible-xs"></div><div class=row><div class=col-sm-12><table style=width:100%><tr><td style=width:47%><hr class="hr-login"></td><td style="width:6%;text-align: center">or</td><td style=width:47%><hr class="hr-login"></td></tr></table><form style=width:100% name=form ng-submit=login(form) novalidate class=form><div class=form-group><input placeholder="E-mail address" name=email ng-model=user.email class="form-control omni-input"></div><div class=form-group><input placeholder=Password type=password name=password ng-model=user.password class="form-control omni-input"></div><div class="form-group has-error"><p ng-show="form.email.$error.required &amp;&amp; form.password.$error.required &amp;&amp; submitted" class=help-block>Please enter your email and password.</p><p class=help-block>{{ errors.other }}</p></div><div class=avenir-light><button type=submit class="btn btn-danger btn-lg btn-login shadowed">Sign In</button></div><hr><a href=/forgot class=avenir-light>Forgot Password?</a><hr></form></div></div></div><div class="col-md-1 col-lg-2"></div></div></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),a.put("app/account/reset/reset.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><div class=row><div class=col-sm-2></div><div class="col-sm-8 avenir-db"><h1>Change Password</h1></div><div class=col-sm-2></div></div><div class=row><div class=col-sm-2></div><div class="col-sm-8 avenir-light"><form id=form name=form ng-submit=resetPassword(form) novalidate class=form><div class=form-group><label>New Password</label><input type=password name=newPassword ng-model=user.newPassword ng-minlength=3 required class="omni-input form-control"><p ng-show="(form.newPassword.$error.minlength || form.newPassword.$error.required) &amp;&amp; (form.newPassword.$dirty)" class=help-block>Password must be at least 3 characters.</p><p class=help-block>{{ message }}</p><button type=submit class="btn btn-lg btn-danger">Save changes</button></div></form><br><alert type={{alertType}} ng-show="alertMsg.length &gt; 0">{{alertMsg}}</alert></div><div class=col-sm-2></div></div></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),a.put("app/account/settings/settings.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><div class=row><div class=col-sm-1></div><div class="col-sm-10 avenir-db"><h1>Change Account Settings</h1></div><div class=col-sm-1></div></div><div class=row><div class=col-sm-1></div><div class=col-sm-10><hr></div><div class=col-sm-1></div></div><!--If user is from edmodo, refer them there for settings.--><div ng-if="user.provider==&quot;edmodo&quot;" class=row><div class=col-sm-2></div><div class="col-sm-8 avenir-light"><p>Please refer to your account with <a href=http://www.edmodo.com>Edmodo</a>to update personal information and password.</p></div><div class=col-sm-2></div></div><!--If user is from google, refer them there for settings.--><div ng-if="user.provider==&quot;google&quot;" class=row><div class=col-sm-2></div><div class="col-sm-8 avenir-light"><p>Please refer to your account with <a href=http://plus.google.com>Google+</a>to update personal information and password.</p></div><div class=col-sm-2></div></div><!--If user if from facebook, refer them there for settings.--><div ng-if="user.provider==&quot;facebook&quot;" class=row><div class=col-sm-2></div><div class="col-sm-8 avenir-light"><p>Please refer to your account with <a href=http://www.facebook.com>Facebook</a>to update personal information and password.</p></div><div class=col-sm-2></div></div><!--ALlow local users to update their account.--><div ng-if="user.provider==&quot;local&quot;||user.provider==&quot;seed&quot;" class=row><div class=col-sm-12><div class=row><div class=col-sm-2></div><div class="col-sm-8 avenir-db"><h3>Personal Information</h3></div><div class=col-sm-2></div></div><div class=row><div class=col-sm-2></div><div class="col-sm-8 avenir-light"><form name=personalInfo ng-submit=changeAccountInfo(personalInfo) novalidate class=form><div class=form-group><label>Name</label><p ng-if=canChangeName class=bg-warning>You can only change your name once. Do so wisely!</p><input name=userName ng-model=user.name ng-pattern="/^[a-zA-Z][a-zA-Z .]*-?[a-zA-Z .]+$/" ng-required=true ng-disabled=!canChangeName class="omni-input form-control"><p ng-show="personalInfo.userName.$error.required &amp;&amp; infoSubmitted" class=help-block>Required</p><p ng-show="form.name.$error.pattern &amp;&amp; submitted" class=help-block>Your name should start with a letter, and only include letters, spaces, dashes, or periods.</p></div><div class=form-group><label>E-Mail</label><input type=email name=email ng-model=user.email ng-required=true mongoose-error="" class="omni-input form-control"><p ng-show="personalInfo.email.$error.required &amp;&amp; infoSubmitted" class=help-block>Required</p><p ng-show=personalInfo.email.$error.mongoose class=help-block>{{ errors.email }}</p></div><p class=help-block>{{ infoMessage }}</p><button type=submit class="btn btn-lg btn-danger">Save Changes</button></form></div><div class=col-sm-2></div></div><div class=row><div class=col-sm-2></div><div class=col-sm-8><hr></div><div class=col-sm-2></div></div><div class=row><div class=col-sm-2></div><div class="col-sm-8 avenir-db"><h3>Password</h3></div><div class=col-sm-2></div></div><div class=row><div class=col-sm-2></div><div class="col-sm-8 avenir-light"><form name=form ng-submit=changePassword(form) novalidate class=form><div class=form-group><label>Current Password</label><input type=password name=password ng-model=user.oldPassword mongoose-error="" class="omni-input form-control"><p ng-show=form.password.$error.mongoose class=help-block>{{ errors.oldPassword }}</p></div><div class=form-group><label>New Password</label><input type=password name=newPassword ng-model=user.newPassword ng-minlength=3 required class="omni-input form-control"><p ng-show="(form.newPassword.$error.minlength || form.newPassword.$error.required) &amp;&amp; (form.newPassword.$dirty || passSubmitted)" class=help-block>Password must be at least 3 characters.</p></div><p class=help-block>{{ passMessage }}</p><button type=submit class="btn btn-lg btn-danger">Change Password</button></form></div><div class=col-sm-2></div></div></div></div></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),a.put("app/account/signup/beta/beta.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><div class=row><alert ng-if=signupError type=danger class=avenir-light>{{signupError}}</alert></div><div class=row><div class="col-sm-12 text-center"><h1 class="h1 avenir-mid">Sorry, sign-up is by invitation only.</h1><h2 class="h2 avenir-mid">Got your invite already?</h2><p class=avenir-light>Enter your invitation code</p><p class=avenir-light>OR</p><p class=avenir-light>Enter the email of someone you know has already joined</p><div class=row><div class=col-md-1></div><div class="col-sm-12 col-md-10"><form name=betaSubmit ng-submit=checkKey() novalidate auto-fill-fix="" class=form><div ng-class="{ &quot;has-success&quot;: betaSubmit.betaKey.error = &quot;&quot; &amp;&amp; chkSubmitted, &quot;has-error&quot;: betaSubmit.betaKey.error  !== &quot;&quot; &amp;&amp; chkSubmitted}" class=form-group><input id=key-input name=betaKey ng-model=betaKey required placeholder="OVR9000 / b@f.ly" ng-change="chkSubmitted = false" class="text-center form-control avenir-light"><p ng-show="(errors.betaKey === &quot;invalid&quot; || errors.betaKey === &quot;unapproved&quot;) &amp;&amp; chkSubmitted" class="avenir-light help-block">Sorry, it looks like that key is not valid.</p><p ng-show="errors.betaKey === &quot;expired&quot; &amp;&amp; chkSubmitted" class="avenir-light help-block">Sorry, it looks like that key has expired.</p><p ng-show="errors.betaKey === &quot;claimed&quot; &amp;&amp; chkSubmitted" class="avenir-light help-block">Sorry, it looks like that key has already been redeemed.</p></div><div class=form-group><button class="btn btn-danger avenir-light">Continue</button></div></form></div><div class=col-md-1></div></div></div></div><hr></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),
a.put("app/account/signup/signup.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><div class=row><alert ng-if=signupError type=danger class=avenir-light>{{signupError}}</alert></div><div class=row><div class="col-md-1 col-lg-2"></div><div class="col-sm-12 col-md-10 col-lg-8"><h1 class=avenir-db>Create your account</h1><br><div class=row><div class=col-sm-4><a href="" omni-tap=loginOauth(&quot;facebook&quot;) class="btn btn-facebook"><i style=font-size:30px class="fa fa-facebook pull-left"></i> Signup with Facebook</a></div><br class="visible-xs"><div class=col-sm-4><a href="" omni-tap=loginOauth(&quot;google&quot;) class="btn btn-google-plus"><i style=font-size:30px class="fa fa-google-plus pull-left"></i> Connect with Google</a></div><br class="visible-xs"><div class=col-sm-4><button omni-tap=loginOauth(&quot;edmodo&quot;) class="btn btn-edmodo login-edmodo-button"><img id=edmodo-logo src=https://s3-us-west-2.amazonaws.com/s.cdpn.io/41205/edmodo-icon_1.png class="pull-left"><p class=avenir-light>Connect with<span id=edmodo>&nbsp;Edmodo</span></p></button></div><br class="visible-xs"></div><div class=row><div class=col-sm-12><form name=form ng-submit=register(form) novalidate class="avenir-light form"><div ng-class="{ &quot;has-success&quot;: form.name.$valid &amp;&amp; submitted,            &quot;has-error&quot;: form.name.$invalid &amp;&amp; submitted }" class=form-group><label>Nickname</label><input name=name ng-pattern="/^[a-zA-Z][a-zA-Z .]*-?[a-zA-Z .]+$/" ng-model=user.name required class="omni-input form-control"><p ng-show="form.name.$error.required &amp;&amp; submitted" class=help-block>A name is required</p><p ng-show="form.name.$error.pattern &amp;&amp; submitted" class=help-block>Your name should start with a letter, and only include letters, spaces, dashes, or periods.</p></div><div ng-class="{ &quot;has-success&quot;: form.email.$valid &amp;&amp; submitted,            &quot;has-error&quot;: form.email.$invalid &amp;&amp; submitted }" class=form-group><label>Email</label><input name=email ng-model=user.email ng-pattern="/[a-z0-9!#$%&amp;\'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&amp;\'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/" ng-disabled=setEmail required mongoose-error="" class="omni-input form-control"><p ng-show="form.email.$error.pattern &amp;&amp; submitted" class=help-block>Doesn\'t look like a valid email. (Did you include the @ and the .whatever?)</p><p ng-show="form.email.$error.required &amp;&amp; submitted" class=help-block>What\'s your email address?</p><p ng-show=form.email.$error.mongoose class=help-block>{{ errors.email }}</p></div><div ng-class="{ &quot;has-success&quot;: form.password.$valid &amp;&amp; submitted,            &quot;has-error&quot;: form.password.$invalid &amp;&amp; submitted }" class=form-group><label>Password</label><input type=password name=password ng-model=user.password ng-minlength=3 required mongoose-error="" class="omni-input form-control"><p ng-show="(form.password.$error.minlength || form.password.$error.required) &amp;&amp; submitted" class=help-block>Password must be at least 3 characters.</p><p ng-show=form.password.$error.mongoose class=help-block>{{ errors.password }}</p></div><div ng-class="{ &quot;has-success&quot;: form.academicRole.$valid &amp;&amp; submitted,            &quot;has-error&quot;: form.academicRole.$invalid &amp;&amp; submitted }" class=form-group><label>Academic Role</label><select ng-init="user.academicRole=&quot;Student&quot;" name=academicRole ng-model=user.academicRole required mongoose-error="" ng-disabled=setAcademicRole class=form-control><option>Student</option><option>Teacher</option><!-- Limiting to just student or teacher for now\noption School Staff\noption parent--></select><p ng-show="(form.academicRole.$error.required &amp;&amp; submitted)" class=help-block>Please let us know your academic role.</p><p ng-show=form.academicRole.$error.mongoose class=help-block>{{ errors.academicRole }}</p></div><div><button type=submit class="btn btn-inverse btn-lg btn-login">Sign up</button></div><br><br><p>By signing up you agree to our <a href=/terms>Terms of Service</a> and <a href=/privacy>Privacy Policy</a>. In essence they say:</p><ul class=tos-list><li>We will not sell your personal information.</li><li>We might reach out to you to ask about your experience and feedback.</li><li>You are at least 13 years of age.</li></ul></form></div></div></div><div class="col-md-1 col-lg-2"></div></div><hr></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),a.put("app/admin/admin.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div ng-if=user.role><div ng-if="user.role == &quot;admin&quot;" class=container><div ng-repeat="component in adminComponentNames" class=row><div class=col-sm-12><div ng-hide=show[component] class=well><button ng-click="show[component] = true" class="btn btn-primary">Load {{component}}</button></div><div ng-if=show[component] class=well><div ng-include=adminComponents[component]></div></div></div></div></div><div ng-if="user.role != &quot;admin&quot;" class=container><div class=row><div class=col-sm-12><p>Nice try!</p></div></div></div></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),a.put("app/admin/components/accountTracker/accountTracker.html",'<div ng-controller=AccountTrackerCtrl class=container-fluid><form name=AccountTrackerForm><div class=row><div class=col-sm-4><h4>Account Tracker Date:</h4></div><div class=col-sm-4><p class=input-group><input datepicker-popup=dd-MMMM-yyyy ng-model=accountTrackerDate is-open=opened datepicker-options=dateOptions ng-required=true close-text=Close class="form-control"><span class=input-group-btn><button type=button ng-click=open($event) class="btn btn-default"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-sm-4><button type=submit ng-click=submitDate($event) class="btn btn-primary">Save date!</button></div></div></form></div>'),a.put("app/admin/components/betaKey/addBetaKey.html",'<div class=container-fluid><div class=row><div class=col-sm-12><h1>Add a Beta Key</h1></div></div><form name=betaKey ng-model=key no-validate="" class=form><div class=row><div class=col-sm-12><div class=row><div class=col-sm-12><div class=well><div class=form-group><div ng-init="key.massKey=false" class="toggle-btn-grp joint-toggle"><label ng-class="!key.massKey ? &quot;toggled&quot; : &quot;&quot;" class=toggle-btn><input name=massKey type=radio ng-model=key.massKey ng-value=false ng-required="true">Single Key</label><label ng-class="key.massKey ? &quot;toggled&quot; : &quot;&quot;" class=toggle-btn><input name=massKey type=radio ng-model=key.massKey ng-value=true ng-required="true">Mass Key</label></div></div><div class=form-group><label for=name>Key Name</label><input name=name ng-model=key.name ng-required=true placeholder="Name the beta key" class="omni-input form-control"><p ng-show=betaKey.name.$error.pattern class=help-block>Please don\'t include the @ symbol in the name.</p></div><div ng-show=!key.massKey class=form-group><label for=email>E-mail of key recipient</label><input name=email type=email ng-model=key.email ng-pattern="/[a-z0-9!#$%&amp;\'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&amp;\'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/" ng-required=!key.massKey placeholder=beta@tester.com class="form-control omni-input"><p ng-show=betaKey.email.$error.pattern class=help-block>Doesn\'t look like a valid email. (Did you include the @ and the .whatever?)</p></div><div class=form-group><label for=academicRole>Academic Role</label><div class=input-group><select name=adacemicRole ng-model=key.academicRole ng-options="opt.value as opt.name for opt in academicRoles" ng-required=true class=form-control></select></div></div><div class=form-group><label for=expires>Expiration Date</label><div class=input-group><input name=expires ng-model=key.expires show-button-bar=false is-open=opened datepicker-popup={{format}} ng-required=true datepicker-options=dateOptions date-disabled="disabled(date, mode)" close-text=Close class="omni-input form-control"><span class=input-group-btn><button type=button ng-click=open($event) class="btn btn-default"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div></div></div><div class=row><div class=col-sm-4></div><div style=text-align:center class=col-sm-4><button type=button ng-click=addNewBetaKey(betaKey) class="btn btn-primary">Submit</button></div><div class=col-sm-4></div></div></div></div></form></div>'),a.put("app/admin/components/betaKey/betaKeyManagement.html",'<div class=row><div class=col-sm-12><h2>Invitations</h2></div></div><div class=row><div class=col-sm-12><ul ng-controller=BetaKeyCtrl class=list-group><li class=list-group-item><div class=row><div class=col-sm-8><input ng-model=search placeholder=Search ng-change="updateFiltered()"> in<select ng-model=searchType ng-options="opt.value as opt.name for opt in searchTypes"></select></div><div class="col-sm-4 pages"><span omni-tap=page(-1) class=prevPage>&lt;</span><span>{{currentPage}}/{{maxPage}}</span><span omni-tap=page(1) class=nextPage>&gt;</span></div></div></li><li ng-if="betaKeys.length &gt; 0" class=list-group-item><div class=row><div ng-click="sortFactor = &quot;email&quot;" class=col-sm-3><strong>E-mail</strong></div><div ng-click="sortFactor = &quot;key&quot;" class=col-sm-3><strong>Key Name</strong></div><div class=col-sm-3><strong>Approved?</strong></div><div class=col-sm-3><strong>Claimed?</strong></div></div></li><li ng-repeat="betaKey in filtered | startAt:((currentPage-1)*lim) | limitTo: lim" class=list-group-item><div ng-class="{expired: parseDate(betaKey.expires)}" class="row betaKey"><div class="col-sm-3 email">{{betaKey.email || "Mass Key"}}</div><div class="col-sm-3 key">{{betaKey.name}}</div><div class="col-sm-3 approved">{{betaKey.approved}}</div><div ng-bind-html=parseClaimed(betaKey) class="col-sm-3 claimed"></div><span ng-click=removeKey(betaKey._id) class=delete><span class="glyphicon glyphicon-trash"></span></span></div></li><li class=list-group-item><div class=row><div class=col-sm-12>Add Beta Key&nbsp;<span><a omni-tap=addBetaKeyModal()><span class="glyphicon glyphicon-plus pull-left"></span></a></span></div></div></li><li class=list-group-item><div class=row><div class=col-sm-2>Clean up:</div><div ng-click=removeClaimed() class="col-sm-4 btn btn-primary">Remove all claimed</div><div ng-click=removeExpired() class="col-sm-4 btn btn-warning">Remove all expired</div></div></li></ul></div></div>'),a.put("app/admin/components/blockuser/blockuser.html",'<strong>Blocked Users</strong><div ng-controller=BlockuserCtrl class=panel><div class=panel-body><div class="messages bg-gray"><article class="top-margin bottom-margin col-lg-12 col-sm-12 col-xs-12"><section ng-repeat="user in blockedUsers" class=panel><div class=panel-body><div class=col-lg-6><h4>{{user.name}}</h4><h5 class=text-muted>{{user.email}}</h5></div><div class="col-lg-6 text-right"><div class=btn-group><button type=button omni-tap=activate(user) ng-disabled="user.type!=1 &amp;&amp; user.type!=2" class="btn bg-success">Lift Block</button><button type=button omni-tap=temporary(user) ng-disabled="user.type==1" class="btn bg-warning">Temporary</button><button type=button omni-tap=permanent(user) ng-disabled="user.type==2" class="btn bg-danger">Permanent</button></div></div></div></section></article><article ng-if="blockedUsers.length&lt;=0" class="top-margin bottom-margin col-lg-12 col-sm-12 col-xs-12"><section class=panel><div class=panel-body><div class=col-lg-6><h4>No user is currently blocked</h4></div></div></section></article></div></div></div>'),a.put("app/admin/components/chatarchive/chatarchive.html",'<strong>Chat Archive</strong><div ng-controller=ChatarchiveCtrl class=panel><div class=panel-body><tabset justified=true><tab ng-repeat="tab in tabs" heading={{tab.name}} active=tab.active disabled select=selectRoom(tab) class="avenir-light tab-heading">{{tab.content}}<div scrollable=true class="messages bg-gray"><article ng-show="page[roomID].msgcount&lt;=0 &amp;&amp;  page[roomID].totalMsgcount&lt;=0" class="top-margin bottom-margin col-lg-12 col-sm-12 col-xs-12"><section class=panel><div class=panel-body><h5 class="text-center text-warning">No Messages</h5></div></section></article><article ng-hide="page[roomID].msgcount&lt;=0  || page[roomID].totalMsgcount&lt;=limit  " class="top-margin bottom-margin col-lg-12 col-sm-12 col-xs-12"><div class=row><button omni-tap=loadEarlierMessages() class="btn btn-default col-md-4 col-md-offset-4">Load Earlier Messages</button></div></article><article ng-repeat="chat in archiveChats" ng-if="roomID === chat.roomID" ng-mouseenter="isHover=true" ng-mouseleave="isHover=false" class="top-margin-msg col-lg-8 col-sm-8 col-xs-8 {{(currentUser[\'email\'] == chat.email) ? \'pull-right\' : \'pull-left\'}}"><section class=panel><div class="panel-body {{(isBlocked(chat.email))?\' bg-danger\':\'\'}}"><a href=# ng-show="isHover==true &amp;&amp; (currentUser[\'email\'] != chat.email &amp;&amp; chat.sentByUser) &amp;&amp; (!isBlocked(chat.email))" omni-tap="blockUser(\'{{chat.email}}\',1,\'{{chat._id}}\',\'{{chat.name}}\')"><i class="fa fa-ban pull-right"><span class=text-muted>&nbsp;Temp. Block</span></i></a><a href=# ng-show="isHover==true &amp;&amp; (currentUser[\'email\'] != chat.email &amp;&amp; chat.sentByUser) &amp;&amp; (!isBlocked(chat.email))" omni-tap="blockUser(\'{{chat.email}}\',2,\'{{chat._id}}\',\'{{chat.name}}\')"><i class="fa fa-ban pull-right"><span class=text-muted>&nbsp;Perm. Block</span></i></a><a ng-show="isHover==true &amp;&amp; (currentUser[\'email\'] != chat.email &amp;&amp; chat.sentByUser) &amp;&amp; (isBlocked(chat.email))"><i class="fa fa-ban pull-right"><span class=text-muted>&nbsp;User Blocked</span></i></a><strong class="{{chat.sentByUser?\'\':\'text-danger\'}}">{{(currentUser[\'email\'] === chat.email) ? \'Me\' : (chat.sentByUser ? chat.name : \'Admin\')}}:</strong><p>{{chat.message}}</p></div></section></article></div></tab></tabset><div class="top-margin bottom-margin col-lg-12"><div class=row><button omni-tap=exportToJson() class="btn btn-primary">Export to JSON</button></div></div></div></div>'),a.put("app/admin/components/chatroom/chatroom.html",'<strong>Chatrooms</strong><ul ng-controller=ChatroomCtrl class=list-group><li ng-repeat="room in rooms" class=list-group-item><strong>{{room.name}}</strong><span>&nbsp;-&nbsp;</span><span class=text-muted>{{room.createdBy}}</span><a omni-tap=deleteRoom(room) class=trash><span class="glyphicon glyphicon-trash pull-right"></span></a><br><div><span>Room Type:</span><span class=text-muted></span><span class="glyphicon glyphicon-pencil edit"></span></div></li><li class=list-group-item>Add Room&nbsp;<span><a omni-tap=addChatRoomModal()><span class="glyphicon glyphicon-plus pull-left"></span></a></span></li></ul>'),a.put("app/admin/components/couponManagement/addCoupon.html",'<div class=container-fluid><div class=row><div class=col-sm-12><h1>Add a Coupon</h1></div></div><form name=addCoupon ng-model=coupon><div class=row><div class=col-sm-12><div class=row><div class=col-sm-12><div class=well><div class=form-group><label for=code>Code</label><input name=code ng-model=coupon.code placeholder="Coupon Code" ng-required=true class="form-control"></div><div class=form-group><label for=subjectName>Subject</label><div class=input-group><select name=subjectName ng-model=coupon.subjectName ng-required=true class=form-control><option ng-selected=true value=null ng-hide=true>Subject</option><option value=APCalcAB>AP Calculus AB</option><option value=APCalcBC>AP Calculus BC</option><option value=APPhysics1>AP Physics 1</option><option value=APPhysics2>AP Physics 2</option><option value=APStats>AP Statistics</option><option value=APCompSci>AP Computer Science</option><option value=APEngLanguage>AP English Language</option><option value=APEngLiterature>AP English Literature</option><option value=APEurHistory>AP European History</option><option value=APUSHistory>AP US History</option><option value=APWorldHistory>AP World History</option><option value=APMicroecon>AP Microeconomics</option><option value=APMacroecon>AP Macroeconomics</option><option value=APPsych>AP Psychology</option><option value=APBio>AP Biology</option><option value=APChem>AP Chem</option><option value=APEnvSci>AP Envir. Science</option><option value=APSpanLanguage>AP Spanish Language</option><option value=APUSGovt>AP US Government</option><option value=APHumGeo>AP Human Geography</option></select></div></div><div class=form-group><label for=totalNumber>Total Number</label><input name=totalNumber type=number ng-model=coupon.totalNumber placeholder="Total Number" class="form-control"></div><div class=form-group><label for=expires>Expiration Date</label><span class=input-group><input ng-model=coupon.expires show-button-bar=false is-open=couponDatePickerOpened datepicker-popup=dd-MMMM-yyyy ng-required=false close-text=Close class="form-control"><span class=input-group-btn><button type=button ng-click=openCouponDatePicker($event) class="btn btn-default"><i class="glyphicon glyphicon-calendar"></i></button></span></span></div></div></div></div></div></div><div class=row><div class=col-sm-12><button type=button ng-click=addNewCoupon(addCoupon) class="pull-right btn btn-primary">Submit</button></div></div></form></div>'),a.put("app/admin/components/couponManagement/couponManagement.html",'<strong>Coupons</strong><ul ng-controller=CouponCtrl class=list-group><li ng-if="coupons.length &gt; 0" class=list-group-item><div class=row><div ng-click="sortFactor = &quot;email&quot;" class=col-sm-2><strong>Code</strong></div><div ng-click="sortFactor = &quot;email&quot;" class=col-sm-2><strong>Subject</strong></div><div ng-click="sortFactor = &quot;key&quot;" class=col-sm-2><strong>Usages Allowed</strong></div><div class=col-sm-2><strong>Expires</strong></div><div class=col-sm-2><strong>No. Of Usages</strong></div></div></li><li ng-repeat="coupon in coupons" class=list-group-item><div class="row coupon"><div class="col-sm-2 email">{{coupon.code}}</div><div class="col-sm-2 email">{{coupon.subjectName}}</div><div class="col-sm-2 key">{{coupon.totalNumber}}</div><div class="col-sm-2 approved">{{coupon.expires | date:\'MMM dd yyyy\'}}</div><div class="col-sm-2 approved">{{coupon.numClaimed}}</div><span ng-click=removeCoupon(coupon._id) class=delete><span class="glyphicon glyphicon-trash"></span></span></div></li><li class=list-group-item><div class=row><div class=col-sm-12>Add Coupon&nbsp;<span><a omni-tap=addCouponModal()><span class="glyphicon glyphicon-plus pull-left"></span></a></span></div></div></li><li class=list-group-item><div class=row><div class=col-sm-2>Clean up:</div><div ng-click=removeReachedLimit() class="col-sm-4 btn btn-primary">Remove all reached limit</div><div ng-click=removeExpired() class="col-sm-4 btn btn-warning">Remove all expired</div></div></li></ul>'),a.put("app/admin/components/exams/examManagement.html",'<strong>Exams</strong><div ng-controller=AdminExamCtrl><accordion close-others=true><accordion-group ng-repeat="(subject, exams) in examObj" heading={{subject}}><ul><li ng-repeat="exam in exams | orderBy: &quot;examNumber&quot;" class=list-group-item><div class=row><div ng-if="exam.examNumber == 0" class=col-sm-6>Sample Questions</div><div ng-if="exam.examNumber &gt; 0" class=col-sm-6>Exam {{exam.examNumber}}</div><div class=col-sm-4></div><div class=col-sm-1><a href=admin/examEdit/{{exam._id}}><span class="glyphicon glyphicon-pencil"></span></a></div><div class=col-sm-1><a omni-tap=deleteExamModal(exam)><span class="glyphicon glyphicon-trash"></span></a></div></div></li></ul></accordion-group></accordion></div>'),a.put("app/admin/components/notificationToggle/notificationToggle.html",'<h3>Chat Notifications Control Panel</h3><div class=well><div ng-controller=NotificationToggleCtrl class=row><div class=col-sm-12><button type=button omni-tap=toggleStatus(true) ng-if="show &amp;&amp; !settings[0].info.active" ng-disabled=isDisabled class="text-center btn btn-success">Turn On</button><button type=button omni-tap=toggleStatus(false) ng-if="show &amp;&amp; settings[0].info.active" ng-disabled=isDisabled class="text-center btn btn-danger">Turn Off</button></div><div class=col-sm-12><h4></h4>Active : {{settings[0].info.active}}</div></div></div>'),a.put("app/admin/components/questions/questionManagement.html",'<div class=row><div class=col-sm-12><h2>Questions</h2></div></div><div class=row><div class=col-sm-12><ul ng-controller=QuestionManageCtrl class=list-group><li class=list-group-item><div class=row><div class=col-sm-4><input ng-model=questionSearch placeholder=Search ng-change="updateFilteredQuestions()"> in<select ng-model=questionSearchType ng-options="opt.value as opt.name for opt in questionSearchTypes"></select></div><div class=col-sm-4>Subject:<select ng-model=questionSubject ng-options="subject.dbName as subject.fullName for subject in subjectOptions" ng-change=updateFilteredQuestions()></select></div><div class=col-sm-2>Tags:<select ng-model=questionTagRestriction ng-options="restriction.val as restriction.name for restriction in questionTagRestrictions" ng-change=updateFilteredQuestions()></select></div><div class=col-sm-1><span omni-tap=updateFilteredQuestions() class="glyphicon glyphicon-refresh"></span></div><div class="col-sm-1 pages"><span omni-tap=questionPage(-1) class=prevPage>&lt;</span><span>{{questionCurrentPage}}/{{questionMaxPage}}</span><span omni-tap=questionPage(1) class=nextPage>&gt;</span></div></div></li><li ng-repeat="question in filteredQuestions | startAt:((questionCurrentPage-1)*questionLim) | limitTo: questionLim" class=list-group-item><div class=row><div class=col-sm-2>Question {{$index + 1}} [{{question.subject}}]</div><div class=col-sm-8></div><div ng-show=!question.editing class="col-sm-1 text-center"><button omni-tap="question.editing=true" class="btn btn-primary">Edit</button></div><div ng-show=question.editing class="col-sm-1 text-center"><button omni-tap="saveQuestion(question, $index)" class="btn btn-warning">Save</button></div><div class="col-sm-1 text-center"><button disabled class="btn btn-warning"><span class="glyphicon glyphicon-trash"></span></button><!--button.btn.btn-warning(omni-tap=\'delQuestion(question, $index)\')\n  span.glyphicon.glyphicon-trash--></div></div><div class=row><div class=col-sm-12><hr></div></div><div class=row><div class="col-sm-2 text-right">Tags:</div><div class=col-sm-10><span ng-repeat="tag in question.tags track by $index" class="btn btn-primary">{{tag}} <span omni-tap="delTag(question, $index)" ng-if=question.editing class="glyphicon glyphicon-trash"></span></span><span ng-if=question.editing><form ng-submit=addTag(question)><input ng-model=question.newTag name=newTag placeholder="Add a tag." typeahead="tag for tag in tags | filter:$viewValue | limitTo:5"><input type=submit id=submit value=Submit ng-hide="true"></form></span></div></div><div class=row><div class=col-sm-12><hr></div></div><div class=row><div class=col-sm-6><p mathjax-bind=question.body ng-show=!question.editing></p><textarea ng-model=question.body ng-show=question.editing rows=8 cols=75></textarea></div><div class=col-sm-6><p mathjax-bind=question.explanation.body ng-show=!question.editing></p><textarea ng-model=question.explanation.body ng-show=question.editing rows=8 cols=75></textarea></div></div><div ng-repeat="answer in question.choices" class=row><div class=col-sm-9><p mathjax-bind=answer.body ng-show=!question.editing></p><input ng-model=answer.body ng-show="question.editing"></div><div class=col-sm-3><span ng-show=!question.editing>{{answer.correct}}</span><span ng-show=question.editing ng-init="answer.tempCorrect = ((answer.correct) ? &quot;true&quot; : &quot;false&quot;)"><label class=radio-inline><input type=radio ng-model=answer.tempCorrect value="true">Correct</label><label class=radio-inline><input type=radio ng-model=answer.tempCorrect value="false">Incorrect</label></span></div></div></li><!--TODO Implement question creation\nli.list-group-item\n  | Add Question&nbsp;\n  span\n    a(omni-tap=\'addQuestionModal()\')\n      span.glyphicon.glyphicon-plus.pull-left--></ul></div></div>'),a.put("app/admin/components/subjectsTaught/subjectsTaught.html",'<h3>Add/Remove Subjects Taught</h3><div><form><div class=well><div class=form-group><label for=roomName>Subjects:</label><isteven-multi-select input-model=subjects output-model=subjectsTaught button-label=name item-label=name tick-property=ticked max-height=300px max-labels=5></isteven-multi-select></div></div><div class=row><div class=col-sm-6><button type=button omni-tap=closeThisDialog() class="pull-right btn btn-primary">Cancel</button></div><div class=col-sm-6><button type=button omni-tap=saveSubjectsTaught() class="text-center btn btn-primary">Submit</button></div></div></form></div>'),a.put("app/admin/components/survey/addSurvey.html",'<div class=container-fluid><div class=row><div class=col-sm-12><h1>Add a Survey</h1></div></div><form name=surveyForm ng-model=survey><div class=row><div class=col-sm-12><div class=row><div class=col-sm-12><div class=well><div class=form-group><label for=name>Survey Name</label><input name=name ng-model=survey.name placeholder="Name the survey" class="form-control"></div><div class=form-group><label for=information>Survey Name</label><input name=name ng-model=survey.info placeholder="Describe the survey" class="form-control"></div></div></div></div><div ng-repeat="question in survey.questions" class="row form-horizontal well"><div class=col-sm-10><div class=form-group><label>Question {{$index+1}}</label><input ng-model=question.questionContent placeholder="Ask a question." class="form-control"></div><div class=form-group><label>Choices</label><div ng-repeat="choice in question.choices" class=row><div class=col-sm-10><input ng-model=choice.choiceContent placeholder="Sample answer." class="form-control"></div><div class=col-sm-2><button omni-tap="removeChoice(question, $index)" class=btn><span class="glyphicon glyphicon-trash"></span></button></div></div><div class=row><div class="col-sm-12 pull-left"><button omni-tap=addChoice(question) class="btn btn-primary btn-sm">Add choice</button></div></div></div></div><div class=col-sm-2><button omni-tap=removeQuestion($index) class=btn><span class="glyphicon glyphicon-trash"></span></button></div></div><div class=row><div class="col-sm-12 pull-left"><button omni-tap=addQuestion() class="btn btn-primary">Add question</button></div></div></div></div><div class=row><div class=col-sm-12><button type=button ng-click=addNewSurvey(surveyForm) class="pull-right btn btn-primary">Submit</button></div></div></form></div>'),a.put("app/admin/components/survey/surveyManagement.html",'<div class=row><div class=col-sm-12><h2>Surveys</h2></div></div><div class=row><div class=col-sm-12><ul ng-controller=SurveyCtrl class=list-group><li class=list-group-item><div class=row><div class=col-sm-8><input ng-model=search placeholder=Search ng-change="updateFiltered()"> in<select ng-model=searchType ng-options="opt.value as opt.name for opt in searchTypes"></select></div><div class="col-sm-4 pages"><span omni-tap=page(-1) class=prevPage>&lt;</span><span>{{currentPage}}/{{maxPage}}</span><span omni-tap=page(1) class=nextPage>&gt;</span></div></div></li><li ng-if="surveys.length &gt; 0" class=list-group-item><div class=row><div ng-click="sortFactor = &quot;name&quot;" class=col-sm-3><strong>Survey Name</strong></div><div ng-click="sortFactor = &quot;key&quot;" class=col-sm-3><strong>Number Questions</strong></div><div class=col-sm-3><strong>Active?</strong></div><div class=col-sm-3><span class=pull-right>Enable/Disable</span></div></div></li><li ng-repeat="survey in filtered | startAt:((currentPage-1)*lim) | limitTo: lim" class=list-group-item><div ng-class="{expired: !survey.active}" class="row survey"><div class="col-sm-3 email">{{survey.name}}</div><div class="col-sm-3 key">{{survey.questions.length}}</div><div class="col-sm-3 approved">{{survey.active}}</div><div class="col-sm-3 claimed"><span ng-click=disableSurvey(survey._id) ng-if=survey.active class=delete><span title=Disable class="glyphicon glyphicon-ok-circle greenText"></span></span><span ng-click=enableSurvey(survey._id) ng-if=!survey.active class=delete><span title=Enable class="glyphicon glyphicon-remove-circle"></span></span></div></div></li><li class=list-group-item><div class=row><div class=col-sm-12>Add Survey&nbsp;<span><a omni-tap=addSurveyModal()><span class="glyphicon glyphicon-plus pull-left"></span></a></span></div></div></li></ul></div></div>'),a.put("app/admin/components/user/userManagement.html",'<div class=row><div class=col-sm-12><h2>Users</h2></div></div><div class=row><div class=col-sm-12><ul ng-controller=UserManageCtrl class=list-group><li class=list-group-item><div class=row><div class=col-sm-4><input ng-model=userSearch placeholder=Search ng-change="updateFilteredUsers()"> in<select ng-model=userSearchType ng-options="opt.value as opt.name for opt in userSearchTypes"></select></div><div class=col-sm-4>Order by:<select ng-model=orderField ng-options="opt.value as opt.name for opt in orderTypes" ng-change="userCurrentPage=1"></select></div><div class="col-sm-4 pages"><span omni-tap=userPage(-1) class=prevPage>&lt;</span><span>{{userCurrentPage}}/{{userMaxPage}}</span><span omni-tap=userPage(1) class=nextPage>&gt;</span></div></div></li><li ng-repeat="user in filteredUsers | orderBy:orderField | startAt:((userCurrentPage-1)*userLim) | limitTo: userLim" class=list-group-item><strong>{{user.name}}</strong><span>&nbsp;-&nbsp;</span><span class=text-muted>{{user.email}}</span><a omni-tap=delete(user) class=trash><span class="glyphicon glyphicon-trash pull-right"></span></a><br><span>Subjects:&nbsp;</span><span>{{subjectString(user.subjects)}}</span><div ng-if="user.academicRole===\'Teacher\'"><span>Subjects Taught:&nbsp;</span><span></span>{{subjectString(user.subjectsTaught)}}<a omni-tap=addSubjectsTaughtModal(user) class=trash><span class="glyphicon glyphicon-plus pull-right"></span></a></div><div ng-hide=user.roleChanging><span>Role:</span><span omni-tap="user.roleChanging = true; user.newRole = {name: user.role}" class="text-muted editable">{{user.role}}</span><span class="glyphicon glyphicon-pencil edit"></span></div><div ng-show=user.roleChanging><span>Role:</span><select ng-model=user.newRole ng-options="role for role in roles" ng-change=modifyRole(user) ng-init="user.newRole = roles[0]"></select></div><div><span>Last logged in:</span><span>{{parseDate(user.lastLogin)}}</span></div></li><li class=list-group-item>Add User&nbsp;<span><a omni-tap=addUserModal()><span class="glyphicon glyphicon-plus pull-left"></span></a></span></li></ul></div></div>'),a.put("app/admin/examEdit/examEdit.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container-fluid><div class=row><div class=col-sm-2><a href=admin><span class="glyphicon glyphicon-chevron-left"></span>Back</a></div><div class=col-sm-8></div><div class=col-sm-2><button omni-tap=saveExam() ng-if=changed class="btn btn-warning"><span class="glyphicon glyphicon-save"></span>Save</button></div></div><div class=row><div class=col-xs-12><h3>Editing {{exam.subject}} exam {{exam.examNumber}}</h3><hr><form><tabset ng-if=exam><tab heading="Section 1 Part 1" ng-if="exam.section1.part1.fullQuestions.length &gt; 0"><ul class=list-group><li ng-repeat="question in exam.section1.part1.fullQuestions" class="list-group-item question"><div class=row><div class=col-sm-2>Question {{$index + 1}}</div><div class=col-sm-8></div><div ng-show=!question.editing class="col-sm-1 text-center"><button omni-tap="question.editing=true" class="btn btn-primary">Edit</button></div><div ng-show=question.editing class="col-sm-1 text-center"><button omni-tap="saveQuestion(question, $index, 1)" class="btn btn-warning">Save</button></div><div class="col-sm-1 text-center"><button omni-tap="delQuestion(question, 1)" class="btn btn-warning"><span class="glyphicon glyphicon-trash"></span></button></div></div><div class=row><div class=col-sm-12><hr></div></div><div class=row><div class=col-sm-6><p mathjax-bind=question.body ng-show=!question.editing></p><textarea ng-model=question.body ng-show=question.editing rows=8 cols=75></textarea></div><div class=col-sm-6><p mathjax-bind=question.explanation.body ng-show=!question.editing></p><textarea ng-model=question.explanation.body ng-show=question.editing rows=8 cols=75></textarea></div></div><div ng-repeat="answer in question.choices" class=row><div class=col-sm-9><p mathjax-bind=answer.body ng-show=!question.editing></p><input ng-model=answer.body ng-show="question.editing"></div><div class=col-sm-3><span ng-show=!question.editing>{{answer.correct}}</span><span ng-show=question.editing ng-init="answer.tempCorrect = ((answer.correct) ? &quot;true&quot; : &quot;false&quot;)"><label class=radio-inline><input type=radio ng-model=answer.tempCorrect value="true">Correct</label><label class=radio-inline><input type=radio ng-model=answer.tempCorrect value="false">Incorrect</label></span></div></div></li></ul></tab><tab heading="Section 1 Part 2" ng-if="exam.section1.part2.fullQuestions.length &gt; 0"><ul class=list-group><li ng-repeat="question in exam.section1.part2.fullQuestions" class="list-group-item question"><div class=row><div class=col-sm-2>Question {{$index + 1}}</div><div class=col-sm-8></div><div ng-show=!question.editing class="col-sm-1 text-center"><button omni-tap="question.editing=true" class="btn btn-primary">Edit</button></div><div ng-show=question.editing class="col-sm-1 text-center"><button omni-tap="saveQuestion(question, $index, 1)" class="btn btn-warning">Save</button></div><div class="col-sm-1 text-center"><button omni-tap="delQuestion(question, 2)" class="btn btn-warning"><span class="glyphicon glyphicon-trash"></span></button></div></div><div class=row><div class=col-sm-12><hr></div></div><div class=row><div class=col-sm-6><p mathjax-bind=question.body ng-show=!question.editing></p><textarea ng-model=question.body ng-show=question.editing rows=8 cols=75></textarea></div><div class=col-sm-6><p mathjax-bind=question.explanation.body ng-show=!question.editing></p><textarea ng-model=question.explanation.body ng-show=question.editing rows=8 cols=75></textarea></div></div><div ng-repeat="answer in question.choices" class=row><div class=col-sm-9><p mathjax-bind=answer.body ng-show=!question.editing></p><input ng-model=answer.body ng-show="question.editing"></div><div class=col-sm-3><span ng-show=!question.editing>{{answer.correct}}</span><span ng-show=question.editing ng-init="answer.tempCorrect = ((answer.correct) ? &quot;true&quot; : &quot;false&quot;)"><label class=radio-inline><input type=radio ng-model=answer.tempCorrect value="true">Correct</label><label class=radio-inline><input type=radio ng-model=answer.tempCorrect value="false">Incorrect</label></span></div></div></li></ul></tab></tabset></form></div></div></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),
a.put("app/contact/contact.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><h1 class="avenir-db text-center">Contact Omninox</h1><p class="lead avenir-light text-center">Want to collaborate with us to solve your content needs? Or do you just want to say hi? We are pretty reachable either way. Just pick your favorite method below.</p><div class=row><div class="col-xs-4 col-sm-2"><a href=mailto:support@omninox.org><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/Icons_email.svg onerror="this.src=&quot;https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/Icons_email.png&quot;;this.onerror=null" class="img-responsive icon"></a></div><div class="col-xs-8 col-sm-4"><p class="subhead text-center avenir-db">Email</p><p class="copy text-center avenir-light"><a href=mailto:support@omninox.org>support@omninox.org</a></p></div><div class="col-sm-2 hidden-xs"><a href=tel:+13523635476><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/Icons_phone.svg onerror="this.src=&quot;https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/Icons_phone.png&quot;;this.onerror=null" class="img-responsive icon"></a></div><div class="col-sm-4 hidden-xs"><p class="subhead text-center avenir-db">Phone</p><p class="copy text-center avenir-light">(352) 363-5476</p></div></div><div class="row visible-xs"><div class=col-xs-4><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/Icons_phone.svg onerror="this.src=&quot;https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/Icons_phone.png&quot;;this.onerror=null" class="img-responsive icon"></div><div class=col-xs-8><p class="subhead text-center avenir-db">Phone</p><p class="copy text-center avenir-light">(352) 363-5476</p></div></div><div class=row><div class="col-xs-4 col-sm-2"><a href=https://www.facebook.com/Omninox><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/Icons_facebook.svg onerror="this.src=&quot;https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/Icons_facebook.png&quot;;this.onerror=null" class="img-responsive icon"></a></div><div class="col-xs-8 col-sm-4"><p class="subhead text-center avenir-db">Facebook</p><p class="copy text-center avenir-light"><a href=https://www.facebook.com/Omninox>Say hi on Facebook</a></p></div><div class="col-sm-2 hidden-xs"><a href=https://www.twitter.com/omniguides><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/Icons_twitter.svg onerror="this.src=&quot;https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/Icons_twitter.png&quot;;this.onerror=null" class="img-responsive icon"></a></div><div class="col-sm-4 hidden-xs"><p class="subhead text-center avenir-db">Twitter</p><p class="copy text-center avenir-light"><a href=https://www.twitter.com/omniguides>@omniguides</a></p></div></div><div class="row visible-xs"><div class=col-xs-4><a href=https://www.twitter.com/omniguides><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/Icons_twitter.svg onerror="this.src=&quot;https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/Icons_twitter.png&quot;;this.onerror=null" class="img-responsive icon"></a></div><div class=col-xs-8><p class="subhead text-center avenir-db">Twitter</p><p class="copy text-center avenir-light"><a href=https://www.twitter.com/omniguides>@omniguides</a></p></div></div><div class=row><div class="col-xs-4 col-sm-2"><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/Icons_chat.svg onerror="this.src=&quot;https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/Icons_chat.png&quot;;this.onerror=null" class="img-responsive icon"></div><div class="col-xs-8 col-sm-4"><p class="subhead text-center avenir-db">Chat</p><p class="copy text-center avenir-light">Click the red box below</p></div><div class="col-sm-2 hidden-xs"><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/Icons_in-person.svg onerror="this.src=&quot;https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/Icons_in-person.png&quot;;this.onerror=null" class="img-responsive icon"></div><div class="col-sm-4 hidden-xs"><p class="subhead text-center avenir-db">In person</p><p class="copy text-center avenir-light"><span>747 SW 2nd Ave</span><br><span>Ste 318 IMB #43</span><br><span>Gainesville, FL 32601</span></p></div></div><div class="row visible-xs"><div class=col-xs-4><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/Icons_in-person.svg onerror="this.src=&quot;https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/Icons_in-person.png&quot;;this.onerror=null" class="img-responsive icon"></div><div class=col-xs-8><p class="subhead text-center avenir-db">In person</p><p class="copy text-center avenir-light"><span>747 SW 2nd Ave</span><br><span>Ste 318 IMB #43</span><br><span>Gainesville, FL 32601</span></p></div></div></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),a.put("app/exam/exam.html","<div ng-include=&quot;components/examPage/examPage.html&quot;></div>"),a.put("app/main/main.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div id=intro-message-container class=container-fluid><div class=visible-xs><h1 class="h1 user-message">I am <span>a...</span><br ng-show="role.name"><br><span ng-show=role.name><u>{{role.name}}</u></span><br ng-show="role.name"><br><span ng-show=role.name>wanting to {{role.verb}}</span><span ng-show="role.subject==\'AP Calculus AB\'">AP Calculus AB&nbsp;</span><span ng-show="role.subject==\'AP Calculus BC\'">AP Calculus BC&nbsp;</span><span ng-show="role.subject==\'AP Psychology\'">AP Psychology&nbsp;</span><span ng-show="role.subject==\'AP Biology\'">AP Biology&nbsp;</span><span ng-show="role.subject==\'AP European History\'">AP European History&nbsp;</span><span ng-show="role.subject==\'AP Physics 1\'">AP Physics 1&nbsp;</span><span ng-show="role.subject==\'AP Physics 2\'">AP Physics 2&nbsp;</span><span ng-show="role.subject==\'AP Chemistry\'">AP Chemistry&nbsp;</span><span ng-show="role.subject==\'AP Statistics\'">AP Statistics&nbsp;</span><span ng-show="role.subject==\'AP Human Geography\'">AP Human Geography&nbsp;</span><span ng-show="role.subject==\'AP US Government\'">AP US Government&nbsp;</span><span ng-show="role.subject==\'AP World History\'">AP World History&nbsp;</span><span ng-show="role.subject==\'AP Environmental Science\'">AP Environmental Science&nbsp;</span></h1><br><div ng-hide=role.name class=bottom-float-buffer><uib-accordion><uib-accordion-group is-open=accordionStatus.teacherPanelOpen panel-class=panel-primary><uib-accordion-heading>Teacher<i ng-class="{\'glyphicon-chevron-down\': accordionStatus.teacherPanelOpen, \'glyphicon-chevron-right\': !accordionStatus.teacherPanelOpen}" class="pull-right glyphicon"></i></uib-accordion-heading><div class=row><div class=col-xs-12><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/teacherIconA.svg class="img-responsive img-xs-benefits pull-left"><p class="lead padding-top-10"><strong>Generate and assign homework</strong> in just a few clicks with quality content</p></div></div><div class=row><div class=col-xs-12><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/teacherIconB.svg class="img-responsive img-xs-benefits pull-left"><p class="lead padding-top-10"><strong>Save time</strong> grading with automatically graded assignments</p></div></div><br><div class=row><div class=col-xs-12><button omni-tap="role.name = \'teacher\'; role.verb = \'teach\'" class="btn btn-lg btn-primary">Start Demo</button></div></div></uib-accordion-group><uib-accordion-group is-open=accordionStatus.studentPanelOpen panel-class=panel-danger><uib-accordion-heading>Student<i ng-class="{\'glyphicon-chevron-down\': accordionStatus.studentPanelOpen, \'glyphicon-chevron-right\': !accordionStatus.studentPanelOpen}" class="pull-right glyphicon"></i></uib-accordion-heading><div class=row><div class=col-xs-12><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/studentIconA.svg class="img-responsive img-xs-benefits pull-left"><p class="lead padding-top-10"><strong>Engage</strong> with your classmates and other students anywhere.</p></div></div><br><div class=row><div class=col-xs-12><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/studentIconB.svg class="img-responsive img-xs-benefits pull-left"><p class="lead padding-top-10"><strong>Get higher scores</strong> when you easily understand your strengths and weaknesses</p></div></div><br><div class=row><div class=col-xs-12><button omni-tap="role.name = \'student\'; role.verb = \'prepare for\'" class="btn btn-lg btn-danger">Start Demo</button></div></div></uib-accordion-group></uib-accordion></div><form ng-model=newAssignment ng-submit=addAssignment(newAssignment) autocomplete=off class="form bottom-float-buffer"><div ng-show="role.name==\'teacher\'" class=form-group><input ng-change=updateTags(newAssignment.teacherSubject) typeahead-on-select=updateTags(newAssignment.teacherSubject) ng-model=newAssignment.teacherSubject placeholder="subject name" uib-typeahead="subject.fullName for subject in subjects | limitTo:8 | filter:$viewValue" class="form-control omni-input text-center"></div><div ng-show="role.name==\'student\'" class=form-group><select ng-change=updateTags(newAssignment.studentSubject) ng-model=newAssignment.studentSubject ng-options="subject.fullName as subject.fullName for subject in subjects" class="form-control omni-input text-center"></select></div><h4 ng-show=role.name class=text-center>specifically...</h4><div ng-show=role.name class="row form-group"><input ng-model=newAssignment.topic placeholder="topic (optional)" uib-typeahead="topic as topic for topic in topics | limitTo: 8 | filter:$viewValue" class="form-control omni-input text-center"></div><div ng-show=role.name class=row><div class=col-sm-4></div><button type=submit class="col-sm-4 btn btn-primary">Go!</button><div class=col-sm-4></div></div></form></div><div class=hidden-xs><h1 class="h1 user-message">I am <span>a...</span><br><br ng-show="role.name"><span ng-show=role.name><u>{{role.name}}</u></span><br><br ng-show="role.name"><span ng-show=role.name>wanting to {{role.verb}}&nbsp;</span><span ng-show="role.subject==\'AP Calculus AB\'">AP Calculus AB&nbsp;</span><span ng-show="role.subject==\'AP Calculus BC\'">AP Calculus BC&nbsp;</span><span ng-show="role.subject==\'AP Psychology\'">AP Psychology&nbsp;</span><span ng-show="role.subject==\'AP Biology\'">AP Biology&nbsp;</span><span ng-show="role.subject==\'AP European History\'">AP European History&nbsp;</span><span ng-show="role.subject==\'AP Physics 1\'">AP Physics 1&nbsp;</span><span ng-show="role.subject==\'AP Physics 2\'">AP Physics 2&nbsp;</span><span ng-show="role.subject==\'AP Chemistry\'">AP Chemistry&nbsp;</span><span ng-show="role.subject==\'AP Statistics\'">AP Statistics&nbsp;</span><span ng-show="role.subject==\'AP Human Geography\'">AP Human Geography&nbsp;</span><span ng-show="role.subject==\'AP US Government\'">AP US Government&nbsp;</span><span ng-show="role.subject==\'AP World History\'">AP World History&nbsp;</span><span ng-show="role.subject==\'AP Environmental Science\'">AP Environmental Science&nbsp;</span></h1><div id=student-teacher ng-hide=role.name><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/demo-call-to-action.svg class="img-responsive demo-start-cta"><div class=row><div id=teacher-side class=col-sm-6><button omni-tap="role.name=\'teacher\'; role.verb=\'teach\'" class="btn btn-lg btn-primary">Teacher</button></div><div id=student-side class=col-sm-6><button omni-tap="role.name=\'student\'; role.verb=\'prepare for\'" class="btn btn-lg btn-danger">Student</button></div></div><br><br><div class="row vertical-align"><div class=col-sm-2><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/teacherIconA.svg class="img-responsive"></div><div class=col-sm-4><p class=lead><strong>Generate and assign homework</strong> in just a few clicks with quality content</p></div><div class=col-sm-2><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/studentIconA.svg class="img-responsive"></div><div class=col-sm-4><p class=lead><strong>Engage</strong> with your classmates and other students anywhere.</p></div></div><div class="row vertical-align"><div class=col-sm-2><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/teacherIconB.svg class="img-responsive"></div><div class=col-sm-4><p class=lead><strong>Save time</strong> grading with automatically graded assignments</p></div><div class=col-sm-2><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/studentIconB.svg class="img-responsive"></div><div class=col-sm-4><p class=lead><strong>Get higher scores</strong> when you easily understand your strengths and weaknesses.</p></div></div></div><form ng-model=newAssignment ng-submit=addAssignment(newAssignment) autocomplete=off class=form><div ng-show="role.name==\'teacher\'" class=form-group><input ng-change=updateTags(newAssignment.teacherSubject) typeahead-on-select=updateTags(newAssignment.teacherSubject) ng-model=newAssignment.teacherSubject placeholder="begin typing subject name" uib-typeahead="subject.fullName for subject in subjects | limitTo:8 | filter:$viewValue" class="form-control omni-input desktop-input"></div><div ng-show="role.name==\'student\'" class=form-group><select ng-change=updateTags(newAssignment.studentSubject) ng-model=newAssignment.studentSubject ng-options="subject.fullName as subject.fullName for subject in subjects" class="omni-input desktop-input"></select></div><h4 ng-show=role.name class=text-center>specifically...</h4><div ng-show=role.name class="row form-group"><input ng-model=newAssignment.topic placeholder="topic (optional)" uib-typeahead="topic as topic for topic in topics | limitTo: 8 | filter:$viewValue" class="form-control omni-input desktop-input"></div><div ng-show=role.name class=row><div class=col-sm-4></div><button type=submit class="col-sm-4 btn btn-primary">Go!</button><div class=col-sm-4></div></div></form></div></div>'),a.put("app/pricing/pricing.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><h1 class="avenir-db text-center"><u>Pay Once for Five Exams</u></h1><h3 class="avenir-db text-center">How we compare to the competition</h3><div class=table-responsive><table class="table table-condensed table-bordered"><tr><th class="h4 avenir-db text-center">Feature</th><th class="h4 avenir-db text-center">Omninox</th><th class="h4 avenir-db text-center">Competition<sup>*</sup></th></tr><tr><td class=avenir-light># of Practice Exams</td><td class="avenir-light success">5 multiple choice</td><td class="avenir-light success">2 full length</td></tr><tr><td class=avenir-light>Instant Feedback</td><td class="avenir-light success">Yes</td><td class=avenir-light>No</td></tr><tr><td class=avenir-light>Detailed Explanations</td><td class="avenir-light success">Yes</td><td class="avenir-light success">Yes</td></tr><tr><td class=avenir-light>Review Book</td><td class=avenir-light>Yes (separate, iPad Only)</td><td class="avenir-light success">Yes (included)</td></tr><tr><td class=avenir-light>Research-backed learning</td><td class="avenir-light success">Yes ¯</td><td class=avenir-light>No</td></tr><tr><td class=avenir-light>Access on all devices</td><td class="avenir-light success">Yes</td><td class=avenir-light>No</td></tr><tr><td class=avenir-light>Customer Support</td><td class="avenir-light success">Yes</td><td class=avenir-light>No</td></tr><tr><td class=avenir-light>Price per subject</td><td class="avenir-light success">$12</td><td class=avenir-light>$14-$20</td></tr><tr><td class=avenir-light><strong>A supportive community</strong></td><td class="avenir-light success">Yes</td><td class=avenir-light>No</td></tr></table></div><p><sup>*</sup> Kaplan, Princeton Review, and Barron\'s AP Test Prep guides</p><p>¯ <a href=http://www.sciencemag.org/content/319/5865/966.abstract>Science Magazine, 2008</a></p><h1 class="avenir-db text-center"><u>More Benefits</u></h1><p class="lead avenir-light benefits text-center">No recurring subscription</p><p class="lead avenir-light benefits text-center">3 day refund if you are unsatisfied</p><p class="lead avenir-light benefits text-center"><a href=/contact>Contact us</a> for class sets or school/district orders</p><p class="lead text-center avenir-db">Go on. Pick your subjects by pressing the buttons below!</p><div class=row><div ng-repeat="subject in subjects" class="col-xs-12 col-sm-6 col-lg-3"><button omni-tap=select(subject) class="lead avenir-db subject-label btn col-xs-offset-1 {{subject.currentClass}}">{{subject.subjectName}}</button></div></div><div style="margin:20px 0 20px 0; text-align-center;width:100%" class="row avenir-light"><div class="col-sm-2 col-md-3 col-lg-4"></div><div class="col-xs-8 col-sm-6 col-md-4 col-lg-3"><input id=coupon-input placeholder="Enter Coupon code" name=couponCode ng-model=couponCode class="omni-input form-control"></div><div class="col-xs-4 col-sm-2 col-md-2 col-lg-1"><button omni-tap=submitCouponCode() class="btn btn-danger">Redeem</button></div><div class="col-sm-2 col-md-3 col-lg-4"></div></div><div class=row><div class="col-xs-12 coupon-message avenir-light">{{couponMessage}}</div></div><div class="h3 avenir-light text-center"><strong>Total</strong>:<span ng-show="discountPercent &gt; 0" style="text-decoration: line-through; color: red">${{totalWithoutDiscount}}</span>&nbsp;${{total}} for a full year of access<span ng-show="discountPercent &gt; 0" style="color: red">(-{{discountPercent}}%)</span></div><div ng-show="numPicked == numFreePicked &amp;&amp; numFreePicked &gt; 0" class="row animated fadeInUp"><div class="col-sm-3 col-lg-4"></div><div class="col-sm-6 col-lg-4"><button omni-tap=redeemFree() ng-disabled=freeBtnDisabled class="btn btn-danger center full-width redeem-button"><h3 class=avenir-db>Redeem Free Subject</h3></button><span us-spinner=us-spinner spinner-key=spinner-free spinner-start-active=false></span></div><div class="col-sm-3 col-lg-4"></div></div><div ng-show=total&gt;0 class="row animated fadeInUp"><div class=col-lg-1></div><div class="col-sm-5 col-lg-4"><button omni-tap=showCCForm() ng-disabled=paypalProcessing class="btn btn-danger center full-width"><h3 class=avenir-db>Checkout<sup>*</sup><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/icon_shopping-cart.svg onerror="this.src=&quot;https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/icon_shopping-cart.png&quot;;this.onerror=null" class="cart"></h3></button></div><div class="col-sm-2 col-lg-2"></div><div class="col-sm-5 col-lg-4"><br class="visible-xs"><p class="avenir-db lead text-center">Or checkout with</p><span us-spinner=us-spinner spinner-key=spinner-paypal spinner-start-active=false></span><div id=paypal-btn></div></div><div class=col-lg-1></div><br><div class=row><div class="col-sm-12 avenir-light"><br><p class=text-center><sup>*</sup> We use industry standard encryption to protect our visitors, so you can rest assured that your sensitive information is safe.</p></div></div></div></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),a.put("app/privacy/privacy.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class="container avenir-light"><html>This Privacy Policy governs the manner in which Omninox Corp collects, uses, maintains and discloses information collected from users (each, a "User") of the <a href=www.omninox.org>www.omninox.org</a> website ("Site"). This privacy policy applies to the Site and all products and services offered by Omninox Corp.<br><br><b>Personal identification information</b><br><br>We may collect personal identification information from Users in a variety of ways, including, but not limited to, when Users visit our site, register on the site, place an order, subscribe to the newsletter, respond to a survey, fill out a form, and in connection with other activities, services, features or resources we make available on our Site. Users may be asked for, as appropriate, name, email address, phone number, credit card information. Users may, however, visit our Site anonymously. We will collect personal identification information from Users only if they voluntarily submit such information to us. Users can always refuse to supply personally identification information, except that it may prevent them from engaging in certain Site related activities.<br><br><b>Non-personal identification information</b><br><br>We may collect non-personal identification information about Users whenever they interact with our Site. Non-personal identification information may include the browser name, the type of computer and technical information about Users means of connection to our Site, such as the operating system and the Internet service providers utilized and other similar information.<br><br><b>Web browser cookies</b><br><br>Our Site may use "cookies" to enhance User experience. User\'s web browser places cookies on their hard drive for record-keeping purposes and sometimes to track information about them. User may choose to set their web browser to refuse cookies, or to alert you when cookies are being sent. If they do so, note that some parts of the Site may not function properly.<br><br><b>How we use collected information</b><br><br>Omninox Corp may collect and use Users personal information for the following purposes:<br><ul><li><i>- To improve customer service</i><br>Information you provide helps us respond to your customer service requests and support needs more efficiently.</li><li><i>- To personalize user experience</i><br>We may use information in the aggregate to understand how our Users as a group use the services and resources provided on our Site.</li><li><i>- To improve our Site</i><br>We may use feedback you provide to improve our products and services.</li><li><i>- To process payments</i><br>We may use the information Users provide about themselves when placing an order only to provide service to that order. We do not share this information with outside parties except to the extent necessary to provide the service.</li><li><i>- To run a promotion, contest, survey or other Site feature</i><br>To send Users information they agreed to receive about topics we think will be of interest to them.</li><li><i>- To send periodic emails</i><br>We may use the email address to send User information and updates pertaining to their order. It may also be used to respond to their inquiries, questions, and/or other requests. If User decides to opt-in to our mailing list, they will receive emails that may include company news, updates, related product or service information, etc. If at any time the User would like to unsubscribe from receiving future emails, we include detailed unsubscribe instructions at the bottom of each email.</li></ul><b>How we protect your information</b><br><br>We adopt appropriate data collection, storage and processing practices and security measures to protect against unauthorized access, alteration, disclosure or destruction of your personal information, username, password, transaction information and data stored on our Site.<br><br><b>Sharing your personal information</b><br><br>We do not sell, trade, or rent Users personal identification information to others. We may share generic aggregated demographic information not linked to any personal identification information regarding visitors and users with our business partners, trusted affiliates and advertisers for the purposes outlined above.We may use third party service providers to help us operate our business and the Site or administer activities on our behalf, such as sending out newsletters or surveys. We may share your information with these third parties for those limited purposes provided that you have given us your permission.<br><br><b>Third party websites</b><br><br>Users may find advertising or other content on our Site that link to the sites and services of our partners, suppliers, advertisers, sponsors, licensors and other third parties. We do not control the content or links that appear on these sites and are not responsible for the practices employed by websites linked to or from our Site. In addition, these sites or services, including their content and links, may be constantly changing. These sites and services may have their own privacy policies and customer service policies. Browsing and interaction on any other website, including websites which have a link to our Site, is subject to that website\'s own terms and policies.<br><br><b>Changes to this privacy policy</b><br><br>Omninox Corp has the discretion to update this privacy policy at any time. When we do, we will send you an email. We encourage Users to frequently check this page for any changes to stay informed about how we are helping to protect the personal information we collect. You acknowledge and agree that it is your responsibility to review this privacy policy periodically and become aware of modifications.<br><br><b>Your acceptance of these terms</b><br><br>By using this Site, you signify your acceptance of this policy. If you do not agree to this policy, please do not use our Site. Your continued use of the Site following the posting of changes to this policy will be deemed your acceptance of those changes.<br><br><b>Contacting us</b><br><br>If you have any questions about this Privacy Policy, the practices of this site, or your dealings with this site, please contact us at:<br><a href=www.omninox.org>Omninox Corp</a><br><a href=www.omninox.org>www.omninox.org</a><br>747 SW 2nd Ave Ste. 318 IMB #43 Gainesville, FL 32601<br>support@omninox.org<br><br>This document was last updated on January 29, 2014<br><br><div style=font-size:10px;color:gray>Privacy policy created by <a style=font-size:10px;color:gray;text-decoration:none;cursor:default href=http://www.generateprivacypolicy.com target=_blank>Generate Privacy Policy</a></div></html></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),a.put("app/resources/resources.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class="container-fluid no-margin"><div class="row paper-background hero-unit avenir-mid"><div class=col-sm-12><div class=row><div class=col-sm-12><h2 class=text-center>AP<sup>&reg;</sup> Exam Resources</h2></div></div><div class=row><div class=col-sm-3></div><div class=col-sm-6><p class="lead text-center">Improve your success on the AP Exam by using our free resources. From interactive equation sheet to engaging widgets, our resources will ensure you are AP prepped.</p></div><div class=col-sm-3></div></div></div></div><div class="row avenir-light padded"><div class=col-sm-3></div><div class="col-sm-2 resourcesImage"><div class=row><div omni-link=resources/APPhys class=col-sm-12><img src=assets/images/APPhysResources.svg alt="AP Physics 1 Resources" class="img-responsive"></div></div><div class=row><div class="col-sm-12 text-center subjectLabel">AP Physics 1</div></div></div><div class="col-sm-2 disabled resourcesImage"><div class=disabler><p class=comingSoon>Coming Soon!</p></div><div class=row><div class=col-sm-12><img src=assets/images/APCalcResources.svg alt="AP Calculus Resources" class="img-responsive"></div></div><div class=row><div class="col-sm-12 text-center subjectLabel">AP Calculus AB</div></div></div><div class="col-sm-2 disabled resourcesImage"><div class=disabler><p class=comingSoon>Coming Soon!</p></div><div class=row><div class=col-sm-12><img src=assets/images/APStatResources.svg alt="AP Statistics Resources" class="img-responsive"></div></div><div class=row><div class="col-sm-12 text-center subjectLabel">AP Statistics</div></div></div><div class=col-sm-3></div></div></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),a.put("app/resources/subjects/APPhys/APPhys.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div ng-controller=ResourcesAPPhysCtrl class="container-fluid paper-background no-margin"><div class=row><div class=col-sm-3></div><div class="col-sm-6 text-center avenir-md"><h2>AP Physics 1 Resources</h2></div><div class=col-sm-3></div></div><div class=row><div class=col-sm-4></div><div class=col-sm-2><img src=assets/images/APPhysEquations.svg alt="AP Physics 1 Formula Sheet" class="img-responsive"></div><div class="col-sm-3 avenir-light padded"><div class=row><div class=col-sm-12><h4>AP Physics 1 Formula Sheet</h4></div></div><div class=row><div class=col-sm-12><p>Don\'t know which Kinematic equation to use? Torque equation? Vectors? Let our formula chart help you make the right choice.</p></div></div><div class=row><div class=col-sm-12><a omni-link=resources/APPhys/equations>View the formula sheet</a></div></div></div><div class=col-sm-3></div></div></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),a.put("app/resources/subjects/APPhys/equations.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div ng-controller=ResourcesAPPhysEquationsCtrl class="container-fluid paper-background no-margin"><div class=row><div class="col-sm-12 text-center"><h1>AP Physics 1 Formula Sheet</h1></div></div><div class=row><div class=col-sm-5></div><div class=col-sm-2><img src=assets/images/APPhysEquations.svg alt="AP Physics 1 Formula Sheet" class="img-responsive"></div><div class=col-sm-5></div></div><div class=row><div class=col-sm-3></div><div class=col-sm-6><accordion class=equationList><accordion-group ng-repeat="item in equationList" heading={{item.subtopic}}><div ng-repeat="equation in item.equations" class="row equationRow"><div class=col-sm-4><p mathjax-bind=equation.eq></p></div><div class=col-sm-8><p mathjax-bind=equation.desc></p></div></div></accordion-group></accordion></div><div class=col-sm-3></div></div></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),a.put("app/student/classroom/assignment/assignment.html",'<div id=exam-nav class="row navbar navbar-default navbar-fixed-top"><div id=return-column class=col-xs-7><a ng-href={{classURL}}><span ng-class="{\'text-muted\':!preExam &amp;&amp; !examSubmit}" class="fa fa-arrow-left"></span></a></div><div class=col-xs-5><div id=score ng-if="examSubmit &amp;&amp; percentages">({{numCorrect}}/{{numGraded}}) {{percentages | number: 1}}%<span ng-if="numUngraded &gt; 0">with {{numUngraded}} still left to grade.</span></div></div></div><div id=exam-container ng-class="examSubmit ? \'border-right border-left\' : \'\'" class=container><div ng-if=preExam class="hero-unit avenir-light paper-background"><h2 ng-if=instructions>Instructions</h2><br><p id=instructions>You are about to take {{assignment.name}}</p><br><form ng-if=!currentUser._id ng-model=newUser><div class="form-group row"><div class=col-sm-4><label for=userName>Name:</label></div><div class=col-sm-4><input id=userName placeholder="Please enter your name." ng-model="newUser.name"></div><div class=col-sm-4></div></div><div class="form-group row"><div class=col-sm-4><label for=period>Period/Class Number:</label></div><div class=col-sm-4><input id=period maxlength=2 ng-model="newUser.period"></div></div></form><button omni-tap=startExam() smooth-scroll=smooth-scroll target=#top speed=500 class="avenir-light btn btn-danger shadowed btn-lg">Start</button></div><div ng-repeat="question in questions" class="row padding-bottom"><div class=col-sm-12><div class=row><div ng-if=!examSubmit class="col-lg-2 col-md-1"></div><div ng-if=!preExam ng-class="examSubmit?\'col-md-8 border-right\':\'col-lg-8 col-md-10\'"><div class="form-group row"><div class=col-xs-1><h4>Q{{$index+1}}&nbsp;</h4></div><div class=col-xs-11><div ng-bind-html=question.body class=question-body></div></div></div><div ng-show="question.type!==&quot;mult&quot;" class="form-group row"><div class=col-xs-1></div><div class=col-xs-10><textarea ng-show="question.type==&quot;long&quot;" rows=5 style=width:100% ng-model=question.response placeholder="Your response here." ng-disabled=examSubmit></textarea><input ng-show="question.type==&quot;short&quot;" style=width:100% ng-model=question.response placeholder="Your response here." ng-disabled="examSubmit"></div></div><div ng-show="question.type==&quot;mult&quot; || !question.type" class="form-group row"><div class=col-xs-1></div><ul class="col-xs-11 choices-container"><li ng-repeat="choice in question.choices" ng-class="{green: (choice.correct &amp;&amp; examSubmit), highlighted: question.studentResponse.body === choice.body}" class=row><div class=col-xs-1><input type=radio ng-disabled=examSubmit ng-value=choice ng-model=question.response id={{question._id}}{{$index}} name={{question._id}} ng-if=hasOneCorrect(question.choices) ng-change="storeQuestionContext(question,this)"><input type=checkbox ng-disabled=examSubmit ng-true-value={{choice}} ng-model=question.response[$index] id={{question._id}}{{$index}} name={{question._id}}[] ng-if=!hasOneCorrect(question.choices) ng-change="storeQuestionContext(question,this)"></div><div class=col-xs-11><label mathjax-bind=choice.body for={{question._id}}{{$index}} class=col-xs-11></label></div></li></ul></div></div><div ng-if=!examSubmit class="col-lg-2 col-md-1"></div><div ng-if="!preExam &amp;&amp; examSubmit" class="col-md-4 border-left"><div class="row explanation-container"><div class="col-xs-1 visible-xs visible-sm"></div><div class="col-xs-11 col-md-12"><p ng-if="question.type==&quot;mult&quot;" ng-class="{\'text-success\':question.correct, \'text-danger\':!question.correct}" class=text-bold>{{question.correct? \'Correct\': (question.correct===false ? \'Incorrect\':\'Not Answered\')}}</p><p ng-if="question.type!==&quot;mult&quot;" class="text-bold text-warning">Not graded</p><p ng-if=currentUser._id mathjax-bind=question.explanation.body></p><p ng-hide=currentUser._id><a ng-click=triggerSignup()>Sign up</a> to view explanations!</p></div></div></div></div><hr ng-if="examSubmit"></div></div><div ng-hide="preExam || examSubmit" class="row button-container"><div class="col-xs-1 col-sm-2 col-md-3 col-lg-4"></div><div class="col-xs-10 col-sm-8 col-md-6 col-lg-4"><button smooth-scroll=smooth-scroll target=#top speed=3000 type=button omni-tap=submitExam() class="avenir-light btn btn-danger shadowed btn-lg">Submit Test</button></div><div class="col-xs-1 col-sm-2 col-md-3 col-lg-4"></div></div></div>'),
a.put("app/student/classroom/classroom.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><div class=row><div class=col-sm-12><h1><span omni-link=/student class=btn-link>My Classrooms</span><span>&nbsp;&gt;&nbsp;</span><span class=btn-link>{{classroom.name}}</span></h1></div></div><div class="row avenir-db"><div class=col-sm-6><div class="row studentTitle"><div class=col-sm-12><h2>Recent Messages</h2></div></div><div class=row><div scroll-top-on=messages_updated class="col-sm-12 teacher-chat-log"><table class="activityTable table table-hover avenir-light"><tr><th>Date</th><th>Message</th></tr><tr ng-repeat="message in classroom.messages | orderBy: \'-date\' track by $index" ng-init="message.isToday = checkIfToday(message.date)"><td ng-if=!message.isToday>{{message.date | date : \'mediumDate\' }}</td><td ng-if=message.isToday>{{message.date | date : \'shortTime\' }}</td><td>{{message.authorName}}: {{message.message}}</td></tr></table></div></div><div class=row><div class="col-sm-12 teacher-chat-container"><form class=teacher-chat><div class=teacher-chat-input><input ng-model=newMessage placeholder="Send a message to your class!" class="chatbox"><button ng-click=addMessage() class=btn-send>Send</button></div></form></div></div></div><div class=col-sm-6><div class="row studentTitle"><div class=col-sm-12><h2>Grades</h2></div></div><div class="row studentContent"><div class=col-sm-12><table class="table table-hover"><tr><th>Name</th><th>Grade</th></tr><tr ng-repeat="assignment in old track by $index"><td omni-tap=goToAssignment(assignment)>Review {{assignment.name}}</td><td ng-if="assignment.submission.fullyGraded &amp;&amp; assignment.canView">{{(100 * assignment.submission.score) | number:1}}%</td><td ng-hide=assignment.canView><button ng-click=peerGrade(assignment.code) class="btn btn-default">Grade {{5 - myPeerGrades[assignment.code].length}} more to see your grade!</button></td><td ng-if="!assignment.submission.fullyGraded &amp;&amp; assignment.canView">Waiting on classmates to grade your submission.</td></tr><tr ng-if="!old || old.length == 0"><td colspan=3>No grades yet!</td></tr></table></div></div></div></div><div class="row avenir-db"><div class=col-sm-12><div class="row studentTitle"><div class=col-sm-12><h2>Assignments</h2></div></div><div class="row studentContent"><div class=col-sm-12><table class="table table-hover"><tr><th>Name</th><th>Due Date</th><td></td></tr><tr ng-repeat="assignment in new track by $index" ng-init="assignment.passed = hasPassed(assignment)"><td>{{assignment.name}}</td><td>{{assignment.dueDate | date: \'short\'}}</td><td><btn ng-hide=assignment.passed omni-tap=goToAssignment(assignment) class="btn btn-primary">Take now!</btn></td></tr><tr ng-if="!new || new.length == 0"><td colspan=2>You\'re all caught up!</td></tr></table></div></div></div></div></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),a.put("app/student/classroom/peerGradeModal.html",'<div class=container><div class=row><div class=col-sm-6><div class=row><div class=col-sm-12><p mathjax-bind=question.body></p></div></div><div class=row><hr></div><div class=row><div class=col-sm-12><p mathjax-bind=response></p></div></div></div><div class=col-sm-6><div class=row><div class=col-sm-12><p mathjax-bind=question.answer></p><hr><p mathjax-bind=question.explanation></p></div></div></div></div><div class=row><hr></div><div class=row><form ng-submit=submitPeerGrade() class=col-sm-12><div ng-repeat-start="question in questions" class=row><div class=col-sm-12><h4>Question:</h4><p mathjax-bind=question.body></p></div><div class=row><div class=col-sm-6><h4>Classmate\'s Response:</h4><p mathjax-bind=responses[question._id]></p></div><div ng-if="question.type===&quot;long&quot;" class=col-sm-6><h4>Question Explanation:</h4><p mathjax-bind=question.explanation.body></p></div><div ng-if="question.type===&quot;short&quot;" class=col-sm-6><div class=row><div class=col-sm-12><h4>Question Answer:</h4><p mathjax-bind=question.answer></p></div><div class=col-sm-12><h4>Question Explanation:</h4><p mathjax-bind=question.explanation.body></p></div></div></div></div></div><br><br><div ng-if="question.type==&quot;long&quot;" class=row><div class=col-sm-6><p><strong>How many points did this answer earn? (Out of {{question.value}})</strong></p></div><div class=col-sm-6><input type=number ng-model=grades[question._id] min=0 max={{question.value}} placeholder=Score class="enter-score-input"></div></div><div ng-if="question.type==&quot;short&quot;" class=row><div class=col-sm-6><p><strong>Was this response correct?</strong></p></div><div class=col-sm-3><input type=radio ng-value=false ng-model="grades[question._id]">No</div><div class=col-sm-3><input type=radio ng-value=true ng-model="grades[question._id]">Yes</div></div><div ng-repeat-end=ng-repeat-end class=row><div class=col-sm-12><hr></div></div><div class=row><div class="col-sm-12 text-center"><button type=submit class="btn btn-primary">Submit!</button></div></div></form></div></div>'),a.put("app/student/practice/practice.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=row><div class=col-xs-7></div><div class=col-xs-5><div id=score ng-if="examSubmit &amp;&amp; percentages">({{numCorrect}}/{{numGraded}}) {{percentages | number: 1}}%</div></div></div><div id=exam-container ng-hide=examSubmit class=container><div class="row padding-bottom"><div class=col-sm-12><div class=row><div ng-if=!examSubmit class="col-lg-2 col-md-1"></div><div ng-class="examSubmit?\'col-md-8 border-right\':\'col-lg-8 col-md-10\'"><div class="form-group row"><div class=col-xs-1><h4>{{activeQuestion+1}}/{{questions.length}}</h4></div><div class=col-xs-11><div mathjax-bind=questions[activeQuestion].body class=question-body></div></div></div><div ng-if="questions[activeQuestion].type!==&quot;mult&quot;" class="form-group row"><div class=col-xs-1></div><div class=col-xs-10><textarea ng-if="questions[activeQuestion].type==&quot;long&quot;" rows=5 style=width:100% ng-model=questions[activeQuestion].response placeholder="Your response here." ng-disabled=examSubmit></textarea><input ng-if="questions[activeQuestion].type==&quot;short&quot;" style=width:100% ng-model=questions[activeQuestion].response placeholder="Your response here." ng-disabled="examSubmit"></div></div><div ng-if="questions[activeQuestion].type==&quot;mult&quot;" class="form-group row"><div class=col-xs-1></div><ul class="col-xs-11 choices-container"><li ng-repeat="choice in questions[activeQuestion].choices" ng-class="{green: (choice.correct &amp;&amp; examSubmit)}" class=row><div class=col-xs-1><input type=radio ng-disabled=examSubmit ng-value=choice ng-model=questions[activeQuestion].response id={{questions[activeQuestion]._id}}{{$index}} name={{questions[activeQuestion]._id}} ng-if=hasOneCorrect(questions[activeQuestion].choices) ng-change="storeQuestionContext(questions[activeQuestion],this)"><input type=checkbox ng-disabled=examSubmit ng-true-value={{choice}} ng-model=questions[activeQuestion].response[$index] id={{questions[activeQuestion]._id}}{{$index}} name={{questions[activeQuestion]._id}}[] ng-if=!hasOneCorrect(questions[activeQuestion].choices) ng-change="storeQuestionContext(questions[activeQuestion],this)"></div><div class=col-xs-11><label mathjax-bind=choice.body for={{questions[activeQuestion]._id}}{{$index}} class=col-xs-11></label></div></li></ul></div></div><div ng-if=!examSubmit class="col-lg-2 col-md-1"></div></div></div></div><div ng-hide=examSubmit class="row button-container"><div class="col-sm-6 text-center"><button ng-hide="activeQuestion==0" ng-click=prev() class="btn btn-sm"><span class="glyphicon chevron-left"></span>Previous question</button></div><div class="col-sm-6 text-center"><button ng-hide="activeQuestion==(questions.length-1)" ng-click=next() class="btn btn-sm"><span class="glyphicon chevron-right"></span>Next question</button><button ng-show="activeQuestion==(questions.length-1)" ng-click=submitExam() class="btn btn-sm"><span class="glyphicon chevron-right"></span>Submit!</button></div></div></div><div id=exam-container ng-if=examSubmit class="container border-right border-left"><div ng-repeat="question in questions" class="row padding-bottom"><div class=col-sm-12></div><div class=row><div ng-if=!examSubmit class="col-lg-2 col-md-1"></div><div class="col-md-8 border-right"><div class="form-group row"><div class=col-xs-1><h4>Q{{$index+1}}&nbsp;</h4></div><div class=col-xs-11><div mathjax-bind=question.body class=question-body></div></div></div><div ng-if="question.type!==&quot;mult&quot;" class="form-group row"><div class=col-xs-1></div><div class=col-xs-10><textarea ng-if="question.type==&quot;long&quot;" rows=5 style=width:100% ng-model=question.response placeholder="Your response here." ng-disabled=examSubmit></textarea><input ng-if="question.type==&quot;short&quot;" style=width:100% ng-model=question.response placeholder="Your response here." ng-disabled="examSubmit"></div></div><div ng-if="question.type==&quot;mult&quot;" class="form-group row"><div class=col-xs-1></div><ul class="col-xs-11 choices-container"><li ng-repeat="choice in question.choices" ng-class="{green: (choice.correct &amp;&amp; examSubmit)}" class=row><div class=col-xs-1><input type=radio ng-disabled=examSubmit ng-value=choice ng-model=question.response id={{question._id}}{{$index}} name={{question._id}} ng-if=hasOneCorrect(question.choices) ng-change="storeQuestionContext(question,this)"><input type=checkbox ng-disabled=examSubmit ng-true-value={{choice}} ng-model=question.response[$index] id={{question._id}}{{$index}} name={{question._id}}[] ng-if=!hasOneCorrect(question.choices) ng-change="storeQuestionContext(question,this)"></div><div class=col-xs-11><label mathjax-bind=choice.body for={{question._id}}{{$index}} class=col-xs-11></label></div></li></ul></div></div><div class="col-md-4 border-left"><div class="row explanation-container"><div class="col-xs-1 visible-xs visible-sm"></div><div class="col-xs-11 col-md-12"><p ng-if="question.type==&quot;mult&quot;" ng-class="{\'text-success\':question.correct, \'text-danger\':!question.correct}" class=text-bold>{{question.correct? \'Correct\': (question.correct===false ? \'Incorrect\':\'Not Answered\')}}</p><p ng-if="question.type!==&quot;mult&quot;" class="text-bold text-warning">Not graded</p><p ng-if=currentUser._id mathjax-bind=question.explanation.body></p><p ng-hide=currentUser._id><a ng-click=triggerSignup()>Sign up</a> to view explanations!</p></div></div></div></div><hr ng-if="examSubmit"></div></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),a.put("app/student/student.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><div class="row avenir-db"><div class=col-sm-6><div class="row studentTitle"><div class=col-sm-12><h2>Recent Messages</h2></div></div><div class=row><div scroll-top-on=messages_updated class="col-sm-12 teacher-chat-log"><table class="activityTable table table-hover avenir-light"><tr><th>Date</th><th>Message</th></tr><tr ng-repeat="message in messages | orderBy: \'-date\' track by $index" ng-init="message.isToday = checkIfToday(message.date)"><td ng-if=!message.isToday>{{message.date | date : \'mediumDate\' }}</td><td ng-if=message.isToday>{{message.date | date : \'shortTime\' }}</td><td>{{message.authorName}}: {{message.message}}</td></tr></table></div></div></div><div class=col-sm-6><div class="row studentTitle"><div class=col-sm-12><h2>Assignments</h2></div></div><div class="row studentContent"><div class=col-sm-12><table class="table table-hover"><tr><th>Name</th><th>Subject</th><th>Due Date</th></tr><tr ng-repeat="assignment in assignments track by $index"><td>{{assignment.name}}</td><td>{{assignment.subject.fullName}}</td><td>{{assignment.dueDate | date: \'short\'}}</td></tr><tr ng-if="!assignments || assignments.length == 0"><td colspan=3>You\'re all caught up!</td></tr></table></div></div></div></div><div class="row avenir-db"><div class=col-sm-1></div><div class=col-sm-10><h2>Classrooms</h2></div><div class=col-sm-1></div></div><div class="row avenir-db"><div class=col-sm-12><table class="table table-hover"><tr><th>Name</th><th>Subject</th></tr><tr ng-repeat="class in classrooms track by $index" omni-tap=goToClass(class)><td class=btn-link>{{class.name}}</td><td>{{class.subject.fullName}}</td></tr><tr><td colspan=3 omni-tap=signUpForClass()><form ng-model=signUpClass ng-submit=signUp(signUpClass) class="form form-inline"><div class=form-group><label for=classCode>Enter a class code to add a new class:</label><input id=classCode ng-model=signUpClass.code placeholder="Class Code" ng-required="true"></div><div class=form-group><button type=submit class="btn btn-primary">Sign up!</button></div></form></td></tr></table></div></div></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),a.put("app/teacher/addAssignmentModal.html",'<div class="container-fluid avenir-db"><div class=row><div class=col-sm-12><h1>Add a new assignment</h1></div></div><div class=row><form ng-model=newAssignment ng-submit=addAssignment(newAssignment) autocomplete=off class="col-sm-12 form"><div class="form-group row"><div class=col-sm-4><label for=assignmentName>Assignment Name</label></div><div class=col-sm-8><input id=assignmentName ng-model=newAssignment.name placeholder="Assignment name" ng-required=true maxlength=30 class="form-control"></div></div><div class="form-group row"><div class=col-sm-4><label for=assignmentSubject>Subject</label></div><div class=col-sm-8><ui-select ng-model=newAssignment.subject theme=bootstrap style=min-width:100% ng-change=updateTags(newAssignment.subject)><ui-select-match placeholder="Enter subject">{{$select.selected.fullName}}</ui-select-match><ui-select-choices repeat="subject in subjects | filter:$select.search.fullName"><div ng-bind-html="subject.fullName | highlight: $select.search.fullName"></div></ui-select-choices></ui-select></div></div><div class="form-group row"><div class=col-sm-4><label for=assignmentTopic>Main Topic</label></div><!--.col-sm-8--><!--  input.form-control#assignmentTopic(ng-model="newAssignment.topic", uib-typeahead="topic for topic in topics | filter:$viewValue | limitTo:8")--><div class=col-sm-8><ui-select ng-model=newAssignment.topic theme=bootstrap style=min-width:100%><ui-select-match placeholder="Enter main topic">{{$select.selected}}</ui-select-match><ui-select-choices repeat="topic in topics | filter:$select.search | limitTo:8"><div ng-bind-html="topic | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class="form-group row"><div class=col-sm-4><label for=assignmentNumberQuestions>Number of Questions</label></div><div class=col-sm-8><input id=assignmentNumberQuestions type=number ng-model=newAssignment.questionNumber ng-required=true class="form-control"></div></div><div class="row text-center"><div class=col-sm-12><button type=submit class="btn btn-primary">Create Assignment</button></div></div></form></div></div>'),a.put("app/teacher/addClassModal.html",'<div class=container-fluid><div class=row><div class=col-sm-12><h1>Add a new classroom</h1></div></div><div class=row><form ng-model=newClass ng-submit=addClass(newClass) class="form col-sm-12"><div class="form-group row"><div class=col-sm-1></div><label for=className class=col-sm-3>Classroom name</label><input id=className ng-model=newClass.name placeholder="Class name" ng-required=true class="col-sm-7"><div class=col-sm-1></div></div><div class="form-group row"><div class=col-sm-1></div><label for=classSubject class=col-sm-3>Subject</label><!--select.col-sm-7#classSubject(ng-model="newClass.subject", ng-options="subject as subject.fullName for subject in subjects", ng-required="true")--><div class=col-sm-7><ui-select ng-model=newClass.subject theme=bootstrap style=min-width:100%><ui-select-match placeholder="Enter subject">{{$select.selected.fullName}}</ui-select-match><ui-select-choices repeat="subject in subjects | filter:$select.search"><div ng-bind-html="subject.fullName | highlight: $select.search"></div></ui-select-choices></ui-select></div><div class=col-sm-1></div></div><div class="form-group row"><div class=col-sm-1></div><label for=classStudents class=col-sm-3>Students</label><textarea id=classStudents ng-model=newClass.studentString placeholder="Add students by their e-mail, separated by commas." class=col-sm-7></textarea><div class=col-sm-1></div></div><div class="row text-center"><div class=col-sm-12><button type=submit class="btn btn-primary">Add new classroom</button></div></div></form></div></div>'),a.put("app/teacher/administerAssignmentModal.html",'<div class="container-fluid avenir-db"><div class=row><div class=col-sm-12><h1>Assigning {{administer.assignment.name}}</h1></div></div><form ng-model=administer ng-submit=administerAssignment(administer)><div class=row><div class=form-group><div class=col-sm-3><label for=classroom>Class?</label></div><div class=col-sm-9><select id=classroom ng-model=administer.classroom ng-options="class as class.name for class in classrooms" class=form-control></select></div></div></div><div class="form-group row"><div class=col-sm-3><label for=dueDate>Due:</label></div><div class=col-sm-7><input id=dueDate style="margin-top: 2px" datepicker-popup=dd-MMMM-yyyy ng-model=administer.dueDate is-open=opened datepicker-options=dateOptions ng-required=true close-text=Close ng-focus=open($event) class="form-control"></div><div class=col-sm-2><button type=button ng-click=open($event) class="btn btn-default"><i class="glyphicon glyphicon-calendar"></i></button></div></div><div class="form-group row text-center"><button class="btn btn-primary">Assign to Class</button></div></form></div>'),a.put("app/teacher/assignment/assignment.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class="container avenir-db"><div class=row><div class=col-sm-12><h2>{{newAssignment.name}}&nbsp;</h2><h3>{{newAssignment.subject.fullName}}</h3></div></div><button omni-tap="showAssignmentQuestions=!showAssignmentQuestions" ng-show=showAssignmentQuestions class="question-toggle btn btn-lg btn-info visible-xs">View Community Questions</button><button omni-tap="showAssignmentQuestions=!showAssignmentQuestions" ng-show=!showAssignmentQuestions class="question-toggle btn btn-lg btn-info visible-xs">View Assignment Questions</button><br><br><div class=row><div ng-class="{\'hidden-xs\': showAssignmentQuestions}" class="col-sm-5 col-sm-push-7 right-half"><h3>Community Questions for {{newAssignment.subject.fullName}}</h3><br><ul class="list-group avenir-light"><li ng-hide=alternativeQuestions><div class=row><div class=col-sm-12><span us-spinner=us-spinner></span></div></div><div class=row><div class=col-sm-12>Please wait while your questions load...</div></div></li><li class=list-group-item><div class=row><p class="text-center page-number">Search</p></div><div class=row><input ng-model=searchText placeholder=Search ng-change=updateFiltered() class="omni-input centered-input"></div></li><li class=list-group-item><div class=row><div class=col-xs-4><button omni-tap=page(-1) class="btn btn-warning page-arrow-btn"><span class="glyphicon glyphicon-arrow-left page-arrow"></span></button></div><div class=col-xs-4><p class=page-number>page {{currentPage}} of {{maxPage}}</p></div><div class=col-xs-4><button omni-tap=page(1) class="btn btn-primary page-arrow-btn"><span class="glyphicon glyphicon-arrow-right page-arrow"></span></button></div></div></li><li ng-repeat="question in filteredAlternativeQuestions | startAt:((currentPage-1)*lim) | limitTo: lim" class="list-group-item question"><div class=row><div class="col-sm-12 text-center"><span ng-repeat="tag in question.tags" class=tag>{{tag}}</span></div></div><div class="row avenir-light"><div class="col-xs-3 text-center"><span omni-tap="vote(question, \'plus\', $index)" ng-class="{\'voted\': (question.votes[me]==\'plus\')}" class="glyphicon glyphicon-thumbs-up upvote question-score"></span></div><div class="col-xs-6 text-center question-score"><span>{{question.score}}</span></div><div class="col-xs-3 text-center"><span omni-tap="vote(question, \'minus\', $index)" ng-class="{\'voted\': (question.votes[me]==\'minus\')}" class="glyphicon glyphicon-thumbs-down downvote question-score"></span></div></div><div class=row><div class=col-sm-12><hr></div></div><div class=row><p mathjax-bind=question.body class=question-body></p></div><div ng-repeat="answer in question.choices" class=row><div ng-class="{correct: answer.correct}" class="col-sm-12 answer-box"><p mathjax-bind=answer.body></p></div></div><div class=row><div class="col-sm-12 text-center"><button omni-tap=addQuestion($index) class="btn btn-success"><span class="glyphicon glyphicon-plus"></span><span>&nbsp; Add to Assignment</span></button></div></div></li></ul></div><div ng-class="{\'hidden-xs\': !showAssignmentQuestions}" class="col-sm-7 col-sm-pull-5 left-half"><div class=row><div class=col-sm-12><h3>Assignment Questions</h3></div></div><div class=row><div class=col-sm-12><ul class=list-group><li ng-hide=newAssignment.questions><div class=row><div class=col-sm-12><span us-spinner=us-spinner></span></div></div><div class=row><div class=col-sm-12>Please wait while your questions load...</div></div></li><li ng-repeat="question in newAssignment.questions" class="list-group-item question"><div class=row><div class="col-sm-6 question-heading">Question {{$index + 1}}</div><div ng-show="!question.editing &amp;&amp; question.author == me" class="col-sm-3 text-center"><button omni-tap="question.editing=true" class="btn btn-primary"><span class="glyphicon glyphicon-edit"></span><span>&nbsp;Edit</span></button></div><div ng-show=question.editing class="col-sm-3 text-center"><button omni-tap="saveQuestion(question, $index, 1)" class="btn btn-success">Save</button></div><div ng-class="(question.author == me)?\'col-sm-3\':\'col-sm-6\'" class=text-right><button omni-tap=delQuestion($index) class="btn btn-danger"><span class="glyphicon glyphicon-remove"></span><span>&nbsp;Remove</span></button></div></div><div class=row><div ng-hide=question.editing ng-if=question.tags class=col-sm-12><span ng-repeat="tag in question.tags track by $index" class=tag>{{tag}}</span></div><div ng-show=question.editing ng-init="question.tagString = question.tags.toString()" class=col-sm-12><input style=width:100% ng-required=true ng-model=question.tagString placeholder="Enter tags separated by commas."></div></div><div ng-if="question.type==\'long\'" class=row><div class=col-sm-12><hr></div></div><div ng-show="question.type==&quot;long&quot;" class=row><div class=col-sm-4><span class=avenir-light>Points worth:</span><span ng-hide=question.editing class=avenir-light>{{question.value}}</span><input ng-if=question.editing type=number min=1 ng-model="question.value"></div></div><div class=row><div class=col-sm-12><hr></div></div><div class="row avenir-light"><div class=col-sm-12><p ng-bind-html=question.body ng-show=!question.editing class=question-body></p><!--textarea(ng-model=\'question.body\', ng-show=\'question.editing\', rows=\'8\', cols=\'71\')--><omni-editor name=questionText ng-model=question.body ng-show=question.editing ng-height=200></omni-editor></div></div><div class=row><div class=col-sm-12><hr></div></div><div ng-show="question.type == &quot;short&quot;" class="row avenir-light"><div class=col-sm-12><h4 class=avenir-db>Answer</h4><p ng-bind-html=question.answer ng-show=!question.editing></p></div></div><div ng-show="question.type==&quot;mult&quot; || !question.type" class=row><div class=col-sm-12><h4 class=avenir-db>Answers</h4></div></div><div ng-repeat="answer in question.choices" ng-show="question.type==&quot;mult&quot; || !question.type" class="row avenir-light"><div ng-show=!question.editing ng-class="{correct: (answer.correct)}" class="col-sm-12 answer-box"><p ng-bind-html=answer.body></p></div><div ng-show=question.editing class=col-sm-6><!--input(type=\'text\', ng-model=\'answer.body\')--><omni-editor name=answerChoiceText ng-model=answer.body ng-show=question.editing ng-height=50></omni-editor></div><div ng-show=question.editing class=col-sm-6><span ng-show=!question.editing>{{answer.correct}}</span><span ng-show=question.editing ng-init="answer.tempCorrect = ((answer.correct) ? true : false)"><label class=radio-inline><input type=radio ng-model=answer.tempCorrect ng-value="true">Correct</label><label class=radio-inline><input type=radio ng-model=answer.tempCorrect ng-value="false">Incorrect</label></span></div></div><div ng-hide="question.type==&quot;long&quot;" class=row><div class=col-sm-12><hr></div></div><div class="row avenir-light"><div ng-hide="whichBig==sides[1]" class=col-sm-12><h4 ng-if="question.type != \'long\'" class=avenir-db>Explanation</h4><h4 ng-if="question.type==\'long\'" class=avenir-db>Rubric</h4><p ng-bind-html=question.explanation.body ng-show=!question.editing></p><!--textarea(ng-model=\'question.explanation.body\', ng-show=\'question.editing\', rows=\'8\', cols=\'71\')--><omni-editor name=explanationText ng-model=question.explanation.body ng-show=question.editing ng-height=200></omni-editor></div></div></li><li ng-show="newAssignment.questions &amp;&amp; me" ng-hide=addingQuestion class="list-group-item question"><div class=row><div class="col-sm-12 text-center"><button omni-tap=addNew() class="btn btn-lg btn-info"><span class="glyphicon glyphicon-plus-sign"></span><span>&nbsp;&nbsp;Create a new question</span></button></div></div></li><li ng-show=addingQuestion class="list-group-item question"><form ng-model=newLocalQuestion class=row><div class="col-sm-6 question-heading">Question {{newAssignment.questions.length + 1}}</div><div class="col-sm-3 text-center"><button omni-tap=saveNewQuestion(newLocalQuestion) class="btn btn-primary"><span class="glyphicon glyphicon-save"></span><span>&nbsp;Add to Assignment</span></button></div><div class="col-sm-3 text-center"><button omni-tap=scrapNew() class="btn btn-danger"><span class="glyphicon glyphicon-trash"></span></button></div></form><div class=row><div class=col-sm-6><select ng-model=newLocalQuestion.type ng-options="opt.value as opt.name for opt in questionTypes"></select></div></div><div class=row><div class=col-sm-12><input style=width:100% ng-required=true ng-model=newLocalQuestion.tagString placeholder="Enter tags separated by commas."></div></div><div ng-if="newLocalQuestion.type==\'long\'" class=row><div class=col-sm-12><hr></div><div class=col-sm-4><span class=avenir-light>Points worth:</span><input type=number min=1 ng-model="newLocalQuestion.value"></div></div><div class=row><div class=col-sm-12><hr></div></div><div class=row><div class=col-sm-12><p>Question body</p><!--textarea#question-body(ng-model=\'newLocalQuestion.body\' rows=\'8\', style="width: 100%;",placeholder="Add LaTeX equations by surrounding them with \\\\( \\\\), like \\\\( \\\\frac 1 2 \\\\)")--><omni-editor name=questionText ng-model=newLocalQuestion.body ng-height=200></omni-editor></div></div><div ng-if="newLocalQuestion.type==&quot;short&quot;" class=row><div class=col-sm-12><!--input(type=\'text\', ng-model=\'newLocalQuestion.answer\', placeholder="Answer" style="width: 100%;")--><omni-editor name=shortAnswerText ng-model=newLocalQuestion.answer ng-height=200></omni-editor></div></div><div ng-repeat="answer in newLocalQuestion.choices" ng-if="newLocalQuestion.type==&quot;mult&quot;" class=row><div class=col-sm-6><!--input(type=\'text\', ng-model=\'answer.body\', placeholder="Answer Option")--><omni-editor name=answerChoiceText ng-model=answer.body ng-height=50></omni-editor></div><div class=col-sm-5><label class=radio-inline><input type=radio ng-model=answer.correct ng-value="true">Correct</label><label class=radio-inline><input type=radio ng-model=answer.correct ng-value="false">Incorrect</label></div><div class=col-sm-1><span omni-tap="newLocalQuestion.choices.splice($index, 1)" class="glyphicon glyphicon-trash"></span></div></div><div ng-if="newLocalQuestion.type==&quot;mult&quot;" class=row><div omni-tap="newLocalQuestion.choices.push({body: \'\'})" class=col-sm-12><button class="btn btn-default"><span class="glyphicon glyphicon-plus"></span><span>add answer option</span></button></div></div><br><div class=row><div ng-hide="newLocalQuestion.type==&quot;long&quot;" class=col-sm-12><p>Answer Explanation</p><!--textarea#explanation-body(ng-model=\'newLocalQuestion.explanation.body\' rows=\'8\', style="width: 100%;", placeholder="Answer explanation")--><omni-editor name=answerExplanationText ng-model=newLocalQuestion.explanation.body ng-height=200></omni-editor></div><div ng-show="newLocalQuestion.type==&quot;long&quot;" class=col-sm-12><textarea ng-model=newLocalQuestion.explanation.body rows=8 style="width: 100%" placeholder="Grading Rubric"></textarea></div></div></li><li ng-if=newAssignment.questions class=list-group-item><div class=row><div class="col-sm-6 text-left"><button omni-tap=confirmAssignment(newAssignment) class="btn btn-primary">Confirm Assignment</button></div><div class="col-sm-6 text-right"><button omni-tap=cancelAssignment() class="btn btn-danger">Cancel Assignment</button></div></div></li></ul></div></div></div></div></div><footer ng-include=&quot;components/footer/footer.html&quot;></footer>'),a.put("app/teacher/classroom/assignModal.html",'<div class=row><div class=col-sm-12><h2>Assign to {{classroom.name}}</h2></div></div><div class=row><div class=col-sm-12><h5>Pick an assignment to assign to {{classroom.name}}</h5></div></div><div ng-if=!assignments class=row><div class=col-sm-12>Oops! It looks like you don\'t have any assignments yet.</div></div><div ng-if=!assginments class=row><div class=col-sm-12><button omni-link=teacher/create/assignment class="btn btn-primary">Make one now!</button></div></div><form ng-submit=assignIt(newAssignment) ng-model=newAssignment ng-if=assignments class=row><div class=col-sm-12><div class=row><div class=col-sm-12><label for=ID>Assignment to assign:</label><select id=ID ng-model=newAssignment.assignmentId ng-options="assignment._id as assignment.name for assignment in assignments" class=form-control></select></div></div><div class=row><div class=col-sm-12><label for=type>Assign as:</label><select id=type ng-model=newAssignment.type ng-options="type as type for type in types"></select></div></div><div ng-if="newAssignment.type===\'Other\'" class=row><div class=col-sm-12><input ng-model=newAssignment.newType placeholder="Choose assignment type"><button ng-click=addType(newAssignment.newType) class="btn btn-default">Add!</button></div></div><div class=row><div class=col-sm-12><label for=DueDate>Due date:</label><p id=DueDate><input datepicker-popup=dd-MMMM-yyyy ng-model=newAssignment.dueDate is-open=opened datepicker-options=dateOptions ng-required=true close-text="Close"><span class="input-group-btn input-group"><button type=button ng-click=open($event) class="btn btn-default"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div></div></form>'),a.put("app/teacher/classroom/classroom.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><div class=row><div class=col-sm-12><h1><span omni-tap=goToTeacher() class=btn-link>My Classrooms</span><span>&nbsp;&gt;&nbsp;</span><span omni-tap="" class=btn-link>{{classroom.name}}</span><span>&nbsp;</span><span ng-if=currentAssignment>&gt;&nbsp;{{currentAssignment.name}}</span></h1></div></div><div class="row avenir-db"><div ng-class="currentAssignment?\'col-sm-12\':\'col-sm-6\'"><div ng-hide=currentAssignment class="row studentTitle"><div class=col-sm-12><h2>Assignments</h2></div><div class=col-sm-12><table ng-hide=currentAssignment class="table table-hover"><tr><th>Assignment Name</th><th>Due Date</th><th>Tools</th></tr><tr ng-repeat="assignment in classroom.assignments" omni-tap=openGradebook(assignment)><td>{{assignment.name}}</td><td>{{assignment.dueDate | date: \'short\'}}</td><td><div class=toolset><div class=tool><span class="glyphicons glyphicons-family"></span></div></div></td></tr></table><table ng-if=currentAssignment class="table table-hover"><tr><th>Student name</th><th>Score</th></tr><tr ng-repeat="student in classroom.students"><td>{{student.name}}</td><td ng-hide="student.score == &quot;N/A&quot;">{{(100 * student.score) | number:1}}%</td><td ng-show="student.score == &quot;N/A&quot;">{{student.score}}</td></tr></table></div></div></div><div ng-hide=currentAssignment class="col-sm-5 col-sm-offset-1"><div class="row studentTitle"><div class=col-sm-12><h2>Recent Messages</h2></div></div><div class=row><div scroll-top-on=messages_updated class="col-sm-12 teacher-chat-log"><table class="activityTable table table-hover avenir-light"><tr><th>Date</th><th>Message</th></tr><tr ng-repeat="message in messages | orderBy: \'-date\' track by $index" ng-init="message.isToday = checkIfToday(message.date)"><td ng-if=!message.isToday>{{message.date | date : \'mediumDate\' }}</td><td ng-if=message.isToday>{{message.date | date : \'shortTime\' }}</td><td>{{message.authorName}}: {{message.message}}</td></tr></table></div></div><div class=row><div class="col-sm-12 teacher-chat-container"><form class=teacher-chat><div class=teacher-chat-input><input ng-model=newMessage placeholder="Send a message to all your classes!" class="chatbox"><button ng-click=addMessage() class=btn-send>Send</button></div></form></div></div></div></div></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),
a.put("app/teacher/deleteModal.html",'<div class=container-fluid><div class=row><div class=col-sm-12><h3>Are you sure you want to delete this?</h3></div></div><div class="row text-center"><div class=col-sm-6><button omni-tap=closeThisDialog(false) class="btn btn-danger">No!</button></div><div class=col-sm-6><button omni-tap=closeThisDialog(true) class="btn btn-primary">Of course!</button></div></div></div>'),a.put("app/teacher/gradebook/gradebook.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div ng-hide=selectedStudent class=container><div ng-if=serverError class=row><h1>Error: {{serverError}}</h1></div><div ng-if=!serverError class="row avenir-db"><div class=row><div class=col-sm-12><h1><span>Gradebook</span><span ng-show=currentAssignment>&nbsp;-&nbsp;</span><span ng-show=currentAssignment>{{currentAssignment.name}}</span></h1></div></div><div class=row><div class=col-sm-12><h2><span ng-if=classroom>{{classroom.name}}</span></h2></div></div><div class=row><div class=col-sm-12><table class="table table-hover"><thead><tr><th>Student</th><th>Assignment Grade</th><th>Course Average</th></tr></thead><tbody><tr class=class-row><td>Class Average</td><td>{{currentAssignment.classAverage}}%</td><td>N/A</td></tr><tr ng-repeat="student in students" ng-class="{\'student-row-ungraded\': !student.submissionFullyGraded}" omni-tap=setSelectedStudent(student) class=student-row><td>{{student.name}}</td><td>{{student.score}}</td><td>{{student.average}}</td></tr></tbody></table></div></div></div></div><div ng-show=selectedStudent class=container><h1>;lasjf;laksjfd;lkajf</h1></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),a.put("app/teacher/sample/sampleAssignment.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class="container avenir-db"><div class=row><div class=col-sm-12><p>Congratulations, you just made your first assignment!</p><p>You can have your students take the assignment by giving them the following link:<a ng-href={{assignment.URL}}>{{assignment.URL}}</a></p></div></div><div class=row><div class=col-sm-12><p>Enter your email below to get updates on who has been taking this assignment:</p><form ng-model=user><input ng-model=user.email placeholder="MyName@MySchool.edu"><button type=submit ng-click=saveUserEmail(user) class="btn btn-primary">Send me updates!</button></form></div></div></div><footer ng-include=&quot;components/footer/footer.html&quot;></footer>'),a.put("app/teacher/teacher.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><div class="row avenir-db"><div class=col-sm-8><h2 class=studentTitle>Assignments</h2><div class=row><div class=col-xs-6><button omni-tap=addAssignmentModal() class="btn btn-primary btn-lg">+ New Assignment</button></div><div class=col-xs-6></div></div><br><br><div class=limit-overflow><table class="table table-hover"><tr><th>Name</th><th>Subject</th><th>Tools</th></tr><tr ng-repeat="assignment in assignments track by $index"><td>{{assignment.name}}</td><td>{{assignment.subject.fullName}}</td><td class=tools><button omni-tap=assignAssignment(assignment) style=margin-right:0.4em class="btn btn-success">Assign<span class="glyphicon glyphicon-inbox"></span></button><button omni-tap=editAssignment(assignment) style=margin-right:0.4em class="btn btn-info">Edit<span class="glyphicon glyphicon-edit"></span></button><button omni-tap=deleteAssignment(assignment,$index) style=margin-right:0.4em class="btn btn-danger">Delete<span class="glyphicon glyphicon-trash"></span></button></td></tr></table></div></div><div class=col-sm-4><div class="row studentTitle"><div class=col-sm-12><h2>Recent Messages</h2></div></div><div class=row><div scroll-top-on=messages_updated class="col-sm-12 teacher-chat-log"><table class="activityTable table table-hover avenir-light"><tr><th>Date</th><th>Message</th></tr><tr ng-repeat="message in messages | orderBy: \'-date\' track by $index" ng-init="message.isToday = checkIfToday(message.date)"><td ng-if=!message.isToday>{{ message.date | date : \'mediumDate\' }}</td><td ng-if=message.isToday>{{ message.date | date : \'shortTime\' }}</td><td>{{message.authorName}}: {{ message.message}}</td></tr></table></div></div><div class=row><div class="col-sm-12 teacher-chat-container"><form class=teacher-chat><div class=teacher-chat-input><input ng-model=newMessage placeholder="Send a message to all your classes!" class="chatbox"><button ng-click=addMessage() class=btn-send>Send</button></div></form></div></div></div></div><div class="row avenir-db"><div class=col-sm-12><h2>Classrooms</h2></div></div><div class="row avenir-db"><div class=col-sm-12><table class="table table-hover"><tr><th>Name</th><th>Number of Students</th><th>Subject</th><th>Class Average</th><th><span>Class Code&nbsp;</span><span uib-tooltip-direction=top uib-tooltip="Share this with your students to help them sign up!" class="glyphicon glyphicon-question-sign"></span></th></tr><tr ng-repeat="class in classrooms track by $index" omni-tap=goToClass(class)><td class=btn-link>{{class.name}}</td><td>{{class.students.length}}</td><td>{{class.subject.fullName}}</td><td ng-hide="class.average == &quot;N/A&quot;">{{(100* class.average) | number:1}}%</td><td ng-show="class.average == &quot;N/A&quot;">{{class.average}}</td><td>{{class.code}}</td></tr><tr><td colspan=5 omni-tap=addClassModal()><span class="glyphicon glyphicon-plus"></span>Add a new classroom</td></tr></table></div></div></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>'),a.put("app/terms/terms.html","<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=\"container avenir-light\"><html><h2>Web Site Terms and Conditions of Use</h2><h3>1. Terms</h3><p>By accessing this web site, you are agreeing to be bound by these web site Terms and Conditions of Use, all applicable laws and regulations, and agree that you are responsible for compliance with any applicable local laws. If you do not agree with any of these terms, you are prohibited from using or accessing this site. The materials contained in this web site are protected by applicable copyright and trade mark law.</p><h3>2. Use License</h3><ol type=a><li>Content that belongs to the following subject areas belongs to Learningpod and its licensors and may not be copied, reproduced, transmitted, stored, or otherwise used except within the Omninox web site: Calculus BC, European History, US History, World History, Psychology, Biology, Chemistry, Environmental Science, US Government and Politics, and Human Geography</li><li>For the remainder of the content that does not belong to one of the subjects mentioned above, permission is granted to temporarily download one copy of the materials (information or software) on Omninox Corp's web site for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not:<ol type=i><li>modify or copy the materials;</li><li>use the materials for any commercial purpose, or for any public display (commercial or non-commercial);</li><li>attempt to decompile or reverse engineer any software contained on Omninox Corp's web site;</li><li>remove any copyright or other proprietary notations from the materials; or</li><li>transfer the materials to another person or \"mirror\" the materials on any other server.</li></ol></li><li>This license shall automatically terminate if you violate any of these restrictions and may be terminated by Omninox Corp at any time. Upon terminating your viewing of these materials or upon the termination of this license, you must destroy any downloaded materials in your possession whether in electronic or printed format.</li></ol><h3>3. Disclaimer</h3><ol type=a><li>The materials on Omninox Corp's web site are provided \"as is\". Omninox Corp makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties, including without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights. Further, Omninox Corp does not warrant or make any representations concerning the accuracy, likely results, or reliability of the use of the materials on its Internet web site or otherwise relating to such materials or on any sites linked to this site.</li></ol><h3>4. Limitations</h3><p>In no event shall Omninox Corp or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on Omninox Corp's Internet site, even if Omninox Corp or a Omninox Corp authorized representative has been notified orally or in writing of the possibility of such damage. Because some jurisdictions do not allow limitations on implied warranties, or limitations of liability for consequential or incidental damages, these limitations may not apply to you.</p><h3>5. Revisions and Errata</h3><p>The materials appearing on Omninox Corp's web site could include technical, typographical, or photographic errors. Omninox Corp does not warrant that any of the materials on its web site are accurate, complete, or current. Omninox Corp may make changes to the materials contained on its web site at any time without notice. Omninox Corp does not, however, make any commitment to update the materials.</p><h3>6. Links</h3><p>Omninox Corp has not reviewed all of the sites linked to its Internet web site and is not responsible for the contents of any such linked site. The inclusion of any link does not imply endorsement by Omninox Corp of the site. Use of any such linked web site is at the user's own risk.</p><h3>7. Site Terms of Use Modifications</h3><p>Omninox Corp may revise these terms of use for its web site at any time without notice. By using this web site you are agreeing to be bound by the then current version of these Terms and Conditions of Use.</p><h3>8. Governing Law</h3><p>Any claim relating to Omninox Corp's web site shall be governed by the laws of the State of Florida without regard to its conflict of law provisions.</p><p>General Terms and Conditions applicable to Use of a Web Site.</p><h2>Privacy Policy</h2><p>Your privacy is very important to us. Accordingly, we have developed this Policy in order for you to understand how we collect, use, communicate and disclose and make use of personal information. The following outlines our privacy policy.</p><ul><li>Before or at the time of collecting personal information, we will identify the purposes for which information is being collected.</li><li>We will collect and use of personal information solely with the objective of fulfilling those purposes specified by us and for other compatible purposes, unless we obtain the consent of the individual concerned or as required by law.</li><li>We will only retain personal information as long as necessary for the fulfillment of those purposes.</li><li>We will collect personal information by lawful and fair means and, where appropriate, with the knowledge or consent of the individual concerned.</li><li>Personal data should be relevant to the purposes for which it is to be used, and, to the extent necessary for those purposes, should be accurate, complete, and up-to-date.</li><li>We will protect personal information by reasonable security safeguards against loss or theft, as well as unauthorized access, disclosure, copying, use or modification.</li><li>We will make readily available to customers information about our policies and practices relating to the management of personal information.</li></ul><p>We are committed to conducting our business in accordance with these principles in order to ensure that the confidentiality of personal information is protected and maintained.</p></html></div><footer ng-include=&quot;components/footer/footer.html&quot; class=footer></footer>"),a.put("components/academicRoleModal/academicRoleModal.html",'<div class="container text-center"><div class=row><div class=col-sm-12><h2 class=avenir-db>You don\'t have an academic role yet!</h2></div></div><div class=row><div class=col-sm-12><p class=avenir-light>Please set one now.</p></div></div><div class=row><div class=col-sm-12><p class=avenir-light>I am a:</p></div></div><div class=row><div class=col-sm-6><button ng-click=submitChoice(&quot;Student&quot;) class="btn btn-lg btn-primary">Student</button></div><div class=col-sm-6><button ng-click=submitChoice(&quot;Teacher&quot;) class="btn btn-lg btn-warning">Teacher</button></div></div></div>'),a.put("components/accountPage/admin/account.html","<div ng-controller=AccountUserCtrl class=container><div class=row><p class=col-sm-12>Please refer to the&nbsp;<a href=/admin>admin's</a> page for administrator functions.</p></div></div>"),a.put("components/accountPage/endUser/account.html",'<div ng-controller=AccountCustomerCtrl class=container><div class="row text-center"><div class=col-sm-12><h1 class=avenir-light>My AP Home Room</h1></div></div><br><div ng-init=getMessageToUsers() ng-show=message class=row><div class=col-sm-1></div><div class=col-sm-10><div class="row message"><div class=col-sm-10><p ng-bind-html=message></p></div><div class=col-sm-2><span ng-click="message=undefined" class="glyphicon glyphicon-remove"></span></div></div></div><div class=col-sm-1></div></div><br><div class=row><div class=col-md-6><div ng-include=&quot;components/leaderboard/leaderboard.html&quot;></div></div><div class=col-md-6><span us-spinner=us-spinner spinner-key=spinner-1 spinner-start-active=true></span><div class="block-item avenir-light text-center"><h4 class=avenir-db>You can now send invitations</h4><p>Invite other AP teachers and students to rise up the ranks on the Community Leaders\' leaderboard.</p><div class=top-border><p>To invite other AP teachers and students, just send them your invitation link (<a href=/signup/key/{{currentUser.email}}>https://omninox.org/signup/key/{{currentUser.email}}</a>) using any of the methods below:</p></div><div class=row><div class=col-xs-1></div><div class=col-xs-2><a href="" omni-tap=edmodoShare()><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/share-edmodo.png class="img-responsive share-img centered"></a></div><div class=col-xs-2><a href="" omni-tap=googleShare()><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/share-google.png class="img-responsive share-img centered"></a></div><div class=col-xs-2><a href="" omni-tap=twitterShare()><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/share-twitter.png class="img-responsive share-img centered"></a></div><div class=col-xs-2><a href="" omni-tap=emailShare()><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/share-mail.png class="img-responsive share-img centered"></a></div><div class=col-xs-2><a href="" omni-tap=fbShare()><img src=https://232acaefd6d17abcc196-ec7beb64f86df3a9fee9a80603d31859.ssl.cf5.rackcdn.com/share-facebook.png class="img-responsive share-img centered"></a></div><div class=col-xs-1></div></div></div></div></div><br><!--Exam lists--><div ng-repeat="subjects in [premiumSubjects, freeSubjects]" class=row><span us-spinner=us-spinner spinner-key=spinner-2 spinner-start-active=true></span><div ng-show="subjects.length &gt; 0" class=col-sm-12><div class="row text-center"><div class=col-sm-12><h2 ng-if="$index == 0" class=avenir-light>Purchased Subjects</h2><h2 ng-if="$index == 1" class=avenir-light>Sample Questions</h2></div></div><div class=row><omnicordion><expander data-ng-repeat="subject in subjects" data-expander-title={{$parent.$parent.readableSubjects[subject.name]}} class=expander><div ng-repeat="exam in subject.exams | orderBy: &quot;examNumber&quot;" class="row exam-info"><div class="col-xs-6 col-md-8"><a ng-show="exam.examNumber === 0" href=account/{{subject.name}}/{{exam.examNumber}}/1>Sample Questions</a><a ng-show="exam.examNumber &gt; 0" href=account/{{subject.name}}/{{exam.examNumber}}/1>Premium Exam {{$index}}</a></div><div class="col-xs-3 col-md-2 text-center">{{score(exam.stats.score)}}</div><div class="col-xs-3 col-md-2 text-center">{{attempts(exam.stats.attempts)}}</div></div><div ng-hide=subject.exams class=row><div class=col-sm-12>No exams</div></div></expander></omnicordion></div></div></div></div>'),a.put("components/addChatRoom/addChatRoom.html",'<h1>Add a Chat Room</h1><div><form><div class=well><div class=form-group><label for=roomName>Room Name</label><input id=roomName ng-model=roomName placeholder="Enter new Room Name" maxlength=10 class="form-control"><label for=roomType>Room Type</label><select ng-model=roomType class=form-control><option ng-repeat="roomType in roomTypes" value={{roomType.value}}>{{roomType.name}}</option></select></div></div><div class=row><div class=col-sm-12><button type=button omni-tap="addNewRoom(roomName,roomType); closeThisDialog()" class="pull-right btn btn-primary">Submit</button></div></div></form></div>'),a.put("components/addUser/addUser.html",'<h1>Add a Customer</h1><div><form><div class=well><div class=form-group><label for=Email>Email Address</label><input id=Email ng-model=customerEmail type=email placeholder="Enter new user\'s email" class="form-control"></div></div><div class=row><div class=col-sm-12><button type=button ng-click="addNewUser(customerEmail); closeThisDialog()" class="pull-right btn btn-primary">Submit</button></div></div></form></div>'),a.put("components/alerts/you_are_not_logged_in.html",'<div ng-hide=exists class=wrapper-div><h2 class="text-center avenir-db">You are not logged in</h2><hr><h4 class="text-center avenir-light">Please sign in using Facebook or Google</h4><button>Sign in with Facebook</button><button>Sign in with Google</button><h4 class="text-center avenir-light">Or we can automatically create your account and email you the password</h4><button omni-tap=createCustomerAccount() class="btn-lg btn btn-danger">Continue and create my account</button></div><div ng-show=exists class=wrapper-div><h2 class="text-center avenir-db">This email already exists</h2><hr><h4 class="text-center avenir-light">Please Login</h4><form></form></div>'),a.put("components/ccform/ccform.html",'<span us-spinner=us-spinner spinner-key=spinner-1 spinner-start-active=false></span><h3 class=avenir-light>Credit Card Information</h3><img id=visa src=/assets/images/card_visa.png ng-class=ccform.cardType.visa class="img-card"><img id=mastercard src=/assets/images/card_mastercard.png ng-class=ccform.cardType.mastercard class="img-card"><img id=discover src=/assets/images/card_discover.png ng-class=ccform.cardType.discover class="img-card"><img id=jcb src=/assets/images/card_jcb.png ng-class=ccform.cardType.jcb class="img-card"><img id=amex src=/assets/images/card_amex.png ng-class=ccform.cardType.amex class="img-card"><form name=cardInformationForm class=form-inline><div class=form-group><div class="row avenir-light"><div class=col-xs-12><p ng-repeat="(key, message) in ccform.validationMessages">{{message}}</p></div></div><div class="row avenir-light"><div class=col-xs-6><input id=fullName ng-model=ccform.fullName placeholder=Name name=fullName ng-change="ccform.validationMessages.nameValidation=&quot;&quot;" class="form-control"></div><div class=col-xs-6><input id=email type=email ng-model=ccform.emailAddress placeholder="Email Address" name=email ng-change="ccform.validationMessages.emailValidation=&quot;&quot;" class="form-control"></div></div><div class="row avenir-light"><div class=col-xs-9><input id=cardNumber ng-model=ccform.cardNumber placeholder="Credit Card Number" name=cardNumber ng-change=validateCard() maxlength=20 class="form-control"></div><div class=col-xs-3><input id=CVV ng-model=ccform.cvv placeholder=CVV name=CVV maxlength=4 ng-change=formatCVV() class="form-control"></div></div><span class=avenir-light>Expiration Date</span><div class="row avenir-light"><div class=col-xs-3><ui-select id=cardExpirationMonth ng-model=ccform.expirationDate.expirationMonth theme=bootstrap><ui-select-match id=month-match placeholder=Month>{{$select.selected}}</ui-select-match><ui-select-choices id=month-choices repeat="month in ccform.expirationDate.monthsInYear | filter: $select.search">{{month}}</ui-select-choices></ui-select></div><div class=col-xs-3><ui-select id=cardExpirationYear ng-model=ccform.expirationDate.expirationYear theme=bootstrap><ui-select-match id=year-match placeholder=Year>{{$select.selected}}</ui-select-match><ui-select-choices id=year-choices repeat="year in ccform.expirationDate.yearsOnCards | filter: $select.search">{{year}}</ui-select-choices></ui-select></div><div class=col-xs-6><input id=zipCode ng-model=ccform.zipCode placeholder="Zip Code" name=zipcode class="form-control"></div></div><br><div class="row avenir-light vertical-align"><div class=col-xs-6><span id=total>Total: ${{total}}</span></div><div class=col-xs-6><button id=checkout type=submit omni-tap=isValid() ng-disabled=cardProcessing class="btn btn-danger btn-lg avenir-db">Access Exams</button></div></div></div></form>'),a.put("components/chat/chat.html",'<div class=container><div ng-controller=ChatCtrl ng-hide=hideChatBox() class=row><div class="col-sm-6 col-lg-4 col-xs-12"><form ng-show=chatboxIsVisible() ng-submit=addChat() class="chat-container form-wrapper"><div omni-tap=setChatBoxInvisible() class="chat-header avenir-light">Omninox Global Chat</div><span omni-tap=setChatBoxInvisible() class=minimize>-</span><section class="panel grey"><div class=panel-body><tabset justified=true class=front><tab ng-repeat="tab in tabs" heading={{tab.name}} active=tab.active disabled select=selectRoom(tab) class="avenir-light tab-heading"><div room="{{tab==null?earlierRoom._id:tab._id}}" scrollable=awesomeChats scrollable-tab=tab._id user-scroll-treshhold=300 id={{tab._id}} ng-class="{\'messages_1_room\': tabs.length===1,\'messages_2_room\': tabs.length===2,\'messages_3_room\': moreTabs.length&gt;=1}" class="messages container"><div ng-if=blocked class=row><div class="top-margin col-xs-8 pull-left"><div class=panel-body><strong class=text-danger>Admin&nbsp;:&nbsp;</strong><p class=text-danger>{{blockedPerm==true ? blockedUserMsgPerm:blockedUserMsgTemp}}</p><p ng-repeat-start="blkMsg in blockedMessages"></p><strong>{{blkMsg.name}}:</strong><p ng-repeat-end=ng-repeat-end>{{blkMsg.message}}</p></div></div></div><div ng-repeat="chat in awesomeChats" ng-if=showChats(chat) ng-init="chat.isHover=false" omni-tap=showVotingMenu(chat) class="row message-row"><div ng-class="(currentUser.email == chat.email) ? &quot;pull-right&quot; : &quot;pull-left&quot;" ng-if=!chat.notification class="top-margin-small bottom-margin-small col-xs-8"><div ng-class="{\'cursor-pointer\' : (currentUser[\'email\'] != chat.email &amp;&amp; chat.sentByUser)}" class="panel-body chat-message"><strong ng-class="{\'text-danger\': !chat.sentByUser}">{{chatUser(chat)}}&nbsp;:&nbsp;</strong><span class=callout></span><span ng-if="roomType===\'free\'" class=text-default>{{chat.message}}</span><span ng-if="roomType===\'premium\' &amp;&amp; currentUser.role != \'user\'" class=text-default>{{chatMessage(chat)}}</span></div></div><section ng-if="chat.notification &amp;&amp; chat.notification.for==\'chat\' &amp;&amp; chat.user._id!=currentUser._id"><div class=col-xs-12><div class="top-margin-small bottom-margin-small panel-body notification bg-info"><p ng-if="!chat.wished &amp;&amp; !chat.notification.examOver" class="text-center text-bold">{{chat.user.name}} has just started {{subjectNames.getSubjectName(chat.exam.subject)}} exam, wish them a good luck!</p><p ng-if="chat.wished &amp;&amp; !chat.notification.examOver" class="text-center text-bold">You wished Good Luck to {{chat.user.name}} for {{subjectNames.getSubjectName(chat.exam.subject)}} exam.</p><p ng-if=chat.notification.examOver class="text-center text-bold">{{chat.user.name}} just finished {{subjectNames.getSubjectName(chat.exam.subject)}} exam<span ng-if="chat.wellWishers==1">, with the aid of {{chat.wellWishers}} well-wisher</span><span ng-if=chat.wellWishers&gt;1>, with the aid of {{chat.wellWishers}} well-wishers</span><span>!</span></p></div></div><div ng-if="!chat.wished &amp;&amp; !chat.notification.examOver" class=col-xs-12><div class="panel-body text-center"><a omni-tap="chat.disableWish=true; wishGoodLuck(chat)" ng-disabled=chat.disableWish class="avenir-light btn btn-danger shadowed btn-lg text-default"><i class="fa fa-thumbs-up"></i></a></div></div></section><div ng-if="upVotes(chat) &amp;&amp; !chat.notification" ng-init="chat.upvoted=false; chat.downvoted=false" class="top-margin vote-list col-lg-4 col-sm-4 col-xs-4 {{(currentUser[\'email\'] == chat.email) ? \'pull-left\' : \'pull-right\'}}"><span ng-show=showUpVote(chat) omni-tap=upVote({{chat}}) ng-class="{\'votePicked\':!upVotePicked(chat)}" class="fa fa-long-arrow-up vote text-success"></span><span ng-show=showDownVote(chat) omni-tap=downVote({{chat}}) ng-class="{\'votePicked\':!downVotePicked(chat)}" class="fa fa-long-arrow-down vote"></span><span ng-show=showBan(chat) omni-tap="blockUser(\'{{chat.email}}\')" class="fa fa-ban vote"></span></div><div ng-if=chat.older class=col-xs-12><hr></div></div><div class=row><div ng-if=showAdminChat(chat) class="top-margin col-lg-8 pull-left"><div class="panel grey"><div class=panel-body><strong class=text-danger>Admin&nbsp;:&nbsp;</strong><p class=text-danger>{{freeUserMsg}}</p></div></div></div></div></div></tab><tab ng-if="moreTabs.length==1" ng-repeat="tab in moreTabs" heading={{tab.name}} active=tab.active disabled select=selectMoreRoom(tab) class="avenir-light tab-heading"><div room="{{tab==null?earlierRoom._id:tab._id}}" scrollable=awesomeChats scrollable-tab=tab._id user-scroll-treshhold=300 id={{tab._id}} ng-class="{\'messages_1_room\': tabs.length===1,\'messages_2_room\': tabs.length===2,\'messages_3_room\': moreTabs.length&gt;=1}" class="messages container"><div ng-if=blocked class=row><div class="top-margin col-xs-8 pull-left"><div class=panel-body><strong class=text-danger>Admin&nbsp;:&nbsp;</strong><p class=text-danger>{{blockedPerm==true ? blockedUserMsgPerm:blockedUserMsgTemp}}</p><p ng-repeat-start="blkMsg in blockedMessages"></p><strong>{{blkMsg.name}}:</strong><p ng-repeat-end=ng-repeat-end>{{blkMsg.message}}</p></div></div></div><div ng-repeat="chat in awesomeChats" ng-if=showChats(chat) ng-init="chat.isHover=false" omni-tap=showVotingMenu(chat) class="row message-row"><div ng-class="(currentUser.email == chat.email) ? &quot;pull-right&quot; : &quot;pull-left&quot;" ng-if=!chat.notification class="top-margin-small bottom-margin-small col-xs-8"><div ng-class="{\'cursor-pointer\' : (currentUser[\'email\'] != chat.email &amp;&amp; chat.sentByUser)}" class="panel-body chat-message"><strong ng-class="{\'text-danger\': !chat.sentByUser}">{{chatUser(chat)}}&nbsp;:&nbsp;</strong><span class=callout></span><span ng-if="roomType===\'free\'" class=text-default>{{chat.message}}</span><span ng-if="roomType===\'premium\' &amp;&amp; currentUser.role != \'user\'" class=text-default>{{chatMessage(chat)}}</span></div></div><section ng-if="chat.notification &amp;&amp; chat.notification.for==\'chat\' &amp;&amp; chat.user._id!=currentUser._id"><div class=col-xs-12><div class="top-margin-small bottom-margin-small panel-body notification bg-info"><p ng-if="!chat.wished &amp;&amp; !chat.notification.examOver" class="text-center text-bold">{{chat.user.name}} has just started {{subjectNames.getSubjectName(chat.exam.subject)}} exam, wish them a good luck!</p><p ng-if="chat.wished &amp;&amp; !chat.notification.examOver" class="text-center text-bold">You wished Good Luck to {{chat.user.name}} for {{subjectNames.getSubjectName(chat.exam.subject)}} exam.</p><p ng-if=chat.notification.examOver class="text-center text-bold">{{chat.user.name}} just finished {{subjectNames.getSubjectName(chat.exam.subject)}} exam<span ng-if="chat.wellWishers==1">, with the aid of {{chat.wellWishers}} well-wisher</span><span ng-if=chat.wellWishers&gt;1>, with the aid of {{chat.wellWishers}} well-wishers</span><span>!</span></p></div></div><div ng-if="!chat.wished &amp;&amp; !chat.notification.examOver" class=col-xs-12><div class="panel-body text-center"><a omni-tap="chat.disableWish=true; wishGoodLuck(chat)" ng-disabled=chat.disableWish class="avenir-light btn btn-danger shadowed btn-lg text-default"><i class="fa fa-thumbs-up"></i></a></div></div></section><div ng-if="upVotes(chat) &amp;&amp; !chat.notification" ng-init="chat.upvoted=false; chat.downvoted=false" class="top-margin vote-list col-lg-4 col-sm-4 col-xs-4 {{(currentUser[\'email\'] == chat.email) ? \'pull-left\' : \'pull-right\'}}"><span ng-show=showUpVote(chat) omni-tap=upVote({{chat}}) ng-class="{\'votePicked\':!upVotePicked(chat)}" class="fa fa-long-arrow-up vote text-success"></span><span ng-show=showDownVote(chat) omni-tap=downVote({{chat}}) ng-class="{\'votePicked\':!downVotePicked(chat)}" class="fa fa-long-arrow-down vote"></span><span ng-show=showBan(chat) omni-tap="blockUser(\'{{chat.email}}\')" class="fa fa-ban vote"></span></div><div ng-if=chat.older class=col-xs-12><hr></div></div><div class=row><div ng-if=showAdminChat(chat) class="top-margin col-lg-8 pull-left"><div class="panel grey"><div class=panel-body><strong class=text-danger>Admin&nbsp;:&nbsp;</strong><p class=text-danger>{{freeUserMsg}}</p></div></div></div></div></div></tab><tab ng-if=moreTabs.length&gt;1 omni-tap="open=true" select=selectEarlierRoom()><tab-heading class=tab-heading><div dropdown="" is-open=open><div dropdown-toggle="" aria-controls=myTabDrop1 class="dropdown-toggle fullwidth text-center">{{roomNameMore}}<span ng-show=moreTabs.length&gt;1 class=caret></span></div><ul id=myTabDrop1 role=menu ng-if=moreTabs.length&gt;1 class="dropdown-menu width-fix"><li ng-repeat="tab in moreTabs" omni-tap=selectMoreRoom(tab) class="avenir-light tab-heading text-left padder-v"><a href=# role=tab data-toggle=tab>{{tab.name}}</a></li></ul></div></tab-heading><div room="{{tab==null?earlierRoom._id:tab._id}}" scrollable=awesomeChats scrollable-tab=tab._id user-scroll-treshhold=300 id={{tab._id}} ng-class="{\'messages_1_room\': tabs.length===1,\'messages_2_room\': tabs.length===2,\'messages_3_room\': moreTabs.length&gt;=1}" class="messages container"><div ng-if=blocked class=row><div class="top-margin col-xs-8 pull-left"><div class=panel-body><strong class=text-danger>Admin&nbsp;:&nbsp;</strong><p class=text-danger>{{blockedPerm==true ? blockedUserMsgPerm:blockedUserMsgTemp}}</p><p ng-repeat-start="blkMsg in blockedMessages"></p><strong>{{blkMsg.name}}:</strong><p ng-repeat-end=ng-repeat-end>{{blkMsg.message}}</p></div></div></div><div ng-repeat="chat in awesomeChats" ng-if=showChats(chat) ng-init="chat.isHover=false" omni-tap=showVotingMenu(chat) class="row message-row"><div ng-class="(currentUser.email == chat.email) ? &quot;pull-right&quot; : &quot;pull-left&quot;" ng-if=!chat.notification class="top-margin-small bottom-margin-small col-xs-8"><div ng-class="{\'cursor-pointer\' : (currentUser[\'email\'] != chat.email &amp;&amp; chat.sentByUser)}" class="panel-body chat-message"><strong ng-class="{\'text-danger\': !chat.sentByUser}">{{chatUser(chat)}}&nbsp;:&nbsp;</strong><span class=callout></span><span ng-if="roomType===\'free\'" class=text-default>{{chat.message}}</span><span ng-if="roomType===\'premium\' &amp;&amp; currentUser.role != \'user\'" class=text-default>{{chatMessage(chat)}}</span></div></div><section ng-if="chat.notification &amp;&amp; chat.notification.for==\'chat\' &amp;&amp; chat.user._id!=currentUser._id"><div class=col-xs-12><div class="top-margin-small bottom-margin-small panel-body notification bg-info"><p ng-if="!chat.wished &amp;&amp; !chat.notification.examOver" class="text-center text-bold">{{chat.user.name}} has just started {{subjectNames.getSubjectName(chat.exam.subject)}} exam, wish them a good luck!</p><p ng-if="chat.wished &amp;&amp; !chat.notification.examOver" class="text-center text-bold">You wished Good Luck to {{chat.user.name}} for {{subjectNames.getSubjectName(chat.exam.subject)}} exam.</p><p ng-if=chat.notification.examOver class="text-center text-bold">{{chat.user.name}} just finished {{subjectNames.getSubjectName(chat.exam.subject)}} exam<span ng-if="chat.wellWishers==1">, with the aid of {{chat.wellWishers}} well-wisher</span><span ng-if=chat.wellWishers&gt;1>, with the aid of {{chat.wellWishers}} well-wishers</span><span>!</span></p></div></div><div ng-if="!chat.wished &amp;&amp; !chat.notification.examOver" class=col-xs-12><div class="panel-body text-center"><a omni-tap="chat.disableWish=true; wishGoodLuck(chat)" ng-disabled=chat.disableWish class="avenir-light btn btn-danger shadowed btn-lg text-default"><i class="fa fa-thumbs-up"></i></a></div></div></section><div ng-if="upVotes(chat) &amp;&amp; !chat.notification" ng-init="chat.upvoted=false; chat.downvoted=false" class="top-margin vote-list col-lg-4 col-sm-4 col-xs-4 {{(currentUser[\'email\'] == chat.email) ? \'pull-left\' : \'pull-right\'}}"><span ng-show=showUpVote(chat) omni-tap=upVote({{chat}}) ng-class="{\'votePicked\':!upVotePicked(chat)}" class="fa fa-long-arrow-up vote text-success"></span><span ng-show=showDownVote(chat) omni-tap=downVote({{chat}}) ng-class="{\'votePicked\':!downVotePicked(chat)}" class="fa fa-long-arrow-down vote"></span><span ng-show=showBan(chat) omni-tap="blockUser(\'{{chat.email}}\')" class="fa fa-ban vote"></span></div><div ng-if=chat.older class=col-xs-12><hr></div></div><div class=row><div ng-if=showAdminChat(chat) class="top-margin col-lg-8 pull-left"><div class="panel grey"><div class=panel-body><strong class=text-danger>Admin&nbsp;:&nbsp;</strong><p class=text-danger>{{freeUserMsg}}</p></div></div></div></div></div></tab></tabset></div></section><div class=input-wrapper><input maxlength=300 ng-model=newChat name=newChat ng-hide=hideNewChats() class="chatbox"><button type=submit value=Send ng-hide=hideNewChats() class=btn-send>Send</button></div></form><div ng-hide=chatboxIsVisible() omni-tap=setChatBoxVisible() class="default-chat-header avenir-light ellipsis">{{title}}</div></div></div></div>'),
a.put("components/confirmModal/confirmModal.html",'<div ng-controller=ConfirmModalComponentCtrl class=container-fluid><div class=row><div class=col-sm-12><h1>Are you sure?</h1></div></div><div ng-if=message class=row><div class=col-sm-12>{{confirmBody}}</div></div><div class="row text-center"><div class="col-sm-6 button-wrapper-delete"><button omni-tap=confirm() class="btn btn-primary">Of course!</button></div><div class="col-sm-6 button-wrapper-delete"><button omni-tap=refute() class="btn btn-danger">No way!</button></div></div></div>'),a.put("components/examPage/examPage.html",'<div ng-controller=ExamPageCtrl><div id=top class=container><div ng-if=preExam class="hero-unit avenir-light paper-background"><h2 ng-if=instructions>Instructions</h2><br><p id=instructions mathjax-bind=instructions></p><br><button omni-tap=startExam() smooth-scroll=smooth-scroll target=#top speed=500 class="avenir-light btn btn-danger shadowed btn-lg">Start</button></div></div><div id=exam-nav ng-if=!preExam class="row navbar navbar-default navbar-fixed-top"><div id=return-column class="col-lg-2 col-md-3 col-sm-4 col-xs-5"><a href=account><span ng-class="{\'text-muted\':!preExam &amp;&amp; !examSubmit}" class="fa fa-arrow-left"></span></a></div><div class="col-lg-8 col-md-6 col-sm-4 col-xs-2"></div><div id=timer-column class="col-lg-2 col-md-3 col-sm-4 col-xs-5"><span ng-if=!examSubmit id=timer-span><timer id=countdownTimer countdown=timeInMinutes max-time-unit="\'minute\'" interval=1000 finish-callback=timeOver() language=en>{{mminutes}}:{{sseconds}}</timer></span><div id=score ng-if=examSubmit>({{attemptedQuestions}}/{{totalQuestions}}) {{percentages}}%</div></div></div><div id=exam-container ng-class="examSubmit ? \'border-right border-left\' : \'\'" class=container><div ng-repeat="part in examPart.fullQuestions" class="row padding-bottom"><div class=col-sm-12><div class=row><div ng-if=!examSubmit class="col-lg-2 col-md-1"></div><div ng-if=!preExam ng-class="examSubmit?\'col-md-8 border-right\':\'col-lg-8 col-md-10\'"><div class="form-group row"><div class=col-xs-1><h4>Q{{$index+1}}&nbsp;</h4></div><div class=col-xs-11><div mathjax-bind=part.body class=question-body></div></div></div><div class="form-group row"><div class=col-xs-1></div><ul class="col-xs-11 choices-container"><li ng-repeat="choice in part.choices" class=row><div class=col-xs-1><input type=radio ng-value=choice ng-model=choices[part._id] id={{part._id}}{{$index}} name={{part._id}} ng-if=hasOneCorrect(part.choices) ng-change="storeQuestionContext(part,this)"><input type=checkbox ng-true-value={{choice}} ng-model=choices[part._id][$index] id={{part._id}}{{$index}} name={{part._id}}[] ng-if=!hasOneCorrect(part.choices) ng-change="storeQuestionContext(part,this)"></div><div class=col-xs-11><label mathjax-bind=choice.body for={{part._id}}{{$index}} class=col-xs-11></label></div></li></ul></div></div><div ng-if=!examSubmit class="col-lg-2 col-md-1"></div><div ng-if="!preExam &amp;&amp; examSubmit" class="col-md-4 border-left"><div class="row explanation-container"><div class="col-xs-1 visible-xs visible-sm"></div><div class="col-xs-11 col-md-12"><p ng-class="{\'text-success\':userChoices[part._id].correct, \'text-danger\':!userChoices[part._id].correct}" class=text-bold>{{userChoices[part._id].correct? \'Correct\': userChoices[part._id].correct==false ? \'Incorrect\':\'Not Answered\'}}</p><p mathjax-bind=part.explanation.body></p></div></div></div></div><hr ng-if="examSubmit"><div ng-if=examSubmit ng-init="commentCurrentPage[part._id] = 1" class="row comments-row"><ul class=col-sm-12><h4>Comments on question {{$index+1}}</h4><li ng-if="part.comments.length &gt; commentLim" class=row><div omni-tap=prevPage(part._id) class=col-xs-3><span class="glyphicon glyphicon-chevron-left"></span>&nbsp;Previous Page</div><div class="col-xs-6 text-center"><span>Page {{commentCurrentPage[part._id]}}/{{getMaxPages(part.comments)}}</span></div><div omni-tap="nextPage(part.comments, part._id)" class="col-xs-3 text-right">Next Page&nbsp;<span class="glyphicon glyphicon-chevron-right"></span></div></li><li ng-repeat="comment in part.comments | orderBy: \'date\' | startAt:((commentCurrentPage[part._id]-1)*commentLim) | limitTo: commentLim" class=row><div class=col-xs-2><p class=text-bold>{{ comment.user }}</p><p class=grey-text></p><p class=grey-text>{{getDate(comment.date)}}</p><p class=grey-text>{{getTime(comment.date)}}</p></div><div class=col-xs-10><p class=comment-text>{{comment.comment}}</p></div></li><li class=row><hr><form name=questionCommentForm{{part._id}} ng-model=commentForm[part._id]><div class=col-sm-12><textarea ng-model=commentForm[part._id].comment placeholder="Write your thoughts, {{currentUser.name}} (500 characters max)" maxlength=500 class=form-control></textarea></div><br><div class=row><div class="col-xs-4 col-md-6 col-lg-8"></div><div class="col-xs-4 col-md-3 col-lg-2"><a href="" omni-tap="addingComment[part._id] = false; commentForm[part._id] = {}">Cancel</a></div><div class="col-xs-4 col-md-3 col-lg-2"><button omni-tap="submitComment(commentForm[part._id], part)" class="btn btn-default">Submit</button></div></div></form></li></ul></div><hr ng-if="examSubmit"></div></div><div class="row button-container"><div class="col-xs-1 col-sm-2 col-md-3 col-lg-4"></div><div class="col-xs-10 col-sm-8 col-md-6 col-lg-4"><button smooth-scroll=smooth-scroll target=#top speed=3000 type=button omni-tap=submitExam() ng-if=showSubmit() class="avenir-light btn btn-danger shadowed btn-lg">Submit Test</button><button smooth-scroll=smooth-scroll target=#top speed=3000 type=button omni-tap=nextExam() ng-if=showContinue() class="avenir-light btn btn-danger shadowed btn-lg">Submit and Continue to Part 2</button></div><div class="col-xs-1 col-sm-2 col-md-3 col-lg-4"></div></div></div></div>'),a.put("components/footer/footer.html",'<div class=container><div class=row><div class="col-xs-8 col-sm-10"><div class=pull-left><a href="/" class=footer-link>HOME</a><span>&nbsp; | &nbsp;</span><a href=/contact class=footer-link>CONTACT</a><span>&nbsp; | &nbsp;</span><a href=/terms class=footer-link>TOS</a><span>&nbsp; | &nbsp;</span><a href=/privacy class=footer-link>PRIVACY</a></div></div><div class="col-xs-2 col-sm-1"><span><a href=https://www.facebook.com/Omninox><img src=/assets/images/facebook.png style="width: auto; height: 2em" class="img-responsive"></a></span></div><div class="col-xs-2 col-sm-1"><span><a href=https://www.twitter.com/omninoxco><img src=/assets/images/twitter.png style="width: auto; height: 2em" class="img-responsive"></a></span></div></div><br><br><div class=row><div style=color:gray class=col-xs-12><span>Copyright &copy; 2014 Omninox Corp</span></div></div><div class=row><div style=color:gray class=col-xs-12><span>Certain words and subject names such as Advanced Placement and AP are trademarks of the College Board</span></div></div></div>'),a.put("components/leaderboard/leaderboard.html",'<div ng-controller=CommunityLeadersCtrl><span us-spinner=us-spinner spinner-key=spinner-1 spinner-start-active=true></span><table id=leaderboard class="table table-no-border avenir-light"><tr class=grey><th colspan=2 class=header>Top Community Leaders</th></tr><tr ng-repeat="leader in communityLeaders|limitTo:5"><td style=width:50% ng-show="communityLeaders[$index] != null"><span class=rank>{{communityLeaders[$index].index}}.&nbsp;</span><span class=name>{{communityLeaders[$index].name}}&nbsp;</span><span class=num-users>({{communityLeaders[$index].referral.usersReferredCount}} users)</span></td><td style=width:50% ng-show="communityLeaders[$index+5] != null"><span class=rank>{{communityLeaders[$index+5].index}}.&nbsp;</span><span class=name>{{communityLeaders[$index+5].name}}&nbsp;</span><span class=num-users>({{communityLeaders[$index+5].referral.usersReferredCount}} users)</span></td></tr><tr class="my-rank grey"><td class="small-caps small-text">My Ranking</td><td ng-show="getCurrentUser().referral.usersReferredCount != null"><span class=rank>{{myrank}}.&nbsp;</span><span class=name>{{ getCurrentUser().name }}&nbsp;</span><span class=num-users>({{ getCurrentUser().referral.usersReferredCount }} users)</span></td></tr></table></div>'),a.put("components/livechat/livechat.html","<html><script>var __lc = {};\n__lc.license = 5689681;\n\n(function() {\n  var lc = document.createElement('script'); lc.type = 'text/javascript'; lc.async = true;\n  lc.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'cdn.livechatinc.com/tracking.js';\n  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(lc, s);\n})();</script></html>"),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<div ng-controller=NavbarCtrl autoscroll=true class="navbar navbar-default navbar-static-top"><div class=container><div ng-class="{clearfix: !isCollapsed}" class=navbar-head><button type=button ng-click="isCollapsed = !isCollapsed" class=navbar-toggle><span class=sr-only>Toggle navigation</span><span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button><a href="/" ng-class="{active: isActive(&quot;&quot;)}" class=navbar-brand>Omninox <span style=font-size:0.6em class=avenir-light>BETA</span></a></div><div id=navbar-main ng-class="{collapse: isCollapsed}" class=navbar-collapse><ul ng-class="{&quot;text-center&quot;: !isCollapsed}" class="nav navbar-nav"><li ng-repeat="item in menu" ng-class="{active: isActive(&quot;{{item.link}}&quot;)}"><a ng-href={{item.link}}>{{item.title}}</a></li><li><a href=/blog target=_blank style="target-new: tab">Blog</a></li><li ng-class="{active: isActive(&quot;resources&quot;)}"><a href="/resources/">Resources</a></li><li ng-show="isAdmin() || isTeacher()" ng-class="{active: isActive(&quot;teacher&quot;)}"><a href=/teacher>Teacher</a></li><li ng-show="isAdmin() || isStudent()" ng-class="{active: isActive(&quot;student&quot;)}"><a href=/student>Student</a></li><li ng-show=isAdmin() ng-class="{active: isActive(&quot;admin&quot;)}"><a href=/admin>Admin</a></li></ul><ul ng-class="{&quot;text-center&quot;: !isCollapsed}" class="nav navbar-nav navbar-right"><li ng-hide=isLoggedIn() ng-class="{active: isActive(&quot;signup&quot;)}"><a href=/signup class=navbar-emphasis>Sign up</a></li><li ng-hide=isLoggedIn() ng-class="{active: isActive(&quot;login&quot;)}"><a href=/login class=navbar-emphasis>Login</a></li><li ng-show=isLoggedIn() ng-class="{active: isActive(&quot;settings&quot;)}"><a href=/settings>Settings&nbsp;<span class="glyphicon glyphicon-cog"></span></a></li><li ng-show=isLoggedIn() ng-class="{active: isActive(&quot;logout&quot;)}"><a href="" ng-click=logout()>Logout</a></li></ul></div></div></div>'),a.put("components/omniEditor/omniEditor.html","<textarea ckeditor=editorOptions ng-model=ngModel></textarea>"),a.put("components/omnicordion/omnicordion.html",'<div class=avenir-light><div data-ng-click=toggle() class="title cursor-pointer omni-accordion row"><div class="col-xs-6 col-md-8 subject-name avenir-db">{{title}}</div><div class="col-xs-3 col-md-2 text-center grey-text">highest score</div><div class="col-xs-3 col-md-2 text-center grey-text"># of attempts</div></div><div data-ng-show=showMe data-ng-transclude="" class=body></div></div>'),a.put("components/signupModal/signupModal.html",'<div class=row><div class=col-sm-12><h4>{{message}}</h4></div></div><div class=row><div class=col-sm-12><form name=form ng-submit=register(form) novalidate class="avenir-light form"><div ng-class="{ &quot;has-success&quot;: form.name.$valid &amp;&amp; submitted,      &quot;has-error&quot;: form.name.$invalid &amp;&amp; submitted }" class=form-group><label>Nickname</label><input name=name ng-pattern="/^[a-zA-Z][a-zA-Z .]*-?[a-zA-Z .]+$/" ng-model=user.name required class="omni-input form-control"><p ng-show="form.name.$error.required &amp;&amp; submitted" class=help-block>A name is required</p><p ng-show="form.name.$error.pattern &amp;&amp; submitted" class=help-block>Your name should start with a letter, and only include letters, spaces, dashes, or periods.</p></div><div ng-class="{ &quot;has-success&quot;: form.email.$valid &amp;&amp; submitted,      &quot;has-error&quot;: form.email.$invalid &amp;&amp; submitted }" class=form-group><label>Email</label><input name=email ng-model=user.email ng-pattern="/[a-z0-9!#$%&amp;\'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&amp;\'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/" ng-disabled=setEmail required mongoose-error="" class="omni-input form-control"><p ng-show="form.email.$error.pattern &amp;&amp; submitted" class=help-block>Doesn\'t look like a valid email. (Did you include the @ and the .whatever?)</p><p ng-show="form.email.$error.required &amp;&amp; submitted" class=help-block>What\'s your email address?</p><p ng-show=form.email.$error.mongoose class=help-block>{{ errors.email }}</p></div><div ng-class="{ &quot;has-success&quot;: form.password.$valid &amp;&amp; submitted,      &quot;has-error&quot;: form.password.$invalid &amp;&amp; submitted }" class=form-group><label>Password</label><input type=password name=password ng-model=user.password ng-minlength=3 required mongoose-error="" class="omni-input form-control"><p ng-show="(form.password.$error.minlength || form.password.$error.required) &amp;&amp; submitted" class=help-block>Password must be at least 3 characters.</p><p ng-show=form.password.$error.mongoose class=help-block>{{ errors.password }}</p></div><div ng-class="{ &quot;has-success&quot;: form.academicRole.$valid &amp;&amp; submitted,      &quot;has-error&quot;: form.academicRole.$invalid &amp;&amp; submitted }" class=form-group><label>Academic Role</label><select ng-init="user.academicRole=&quot;Student&quot;" name=academicRole ng-model=user.academicRole required mongoose-error="" ng-disabled=setAcademicRole class=form-control><option>Student</option><option>Teacher</option><!-- Limiting to just student or teacher for now\noption School Staff\noption parent--></select><p ng-show="(form.academicRole.$error.required &amp;&amp; submitted)" class=help-block>Please let us know your academic role.</p><p ng-show=form.academicRole.$error.mongoose class=help-block>{{ errors.academicRole }}</p></div><div><button type=submit class="btn btn-inverse btn-lg btn-login">Sign up</button></div><br><br><p>By signing up you agree to our <a href=/terms>Terms of Service</a> and <a href=/privacy>Privacy Policy</a>. In essence they say:</p><ul class=tos-list><li>We will not sell your personal information.</li><li>We might reach out to you to ask about your experience and feedback.</li><li>You are at least 13 years of age.</li></ul></form></div></div>'),a.put("components/studentsProgress/studentsProgress.html",'<div class=container><div class=row><div class=col-sm-12><h2>Students Progress Report</h2></div></div><div ng-if=hasSubjectTaught() class=row><div class=col-sm-12><span us-spinner=us-spinner spinner-key=spinner-search spinner-start-active=false></span><ul class=list-group><li class=list-group-item><div class=row><div class=col-sm-8><div class=col-sm-5><label>Student:</label><input ng-model=filter.search placeholder=Search ng-change=updateFiltered() maxlength="255"></div><div class=col-sm-7><label>Subject:</label><select ng-model=selectedSubject.subject ng-options="subject.subjectName as subject.subjectName for subject in subjectsTaught" ng-change=updateStudentsList()></select></div></div><div ng-if="students.length &gt; 0" class="col-sm-4 pages"><span omni-tap=page(-1) class=prevPage>&lt;</span><span>{{currentPage}}/{{maxPage}}</span><span omni-tap=page(1) class=nextPage>&gt;</span></div></div></li><li ng-if="students.length &gt; 0" class=list-group-item><div class=row><div class=col-sm-3><strong>Name</strong></div><div class=col-sm-3><strong>Email</strong></div><div class=col-sm-3><strong>Attempts</strong></div><div class=col-sm-3><strong>Score</strong></div></div></li><li ng-if="students.length === 0" class=list-group-item><div class=row><col-sm-12><p class="text-center text-bold">No results found</p></col-sm-12></div></li><li ng-repeat="student in filtered" class=list-group-item><div class=row><div class="col-sm-3 name">{{student.name}}</div><div class="col-sm-3 email">{{student.email}}</div><div class="col-sm-3 attempts">{{getExamAttempts(student)}}</div><div class="col-sm-3 score">{{getHighScore(student)}}</div></div></li></ul></div></div><div ng-if=!hasSubjectTaught() class=row><div class=col-sm-12><h4>No subjects found.</h4></div></div></div>'),a.put("components/surveyModal/surveyModal.html","<div class=container-fluid><form name=surveyForm class=form-horizontal><div class=row><div class=col-sm-12><h1>{{survey.name}}</h1></div></div><div class=row><div class=col-sm-12><p>{{survey.info}}</p></div></div><!--.row(ng-repeat='question in survey.questions')\n  .col-sm-12.well\n    .row\n      .col-sm-12\n        p\n          | {{question.questionContent}}\n    .row(ng-repeat='choice in question.choices')\n      .col-sm-12\n        p\n          | {{choice.choiceContent}}\n"+'        --><div ng-repeat="question in survey.questions" class="row padding-bottom"><div class=col-md-1></div><div class=col-md-10><div class="form-group row"><div class=col-xs-11><div mathjax-bind=question.questionContent class=question-body></div></div></div><div class="form-group row"><div class=col-xs-1></div><ul class="col-xs-11 surveyChoices"><li ng-repeat="choice in question.choices" class=row><div class=col-xs-1><input type=radio ng-value=choice ng-model=question.selection id={{question._id}}{{$index}} name={{question._id}} ng-required="true"></div><div class=col-xs-11><label mathjax-bind=choice.choiceContent for={{question._id}}{{$index}} class=col-xs-11></label></div></li><li class=row><div class=col-xs-12><div class=row><hr style="border-color:black;opacity:0.75"></div><div class=row><div class=col-xs-12><p>Please elaborate on your answer. (Optional)</p></div></div><div class=row><div class=col-xs-12><textarea ng-model=question.explanation name="{{question._id}} + \'explanation\'" ng-required=false></textarea></div></div></div></li></ul></div></div><div class=col-md-1></div><div class=row><div class="col-sm-12 text-center"><button omni-tap=submitSurvey(surveyForm) class="btn btn-primary">Submit</button></div></div></div></form></div>')}]);